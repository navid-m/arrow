<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - telemetry</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 14px;
            scroll-behavior: smooth;
         }

         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
            line-height: 1.6;
         }

         .sidebar {
            width: 12%;
            background: rgba(59, 56, 56, 0.15);
            padding: 1.5rem;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.4);
            overflow-y: auto;
            position: sticky;
            top: 0;
            height: 100vh;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
         }

         .sidebar::-webkit-scrollbar {
            width: 6px;
         }

         .sidebar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
         }

         .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
         }

         main {
            flex: 1;
            padding: 2rem;
            margin: 0;
            max-width: calc(100% - 280px);
            background: linear-gradient(
               135deg,
               rgba(59, 56, 56, 0.05) 0%,
               rgba(0, 0, 0, 0.1) 100%
            );
         }

         .nav-links {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
         }

         .nav-links a {
            color: #ddd;
            text-decoration: none;
            padding: 0.5rem;
            border-radius: 4px;
            transition: all 0.2s ease;
         }

         .nav-links a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
         }

         h1 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #fff 0%, #ddd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
         }

         h2 {
            font-size: 1.4rem;
            margin: 1rem 0 0.5rem;
            color: #f0f0f0;
         }

         h3 {
            font-size: 1.2rem;
            margin: 0.8rem 0 0.3rem;
            color: #e0e0e0;
            position: relative;
         }

         .sidebar h2,
         .sidebar h3 {
            font-size: 1rem;
            margin: 0.5rem 0 0.3rem;
            color: #ccc;
         }

         /* Anchor link styling */
         .anchor {
            color: rgba(255, 255, 255, 0.3);
            text-decoration: none;
            font-weight: normal;
            margin-left: 0.5rem;
            opacity: 0;
            transition: opacity 0.2s ease;
            font-size: 0.8em;
         }

         h3:hover .anchor,
         .anchor:focus {
            opacity: 1;
         }

         .anchor:hover {
            color: rgba(255, 255, 255, 0.6);
         }

         /* Scroll target offset for fixed elements */
         .symbol-anchor {
            scroll-margin-top: 2rem;
         }

         pre {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e6e6e6;
            padding: 1rem 1.2rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.9rem;
            overflow-x: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
         }

         code {
            color: #f5f5f5;
            font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
            white-space: pre-wrap;
         }

         p {
            font-size: 15px;
            margin: 1rem 0;
            color: #ddd;
         }

         article {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(59, 56, 56, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
         }

         article:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
         }

         article:target {
            border-color: rgba(100, 200, 255, 0.5);
            box-shadow: 0 0 0 2px rgba(100, 200, 255, 0.2);
         }

         .hidden {
            display: none !important;
         }

         .filter-section {
            margin-bottom: 1.5rem;
         }

         .filter-section h3 {
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #aaa;
         }

         .filter-toggle label {
            display: flex;
            align-items: center;
            margin-bottom: 0.6rem;
            font-size: 0.85rem;
            color: #bbb;
            cursor: pointer;
            padding: 0.3rem;
            border-radius: 4px;
            transition: background 0.2s ease;
         }

         .filter-toggle label:hover {
            background: rgba(255, 255, 255, 0.05);
         }

         .filter-toggle input {
            margin-right: 0.6rem;
         }

         .field-line,
         .method-line {
            display: block;
         }

         #searchInput {
            width: 100%;
            margin-bottom: 1.5rem;
            border-radius: 8px !important;
            height: 2.8rem;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 0 1rem;
         }

         #searchInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
         }

         #searchInput:focus {
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
         }

         .section-divider {
            height: 1px;
            background: linear-gradient(
               90deg,
               transparent 0%,
               rgba(255, 255, 255, 0.3) 50%,
               transparent 100%
            );
            margin: 1.5rem 0;
         }

         .subpackage-list {
            list-style: none;
            padding: 0;
         }

         .subpackage-list li {
            margin-bottom: 0.4rem;
         }

         .subpackage-list a {
            display: block;
            padding: 0.5rem 0.8rem;
            color: #ccc;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.85rem;
         }

         .subpackage-list a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            transform: translateX(4px);
         }

         .empty-state {
            color: rgba(177, 175, 175, 0.6);
            font-style: italic;
            font-size: 0.8rem;
         }

         .badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            color: #ddd;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
            margin-left: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .method-badge {
            background: rgba(100, 200, 255, 0.2);
            color: #87ceeb;
         }

         .const-badge {
            background: rgba(255, 200, 100, 0.2);
            color: #ffd700;
         }

         .var-badge {
            background: rgba(200, 255, 100, 0.2);
            color: #90ee90;
         }

         .type-badge {
            background: rgba(255, 100, 200, 0.2);
            color: #699eff;
         }

         .interface-badge {
            background: rgba(150, 100, 255, 0.2);
            color: #dda0dd;
         }

         .toc {
            position: sticky;
            top: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
         }

         .toc h4 {
            margin: 0 0 0.8rem;
            font-size: 0.9rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
         }

         .toc li {
            margin-bottom: 0.3rem;
         }

         .toc a {
            color: #bbb;
            text-decoration: none;
            font-size: 0.8rem;
            transition: color 0.2s ease;
         }

         .toc a:hover {
            color: #fff;
         }

         .symbol-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.2);
         }

         .symbol-list::-webkit-scrollbar {
            width: 4px;
         }

         .symbol-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
         }

         .symbol-list ul {
            list-style: none;
            padding: 0.5rem;
            margin: 0;
         }

         .symbol-list li {
            margin-bottom: 0.2rem;
         }

         .symbol-list a {
            display: block;
            padding: 0.3rem 0.5rem;
            color: #bbb;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-size: 0.75rem;
         }

         .symbol-list a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
         }

         @media (max-width: 768px) {
            body {
               flex-direction: column;
            }

            .sidebar {
               width: 90%;
               height: auto;
               position: relative;
            }

            main {
               max-width: 100%;
               padding: 1rem;
            }
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <div class="nav-links">
            <a href="index.html" title="Home">⌂</a>
            <span>|</span>
            <a href="#" onclick="history.back()" title="Back">←</a>
         </div>

         <div class="filter-section">
            <h3>Search</h3>
            <input
               type="search"
               id="searchInput"
               placeholder="Search symbols..."
            />
         </div>

         <div class="filter-section">
            <h3>Filters</h3>
            <div class="filter-toggle">
               <label>
                  <input type="checkbox" id="showImports" />
                  Show imports
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFunctions" />
                  Show private functions
               </label>
               <label>
                  <input type="checkbox" id="showPrivateStructs" />
                  Show private structs
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFields" />
                  Show private fields
               </label>
               <label>
                  <input type="checkbox" id="showPrivateGlobals" />
                  Show private globals
               </label>
               <label>
                  <input type="checkbox" id="showPrivateTypes" />
                  Show private types
               </label>
               <label>
                  <input type="checkbox" id="showPrivateInterfaces" />
                  Show private interfaces
               </label>
            </div>
         </div>

         <div class="section-divider"></div>

         <div class="filter-section">
            <h3>Subpackages</h3>
            
            <ul class="subpackage-list">
               
               <li><a href="cmd_vendor_golang.org_x_telemetry_counter-docs.html">counter</a></li>
               
            </ul>
            
         </div>

         
         <div class="section-divider"></div>

         <div class="toc">
            <h4>Quick Navigation</h4>
            <ul>
               
               <li><a href="#globals">Constants & Variables</a></li>
                
               <li><a href="#types">Type Aliases</a></li>
                 
               <li><a href="#structs">Structs</a></li>
                
               <li><a href="#functions">Functions</a></li>
               
            </ul>
         </div>

         <div class="filter-section">
            <h3>All Symbols</h3>
            <div class="symbol-list">
               <ul id="symbolIndex">
               </ul>
            </div>
         </div>
         
      </aside>

      <main>
         <h1>telemetry</h1>
         <div class="section-divider"></div>

         
         <section id="imports">
            <h2>Imports</h2>
            <article class="imports symbol-anchor" id="imports-section" data-name="imports">
               <h3>
                  Imports
                  <a href="#imports-section" class="anchor" title="Link to imports">#</a>
               </h3>
               <pre><code>"os/exec"
"syscall"
"golang.org/x/sys/windows"
"golang.org/x/telemetry/internal/telemetry"
"golang.org/x/telemetry/internal/telemetry"
"golang.org/x/telemetry/internal/telemetry"
"fmt"
"log"
"os"
"os/exec"
"path/filepath"
"sync"
"time"
"golang.org/x/sync/errgroup"
"golang.org/x/telemetry/counter"
"golang.org/x/telemetry/internal/crashmonitor"
"golang.org/x/telemetry/internal/telemetry"
"golang.org/x/telemetry/internal/upload"
"os/exec"
"syscall"
</code></pre>
            </article>
         </section>
          
         <section id="globals">
            <h2>Constants & Variables</h2>
            
            <article class="global symbol-anchor" id="daemonize" data-name="daemonize">
               <h3>
                  daemonize 
                  <span class="badge var-badge">var</span>
                  
                  <a href="#daemonize" class="anchor" title="Link to daemonize">#</a>
               </h3>
               
               <pre><code>var daemonize = *ast.FuncLit</code></pre>
            </article>
            
            <article class="global symbol-anchor" id="telemetryChildVar" data-name="telemetryChildVar">
               <h3>
                  telemetryChildVar 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#telemetryChildVar" class="anchor" title="Link to telemetryChildVar">#</a>
               </h3>
               
               <p>If telemetryChildVar is set to "1" in the environment, this is the telemetry
child.
If telemetryChildVar is set to "2", this is a child of the child, and no
further forking should occur.</p>
               
               <pre><code>const telemetryChildVar = "GO_TELEMETRY_CHILD"</code></pre>
            </article>
            
            <article class="global symbol-anchor" id="telemetryUploadVar" data-name="telemetryUploadVar">
               <h3>
                  telemetryUploadVar 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#telemetryUploadVar" class="anchor" title="Link to telemetryUploadVar">#</a>
               </h3>
               
               <p>If telemetryUploadVar is set to "1" in the environment, the upload token has been
acquired by the parent, and the child should attempt an upload.</p>
               
               <pre><code>const telemetryUploadVar = "GO_TELEMETRY_CHILD_UPLOAD"</code></pre>
            </article>
            
         </section>
          
         <section id="types">
            <h2>Type Aliases</h2>
            
            <article class="type symbol-anchor" id="CounterConfig" data-name="CounterConfig">
               <h3>
                  CounterConfig
                  <span class="badge type-badge">type</span>
                  <a href="#CounterConfig" class="anchor" title="Link to CounterConfig">#</a>
               </h3>
               
               <pre><code>type CounterConfig telemetry.CounterConfig</code></pre>
            </article>
            
            <article class="type symbol-anchor" id="ProgramConfig" data-name="ProgramConfig">
               <h3>
                  ProgramConfig
                  <span class="badge type-badge">type</span>
                  <a href="#ProgramConfig" class="anchor" title="Link to ProgramConfig">#</a>
               </h3>
               
               <pre><code>type ProgramConfig telemetry.ProgramConfig</code></pre>
            </article>
            
            <article class="type symbol-anchor" id="ProgramReport" data-name="ProgramReport">
               <h3>
                  ProgramReport
                  <span class="badge type-badge">type</span>
                  <a href="#ProgramReport" class="anchor" title="Link to ProgramReport">#</a>
               </h3>
               
               <pre><code>type ProgramReport telemetry.ProgramReport</code></pre>
            </article>
            
            <article class="type symbol-anchor" id="Report" data-name="Report">
               <h3>
                  Report
                  <span class="badge type-badge">type</span>
                  <a href="#Report" class="anchor" title="Link to Report">#</a>
               </h3>
               
               <p>A Report is what's uploaded (or saved locally)</p>
               
               <pre><code>type Report telemetry.Report</code></pre>
            </article>
            
            <article class="type symbol-anchor" id="UploadConfig" data-name="UploadConfig">
               <h3>
                  UploadConfig
                  <span class="badge type-badge">type</span>
                  <a href="#UploadConfig" class="anchor" title="Link to UploadConfig">#</a>
               </h3>
               
               <p>An UploadConfig controls what data is uploaded.</p>
               
               <pre><code>type UploadConfig telemetry.UploadConfig</code></pre>
            </article>
            
         </section>
           
         <section id="structs">
            <h2>Structs</h2>
            
            <article class="struct symbol-anchor" id="Config" data-name="Config">
               <h3>
                  Config
                  <span class="badge">struct</span>
                  <a href="#Config" class="anchor" title="Link to Config">#</a>
               </h3>
               
               <p>Config controls the behavior of [Start].</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type Config struct {
ReportCrashes bool
Upload bool
TelemetryDir string
UploadStartTime time.Time
UploadURL string
}</code></pre>
            </article>
            
            <article class="struct symbol-anchor" id="StartResult" data-name="StartResult">
               <h3>
                  StartResult
                  <span class="badge">struct</span>
                  <a href="#StartResult" class="anchor" title="Link to StartResult">#</a>
               </h3>
               
               <p>A StartResult is a handle to the result of a call to [Start]. Call
[StartResult.Wait] to wait for the completion of all work done on behalf of
Start.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type StartResult struct {
wg sync.WaitGroup
}</code></pre>
            </article>
            
         </section>
          
         <section id="functions">
            <h2>Functions</h2>
            
            <article class="function symbol-anchor" id="Dir" data-name="Dir">
               <h3>
                  Dir 
                  <span class="badge">function</span>
                  
                  <a href="#Dir" class="anchor" title="Link to Dir">#</a>
               </h3>
               
               <p>Dir returns the telemetry directory.</p>
               
               <pre><code>func Dir() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="MaybeChild" data-name="MaybeChild">
               <h3>
                  MaybeChild 
                  <span class="badge">function</span>
                  
                  <a href="#MaybeChild" class="anchor" title="Link to MaybeChild">#</a>
               </h3>
               
               <p>MaybeChild executes the telemetry child logic if the calling program is
the telemetry child process, and does nothing otherwise. It is meant to be
called as the first thing in a program that uses telemetry.Start but cannot
call telemetry.Start immediately when it starts.</p>
               
               <pre><code>func MaybeChild(config Config)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Mode" data-name="Mode">
               <h3>
                  Mode 
                  <span class="badge">function</span>
                  
                  <a href="#Mode" class="anchor" title="Link to Mode">#</a>
               </h3>
               
               <p>Mode returns the current telemetry mode.
The telemetry mode is a global value that controls both the local collection
and uploading of telemetry data. Possible mode values are:
- "on":    both collection and uploading is enabled
- "local": collection is enabled, but uploading is disabled
- "off":   both collection and uploading are disabled
When mode is "on", or "local", telemetry data is written to the local file
system and may be inspected with the [gotelemetry] command.
If an error occurs while reading the telemetry mode from the file system,
Mode returns the default value "local".
[gotelemetry]: https://pkg.go.dev/golang.org/x/telemetry/cmd/gotelemetry</p>
               
               <pre><code>func Mode() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="SetMode" data-name="SetMode">
               <h3>
                  SetMode 
                  <span class="badge">function</span>
                  
                  <a href="#SetMode" class="anchor" title="Link to SetMode">#</a>
               </h3>
               
               <p>SetMode sets the global telemetry mode to the given value.
See the documentation of [Mode] for a description of the supported mode
values.
An error is returned if the provided mode value is invalid, or if an error
occurs while persisting the mode value to the file system.</p>
               
               <pre><code>func SetMode(mode string) error</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Start" data-name="Start">
               <h3>
                  Start 
                  <span class="badge">function</span>
                  
                  <a href="#Start" class="anchor" title="Link to Start">#</a>
               </h3>
               
               <p>Start initializes telemetry using the specified configuration.
Start opens the local telemetry database so that counter increment
operations are durably recorded in the local file system.
If [Config.Upload] is set, and the user has opted in to telemetry
uploading, this process may attempt to upload approved counters
to telemetry.go.dev.
If [Config.ReportCrashes] is set, any fatal crash will be
recorded by incrementing a counter named for the stack of the
first running goroutine in the traceback.
If either of these flags is set, Start re-executes the current
executable as a child process, in a special mode in which it
acts as a telemetry sidecar for the parent process (the application).
In that mode, the call to Start will never return, so Start must
be called immediately within main, even before such things as
inspecting the command line. The application should avoid expensive
steps or external side effects in init functions, as they will
be executed twice (parent and child).
Start returns a StartResult, which may be awaited via [StartResult.Wait] to
wait for all work done by Start to complete.</p>
               
               <pre><code>func Start(config Config) *StartResult</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Wait" data-name="Wait">
               <h3>
                  Wait 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Wait" class="anchor" title="Link to Wait">#</a>
               </h3>
               
               <p>Wait waits for the completion of all work initiated by [Start].</p>
               
               <pre><code>func (res *StartResult) Wait()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="acquireUploadToken" data-name="acquireUploadToken">
               <h3>
                  acquireUploadToken 
                  <span class="badge">function</span>
                  
                  <a href="#acquireUploadToken" class="anchor" title="Link to acquireUploadToken">#</a>
               </h3>
               
               <p>acquireUploadToken acquires a token permitting the caller to upload.
To limit the frequency of uploads, only one token is issue per
machine per time period.
The boolean indicates whether the token was acquired.</p>
               
               <pre><code>func acquireUploadToken() bool</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="child" data-name="child">
               <h3>
                  child 
                  <span class="badge">function</span>
                  
                  <a href="#child" class="anchor" title="Link to child">#</a>
               </h3>
               
               <pre><code>func child(config Config)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="daemonizePosix" data-name="daemonizePosix">
               <h3>
                  daemonizePosix 
                  <span class="badge">function</span>
                  
                  <a href="#daemonizePosix" class="anchor" title="Link to daemonizePosix">#</a>
               </h3>
               
               <pre><code>func daemonizePosix(cmd *exec.Cmd)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="daemonizeWindows" data-name="daemonizeWindows">
               <h3>
                  daemonizeWindows 
                  <span class="badge">function</span>
                  
                  <a href="#daemonizeWindows" class="anchor" title="Link to daemonizeWindows">#</a>
               </h3>
               
               <pre><code>func daemonizeWindows(cmd *exec.Cmd)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="init" data-name="init">
               <h3>
                  init 
                  <span class="badge">function</span>
                  
                  <a href="#init" class="anchor" title="Link to init">#</a>
               </h3>
               
               <pre><code>func init()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="init" data-name="init">
               <h3>
                  init 
                  <span class="badge">function</span>
                  
                  <a href="#init" class="anchor" title="Link to init">#</a>
               </h3>
               
               <pre><code>func init()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="parent" data-name="parent">
               <h3>
                  parent 
                  <span class="badge">function</span>
                  
                  <a href="#parent" class="anchor" title="Link to parent">#</a>
               </h3>
               
               <pre><code>func parent(config Config) *StartResult</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="startChild" data-name="startChild">
               <h3>
                  startChild 
                  <span class="badge">function</span>
                  
                  <a href="#startChild" class="anchor" title="Link to startChild">#</a>
               </h3>
               
               <pre><code>func startChild(reportCrashes bool, upload bool, result *StartResult)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="uploaderChild" data-name="uploaderChild">
               <h3>
                  uploaderChild 
                  <span class="badge">function</span>
                  
                  <a href="#uploaderChild" class="anchor" title="Link to uploaderChild">#</a>
               </h3>
               
               <pre><code>func uploaderChild(asof time.Time, uploadURL string)</code></pre>
            </article>
            
         </section>
         
      </main>

      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }

         function buildSymbolIndex() {
            const symbolIndex = document.getElementById('symbolIndex');
            if (!symbolIndex) return;

            const symbols = [];
            
            document.querySelectorAll('article[data-name]').forEach(article => {
               const name = article.dataset.name;
               const type = article.className.split(' ')[0]; 
               const isPrivateSymbol = isPrivate(name);
               
               if (name && name !== 'imports') {
                  symbols.push({
                     name,
                     type,
                     element: article,
                     isPrivate: isPrivateSymbol
                  });
               }
            });

            symbols.sort((a, b) => a.name.localeCompare(b.name));
            symbolIndex.innerHTML = '';
            symbols.forEach(symbol => {
               const li = document.createElement('li');
               const a = document.createElement('a');
               a.href = `#${symbol.name}`;
               a.textContent = symbol.name;
               a.title = `${symbol.type}: ${symbol.name}`;
               
               if (symbol.isPrivate) {
                  li.classList.add('private', 'hidden');
               }
               
               li.appendChild(a);
               symbolIndex.appendChild(li);
            });
         }

         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               imports: document.getElementById("showImports"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
               types: document.getElementById("showPrivateTypes"),
               interfaces: document.getElementById(
                  "showPrivateInterfaces"
               ),
            };

            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });

               if (toggle) {
                  toggle.addEventListener("change", () => {
                     const show = toggle.checked;
                     document
                        .querySelectorAll(`${selector}.private`)
                        .forEach((el) => {
                           el.classList.toggle("hidden", !show);
                        });
                     
                     const symbolIndexItems = document.querySelectorAll('#symbolIndex li.private');
                     symbolIndexItems.forEach(li => {
                        const link = li.querySelector('a');
                        if (link) {
                           const targetId = link.getAttribute('href').substring(1);
                           const targetEl = document.getElementById(targetId);
                           if (targetEl && targetEl.matches(selector)) {
                              li.classList.toggle("hidden", !show);
                           }
                        }
                     });
                  });
               }
            };

            hideInitial("article.imports", toggles.imports);
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            hideInitial("article.type", toggles.types);
            hideInitial("article.interface", toggles.interfaces);

            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;

                  const lines = codeBlock.innerHTML.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch && trimmed != "}") {
                           return `<span class="field-line">${line}</span>`;
                        }
                        if (nameMatch == null) return;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class="field-line${
                           isPriv ? " hidden private" : ""
                        }" data-name="${name}">${line}</span>`;
                     })
                     .join("");

                  codeBlock.innerHTML = newContent;

                  if (toggles.fields) {
                     toggles.fields.addEventListener("change", () => {
                        const show = toggles.fields.checked;
                        article
                           .querySelectorAll(".field-line.private")
                           .forEach((el) =>
                              el.classList.toggle("hidden", !show)
                           );
                     });
                  }
               });

            document
               .querySelectorAll("article.interface")
               .forEach((article) => {
                  const codeBlock = article.querySelector(
                     "code.methods-code"
                  );
                  if (!codeBlock) return;

                  const lines = codeBlock.innerHTML.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch) {
                           return `<span class="method-line">${line}</span>`;
                        }

                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class="method-line${
                           isPriv ? " hidden private" : ""
                        }" data-name="${name}">${line}</span>`;
                     })
                     .join("");

                  codeBlock.innerHTML = newContent;

                  if (toggles.fields) {
                     toggles.fields.addEventListener("change", () => {
                        const show = toggles.fields.checked;
                        article
                           .querySelectorAll(".method-line.private")
                           .forEach((el) =>
                              el.classList.toggle("hidden", !show)
                           );
                     });
                  }
               });

            const searchInput = document.getElementById("searchInput");
            if (searchInput) {
               searchInput.addEventListener("input", () => {
                  const query = searchInput.value.trim().toLowerCase();

                  document.querySelectorAll("article").forEach((el) => {
                     const name = el.dataset.name;
                     if (!name) return;

                     const matches =
                        query === "" ||
                        name.toLowerCase().includes(query) ||
                        (el.textContent &&
                           el.textContent.toLowerCase().includes(query));

                     if (matches) {
                        const isPrivateEl =
                           el.classList.contains("private");
                        const shouldShowPrivate =
                           getPrivateToggleState(el);

                        if (!isPrivateEl || shouldShowPrivate) {
                           el.classList.remove("hidden");
                        }
                     } else {
                        el.classList.add("hidden");
                     }
                  });

                  document.querySelectorAll('#symbolIndex li').forEach(li => {
                     const link = li.querySelector('a');
                     if (link) {
                        const symbolName = link.textContent.toLowerCase();
                        const matches = query === "" || symbolName.includes(query);
                        
                        if (matches) {
                           const isPrivateSymbol = li.classList.contains('private');
                           const targetId = link.getAttribute('href').substring(1);
                           const targetEl = document.getElementById(targetId);
                           const shouldShowPrivate = targetEl ? getPrivateToggleState(targetEl) : false;
                           
                           if (!isPrivateSymbol || shouldShowPrivate) {
                              li.style.display = '';
                           }
                        } else {
                           li.style.display = 'none';
                        }
                     }
                  });
               });
            }

            function getPrivateToggleState(element) {
               if (element.classList.contains("function")) {
                  return toggles.functions?.checked || false;
               } else if (element.classList.contains("struct")) {
                  return toggles.structs?.checked || false;
               } else if (element.classList.contains("global")) {
                  return toggles.globals?.checked || false;
               } else if (element.classList.contains("type")) {
                  return toggles.types?.checked || false;
               } else if (element.classList.contains("interface")) {
                  return toggles.interfaces?.checked || false;
               } else if (element.classList.contains("imports")) {
                  return toggles.imports?.checked || false;
               }
               return false;
            }

            buildSymbolIndex();

            document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
               anchor.addEventListener("click", function (e) {
                  const target = document.querySelector(
                     this.getAttribute("href")
                  );
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               });
            });

            window.addEventListener('hashchange', () => {
               const hash = window.location.hash;
               if (hash) {
                  const target = document.querySelector(hash);
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               }
            });

            if (window.location.hash) {
               setTimeout(() => {
                  const target = document.querySelector(window.location.hash);
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               }, 100);
            }
         });
      </script>
   </body>
</html>