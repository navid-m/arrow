<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - gc</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>gc</code>
         </h1>
         <hr />
         
         <article class="global" data-name="modeCompilerObj">
            <h2>modeCompilerObj</h2>
            <hr />
            
            <p>These modes say which kind of object file to generate.
The default use of the toolchain is to set both bits,
generating a combined compiler+linker object, one that
serves to describe the package to both the compiler and the linker.
In fact the compiler and linker read nearly disjoint sections of
that file, though, so in a distributed build setting it can be more
efficient to split the output into two files, supplying the compiler
object only to future compilations and the linker object only to
future links.

By default a combined object is written, but if -linkobj is specified
on the command line then the default -o output is a compiler object
and the -linkobj output is a linker object.</p>
            
            <pre><code>modeCompilerObj</code></pre>
         </article>
         
         <article class="global" data-name="modeLinkerObj">
            <h2>modeLinkerObj</h2>
            <hr />
            
            <p>These modes say which kind of object file to generate.
The default use of the toolchain is to set both bits,
generating a combined compiler+linker object, one that
serves to describe the package to both the compiler and the linker.
In fact the compiler and linker read nearly disjoint sections of
that file, though, so in a distributed build setting it can be more
efficient to split the output into two files, supplying the compiler
object only to future compilations and the linker object only to
future links.

By default a combined object is written, but if -linkobj is specified
on the command line then the default -o output is a compiler object
and the -linkobj output is a linker object.</p>
            
            <pre><code>modeLinkerObj</code></pre>
         </article>
         
         <article class="global" data-name="compilequeue">
            <h2>compilequeue</h2>
            <hr />
            
            <pre><code>compilequeue []*ir.Func</code></pre>
         </article>
           
         <article class="function" data-name="dumpobj">
            <h2>dumpobj</h2>
            <hr />
            
            <pre><code>func dumpobj()</code></pre>
         </article>
         
         <article class="function" data-name="dumpobj1">
            <h2>dumpobj1</h2>
            <hr />
            
            <pre><code>func dumpobj1(outfile string, mode int)</code></pre>
         </article>
         
         <article class="function" data-name="printObjHeader">
            <h2>printObjHeader</h2>
            <hr />
            
            <pre><code>func printObjHeader(bout *bio.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="startArchiveEntry">
            <h2>startArchiveEntry</h2>
            <hr />
            
            <pre><code>func startArchiveEntry(bout *bio.Writer) int64</code></pre>
         </article>
         
         <article class="function" data-name="finishArchiveEntry">
            <h2>finishArchiveEntry</h2>
            <hr />
            
            <pre><code>func finishArchiveEntry(bout *bio.Writer, start int64, name string)</code></pre>
         </article>
         
         <article class="function" data-name="dumpCompilerObj">
            <h2>dumpCompilerObj</h2>
            <hr />
            
            <pre><code>func dumpCompilerObj(bout *bio.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="dumpdata">
            <h2>dumpdata</h2>
            <hr />
            
            <pre><code>func dumpdata()</code></pre>
         </article>
         
         <article class="function" data-name="dumpLinkerObj">
            <h2>dumpLinkerObj</h2>
            <hr />
            
            <pre><code>func dumpLinkerObj(bout *bio.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="dumpGlobal">
            <h2>dumpGlobal</h2>
            <hr />
            
            <pre><code>func dumpGlobal(n *ir.Name)</code></pre>
         </article>
         
         <article class="function" data-name="dumpGlobalConst">
            <h2>dumpGlobalConst</h2>
            <hr />
            
            <pre><code>func dumpGlobalConst(n *ir.Name)</code></pre>
         </article>
         
         <article class="function" data-name="addGCLocals">
            <h2>addGCLocals</h2>
            <hr />
            
            <p>addGCLocals adds gcargs, gclocals, gcregs, and stack object symbols to Ctxt.Data.

This is done during the sequential phase after compilation, since
global symbols can't be declared during parallel compilation.</p>
            
            <pre><code>func addGCLocals()</code></pre>
         </article>
         
         <article class="function" data-name="ggloblnod">
            <h2>ggloblnod</h2>
            <hr />
            
            <pre><code>func ggloblnod(nam *ir.Name)</code></pre>
         </article>
         
         <article class="function" data-name="dumpembeds">
            <h2>dumpembeds</h2>
            <hr />
            
            <pre><code>func dumpembeds()</code></pre>
         </article>
         
         <article class="function" data-name="profileName">
            <h2>profileName</h2>
            <hr />
            
            <pre><code>func profileName(fn string, suffix string) string</code></pre>
         </article>
         
         <article class="function" data-name="startProfile">
            <h2>startProfile</h2>
            <hr />
            
            <pre><code>func startProfile()</code></pre>
         </article>
         
         <article class="function" data-name="enqueueFunc">
            <h2>enqueueFunc</h2>
            <hr />
            
            <pre><code>func enqueueFunc(fn *ir.Func)</code></pre>
         </article>
         
         <article class="function" data-name="prepareFunc">
            <h2>prepareFunc</h2>
            <hr />
            
            <p>prepareFunc handles any remaining frontend compilation tasks that
aren't yet safe to perform concurrently.</p>
            
            <pre><code>func prepareFunc(fn *ir.Func)</code></pre>
         </article>
         
         <article class="function" data-name="compileFunctions">
            <h2>compileFunctions</h2>
            <hr />
            
            <p>compileFunctions compiles all functions in compilequeue.
It fans out nBackendWorkers to do the work
and waits for them to complete.</p>
            
            <pre><code>func compileFunctions(profile *pgoir.Profile)</code></pre>
         </article>
         
         <article class="function" data-name="dumpasmhdr">
            <h2>dumpasmhdr</h2>
            <hr />
            
            <pre><code>func dumpasmhdr()</code></pre>
         </article>
         
         <article class="function" data-name="handlePanic">
            <h2>handlePanic</h2>
            <hr />
            
            <p>handlePanic ensures that we print out an "internal compiler error" for any panic
or runtime exception during front-end compiler processing (unless there have
already been some compiler errors). It may also be invoked from the explicit panic in
hcrash(), in which case, we pass the panic on through.</p>
            
            <pre><code>func handlePanic()</code></pre>
         </article>
         
         <article class="function" data-name="Main">
            <h2>Main</h2>
            <hr />
            
            <p>Main parses flags and Go source files specified in the command-line
arguments, type-checks the parsed Go package, compiles functions to machine
code, and finally writes the compiled package definition to disk.</p>
            
            <pre><code>func Main(archInit func)</code></pre>
         </article>
         
         <article class="function" data-name="writebench">
            <h2>writebench</h2>
            <hr />
            
            <pre><code>func writebench(filename string) error</code></pre>
         </article>
         
         <article class="function" data-name="makePos">
            <h2>makePos</h2>
            <hr />
            
            <pre><code>func makePos(b *src.PosBase, line uint, col uint) src.XPos</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
