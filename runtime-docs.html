<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - main</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
          
         <a href="runtime_asan-docs.html">asan</a>
         <br />
         
         <a href="runtime_cgo-docs.html">cgo</a>
         <br />
         
         <a href="runtime_coverage-docs.html">coverage</a>
         <br />
         
         <a href="runtime_debug-docs.html">debug</a>
         <br />
         
         <a href="runtime_metrics-docs.html">metrics</a>
         <br />
         
         <a href="runtime_msan-docs.html">msan</a>
         <br />
         
         <a href="runtime_pprof-docs.html">pprof</a>
         <br />
         
         <a href="runtime_race-docs.html">race</a>
         <br />
         
         <a href="runtime_trace-docs.html">trace</a>
         <br />
          
      </aside>
      <main>
         <h1>
            Package
            <code>main</code>
         </h1>
         <hr />
         
         <article class="global" data-name="regNames386">
            <h2>regNames386</h2>
            <hr />
            
            <pre><code>regNames386</code></pre>
         </article>
         
         <article class="global" data-name="regNamesAMD64">
            <h2>regNamesAMD64</h2>
            <hr />
            
            <pre><code>regNamesAMD64</code></pre>
         </article>
         
         <article class="global" data-name="out">
            <h2>out</h2>
            <hr />
            
            <pre><code>out io.Writer</code></pre>
         </article>
         
         <article class="global" data-name="arches">
            <h2>arches</h2>
            <hr />
            
            <pre><code>arches</code></pre>
         </article>
         
         <article class="global" data-name="beLe">
            <h2>beLe</h2>
            <hr />
            
            <pre><code>beLe</code></pre>
         </article>
         
         <article class="global" data-name="stdout">
            <h2>stdout</h2>
            <hr />
            
            <pre><code>stdout</code></pre>
         </article>
         
         <article class="global" data-name="minHeapAlign">
            <h2>minHeapAlign</h2>
            <hr />
            
            <p>Constants that we use and will transfer to the runtime.</p>
            
            <pre><code>minHeapAlign</code></pre>
         </article>
         
         <article class="global" data-name="maxSmallSize">
            <h2>maxSmallSize</h2>
            <hr />
            
            <pre><code>maxSmallSize</code></pre>
         </article>
         
         <article class="global" data-name="smallSizeDiv">
            <h2>smallSizeDiv</h2>
            <hr />
            
            <pre><code>smallSizeDiv</code></pre>
         </article>
         
         <article class="global" data-name="smallSizeMax">
            <h2>smallSizeMax</h2>
            <hr />
            
            <pre><code>smallSizeMax</code></pre>
         </article>
         
         <article class="global" data-name="largeSizeDiv">
            <h2>largeSizeDiv</h2>
            <hr />
            
            <pre><code>largeSizeDiv</code></pre>
         </article>
         
         <article class="global" data-name="pageShift">
            <h2>pageShift</h2>
            <hr />
            
            <pre><code>pageShift</code></pre>
         </article>
         
         <article class="global" data-name="pageSize">
            <h2>pageSize</h2>
            <hr />
            
            <p>Derived constants.</p>
            
            <pre><code>pageSize</code></pre>
         </article>
         
         <article class="global" data-name="maxCallback">
            <h2>maxCallback</h2>
            <hr />
            
            <pre><code>maxCallback</code></pre>
         </article>
         
         <article class="global" data-name="fastlogNumBits">
            <h2>fastlogNumBits</h2>
            <hr />
            
            <pre><code>fastlogNumBits</code></pre>
         </article>
         
         <article class="global" data-name="ranks">
            <h2>ranks</h2>
            <hr />
            
            <p>ranks describes the lock rank graph. See "go doc internal/dag" for
the syntax.

"a < b" means a must be acquired before b if both are held
(or, if b is held, a cannot be acquired).

"NONE < a" means no locks may be held when a is acquired.

If a lock is not given a rank, then it is assumed to be a leaf
lock, which means no other lock can be acquired while it is held.
Therefore, leaf locks do not need to be given an explicit rank.

Ranks in all caps are pseudo-nodes that help define order, but do
not actually define a rank.

TODO: It's often hard to correlate rank names to locks. Change
these to be more consistent with the locks they label.</p>
            
            <pre><code>ranks</code></pre>
         </article>
         
         <article class="global" data-name="cyclicRanks">
            <h2>cyclicRanks</h2>
            <hr />
            
            <p>cyclicRanks lists lock ranks that allow multiple locks of the same
rank to be acquired simultaneously. The runtime enforces ordering
within these ranks using a separate mechanism.</p>
            
            <pre><code>cyclicRanks</code></pre>
         </article>
          
         <article class="struct" data-name="layout">
            <h2>type layout struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">stack int
regs []regPos
sp string</code></pre>
         </article>
         
         <article class="struct" data-name="regPos">
            <h2>type regPos struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">pos int
saveOp string
restoreOp string
reg string
save string
restore string</code></pre>
         </article>
         
         <article class="struct" data-name="class">
            <h2>type class struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">size int
npages int</code></pre>
         </article>
          
         <article class="function" data-name="main">
            <h2>main</h2>
            <hr />
            
            <pre><code>func main()</code></pre>
         </article>
         
         <article class="function" data-name="header">
            <h2>header</h2>
            <hr />
            
            <pre><code>func header(arch string)</code></pre>
         </article>
         
         <article class="function" data-name="p">
            <h2>p</h2>
            <hr />
            
            <pre><code>func p(f string, args ...any)</code></pre>
         </article>
         
         <article class="function" data-name="label">
            <h2>label</h2>
            <hr />
            
            <pre><code>func label(l string)</code></pre>
         </article>
         
         <article class="function" data-name="add">
            <h2>add</h2>
            <hr />
            
            <pre><code>func add(op string, reg string, size int)</code></pre>
         </article>
         
         <article class="function" data-name="add2">
            <h2>add2</h2>
            <hr />
            
            <pre><code>func add2(sop string, rop string, reg string, size int)</code></pre>
         </article>
         
         <article class="function" data-name="addSpecial">
            <h2>addSpecial</h2>
            <hr />
            
            <pre><code>func addSpecial(save string, restore string, size int)</code></pre>
         </article>
         
         <article class="function" data-name="save">
            <h2>save</h2>
            <hr />
            
            <pre><code>func save()</code></pre>
         </article>
         
         <article class="function" data-name="restore">
            <h2>restore</h2>
            <hr />
            
            <pre><code>func restore()</code></pre>
         </article>
         
         <article class="function" data-name="gen386">
            <h2>gen386</h2>
            <hr />
            
            <pre><code>func gen386()</code></pre>
         </article>
         
         <article class="function" data-name="genAMD64">
            <h2>genAMD64</h2>
            <hr />
            
            <pre><code>func genAMD64()</code></pre>
         </article>
         
         <article class="function" data-name="genARM">
            <h2>genARM</h2>
            <hr />
            
            <pre><code>func genARM()</code></pre>
         </article>
         
         <article class="function" data-name="genARM64">
            <h2>genARM64</h2>
            <hr />
            
            <pre><code>func genARM64()</code></pre>
         </article>
         
         <article class="function" data-name="genMIPS">
            <h2>genMIPS</h2>
            <hr />
            
            <pre><code>func genMIPS(_64bit bool)</code></pre>
         </article>
         
         <article class="function" data-name="genLoong64">
            <h2>genLoong64</h2>
            <hr />
            
            <pre><code>func genLoong64()</code></pre>
         </article>
         
         <article class="function" data-name="genPPC64">
            <h2>genPPC64</h2>
            <hr />
            
            <pre><code>func genPPC64()</code></pre>
         </article>
         
         <article class="function" data-name="genRISCV64">
            <h2>genRISCV64</h2>
            <hr />
            
            <pre><code>func genRISCV64()</code></pre>
         </article>
         
         <article class="function" data-name="genS390X">
            <h2>genS390X</h2>
            <hr />
            
            <pre><code>func genS390X()</code></pre>
         </article>
         
         <article class="function" data-name="genWasm">
            <h2>genWasm</h2>
            <hr />
            
            <pre><code>func genWasm()</code></pre>
         </article>
         
         <article class="function" data-name="notImplemented">
            <h2>notImplemented</h2>
            <hr />
            
            <pre><code>func notImplemented()</code></pre>
         </article>
         
         <article class="function" data-name="main">
            <h2>main</h2>
            <hr />
            
            <pre><code>func main()</code></pre>
         </article>
         
         <article class="function" data-name="powerOfTwo">
            <h2>powerOfTwo</h2>
            <hr />
            
            <pre><code>func powerOfTwo(x int) bool</code></pre>
         </article>
         
         <article class="function" data-name="makeClasses">
            <h2>makeClasses</h2>
            <hr />
            
            <pre><code>func makeClasses() []class</code></pre>
         </article>
         
         <article class="function" data-name="computeDivMagic">
            <h2>computeDivMagic</h2>
            <hr />
            
            <p>computeDivMagic checks that the division required to compute object
index from span offset can be computed using 32-bit multiplication.
n / c.size is implemented as (n * (^uint32(0)/uint32(c.size) + 1)) >> 32
for all 0 <= n <= c.npages * pageSize</p>
            
            <pre><code>func computeDivMagic(c *class)</code></pre>
         </article>
         
         <article class="function" data-name="printComment">
            <h2>printComment</h2>
            <hr />
            
            <pre><code>func printComment(w io.Writer, classes []class)</code></pre>
         </article>
         
         <article class="function" data-name="maxObjsPerSpan">
            <h2>maxObjsPerSpan</h2>
            <hr />
            
            <pre><code>func maxObjsPerSpan(classes []class) int</code></pre>
         </article>
         
         <article class="function" data-name="printClasses">
            <h2>printClasses</h2>
            <hr />
            
            <pre><code>func printClasses(w io.Writer, classes []class)</code></pre>
         </article>
         
         <article class="function" data-name="genasm386Amd64">
            <h2>genasm386Amd64</h2>
            <hr />
            
            <pre><code>func genasm386Amd64()</code></pre>
         </article>
         
         <article class="function" data-name="genasmArm">
            <h2>genasmArm</h2>
            <hr />
            
            <pre><code>func genasmArm()</code></pre>
         </article>
         
         <article class="function" data-name="genasmArm64">
            <h2>genasmArm64</h2>
            <hr />
            
            <pre><code>func genasmArm64()</code></pre>
         </article>
         
         <article class="function" data-name="gengo">
            <h2>gengo</h2>
            <hr />
            
            <pre><code>func gengo()</code></pre>
         </article>
         
         <article class="function" data-name="main">
            <h2>main</h2>
            <hr />
            
            <pre><code>func main()</code></pre>
         </article>
         
         <article class="function" data-name="main">
            <h2>main</h2>
            <hr />
            
            <pre><code>func main()</code></pre>
         </article>
         
         <article class="function" data-name="gen">
            <h2>gen</h2>
            <hr />
            
            <pre><code>func gen(arch string, tags func, zero func, copy func)</code></pre>
         </article>
         
         <article class="function" data-name="notags">
            <h2>notags</h2>
            <hr />
            
            <pre><code>func notags(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="zeroAMD64">
            <h2>zeroAMD64</h2>
            <hr />
            
            <pre><code>func zeroAMD64(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="copyAMD64">
            <h2>copyAMD64</h2>
            <hr />
            
            <pre><code>func copyAMD64(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="zero386">
            <h2>zero386</h2>
            <hr />
            
            <pre><code>func zero386(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="copy386">
            <h2>copy386</h2>
            <hr />
            
            <pre><code>func copy386(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="zeroARM">
            <h2>zeroARM</h2>
            <hr />
            
            <pre><code>func zeroARM(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="copyARM">
            <h2>copyARM</h2>
            <hr />
            
            <pre><code>func copyARM(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="zeroARM64">
            <h2>zeroARM64</h2>
            <hr />
            
            <pre><code>func zeroARM64(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="copyARM64">
            <h2>copyARM64</h2>
            <hr />
            
            <pre><code>func copyARM64(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="zeroLOONG64">
            <h2>zeroLOONG64</h2>
            <hr />
            
            <pre><code>func zeroLOONG64(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="copyLOONG64">
            <h2>copyLOONG64</h2>
            <hr />
            
            <pre><code>func copyLOONG64(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="tagsPPC64x">
            <h2>tagsPPC64x</h2>
            <hr />
            
            <pre><code>func tagsPPC64x(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="zeroPPC64x">
            <h2>zeroPPC64x</h2>
            <hr />
            
            <pre><code>func zeroPPC64x(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="copyPPC64x">
            <h2>copyPPC64x</h2>
            <hr />
            
            <pre><code>func copyPPC64x(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="tagsMIPS64x">
            <h2>tagsMIPS64x</h2>
            <hr />
            
            <pre><code>func tagsMIPS64x(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="zeroMIPS64x">
            <h2>zeroMIPS64x</h2>
            <hr />
            
            <pre><code>func zeroMIPS64x(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="copyMIPS64x">
            <h2>copyMIPS64x</h2>
            <hr />
            
            <pre><code>func copyMIPS64x(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="zeroRISCV64">
            <h2>zeroRISCV64</h2>
            <hr />
            
            <pre><code>func zeroRISCV64(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="copyRISCV64">
            <h2>copyRISCV64</h2>
            <hr />
            
            <pre><code>func copyRISCV64(w io.Writer)</code></pre>
         </article>
         
         <article class="function" data-name="main">
            <h2>main</h2>
            <hr />
            
            <pre><code>func main()</code></pre>
         </article>
         
         <article class="function" data-name="computeTable">
            <h2>computeTable</h2>
            <hr />
            
            <pre><code>func computeTable() []float64</code></pre>
         </article>
         
         <article class="function" data-name="log2">
            <h2>log2</h2>
            <hr />
            
            <p>log2 is a local copy of math.Log2 with an explicit float64 conversion
to disable FMA. This lets us generate the same output on all platforms.</p>
            
            <pre><code>func log2(x float64) float64</code></pre>
         </article>
         
         <article class="function" data-name="nlog">
            <h2>nlog</h2>
            <hr />
            
            <p>nlog is a local copy of math.Log with explicit float64 conversions
to disable FMA. This lets us generate the same output on all platforms.</p>
            
            <pre><code>func nlog(x float64) float64</code></pre>
         </article>
         
         <article class="function" data-name="main">
            <h2>main</h2>
            <hr />
            
            <pre><code>func main()</code></pre>
         </article>
         
         <article class="function" data-name="generateGo">
            <h2>generateGo</h2>
            <hr />
            
            <pre><code>func generateGo(w io.Writer, g *dag.Graph)</code></pre>
         </article>
         
         <article class="function" data-name="cname">
            <h2>cname</h2>
            <hr />
            
            <p>cname returns the Go const name for the given lock rank label.</p>
            
            <pre><code>func cname(label string) string</code></pre>
         </article>
         
         <article class="function" data-name="isPseudo">
            <h2>isPseudo</h2>
            <hr />
            
            <pre><code>func isPseudo(label string) bool</code></pre>
         </article>
         
         <article class="function" data-name="generateDot">
            <h2>generateDot</h2>
            <hr />
            
            <p>generateDot emits a Graphviz dot representation of g to w.</p>
            
            <pre><code>func generateDot(w io.Writer, g *dag.Graph)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
