<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - scripttest</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 14px;
            scroll-behavior: smooth;
         }

         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
            line-height: 1.6;
         }

         .sidebar {
            width: 12%;
            background: rgba(59, 56, 56, 0.15);
            padding: 1.5rem;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.4);
            overflow-y: auto;
            position: sticky;
            top: 0;
            height: 100vh;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
         }

         .sidebar::-webkit-scrollbar {
            width: 6px;
         }

         .sidebar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
         }

         .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
         }

         main {
            flex: 1;
            padding: 2rem;
            margin: 0;
            max-width: calc(100% - 280px);
            background: linear-gradient(
               135deg,
               rgba(59, 56, 56, 0.05) 0%,
               rgba(0, 0, 0, 0.1) 100%
            );
         }

         .nav-links {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
         }

         .nav-links a {
            color: #ddd;
            text-decoration: none;
            padding: 0.5rem;
            border-radius: 4px;
            transition: all 0.2s ease;
         }

         .nav-links a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
         }

         h1 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #fff 0%, #ddd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
         }

         h2 {
            font-size: 1.4rem;
            margin: 1rem 0 0.5rem;
            color: #f0f0f0;
         }

         h3 {
            font-size: 1.2rem;
            margin: 0.8rem 0 0.3rem;
            color: #e0e0e0;
            position: relative;
         }

         .sidebar h2,
         .sidebar h3 {
            font-size: 1rem;
            margin: 0.5rem 0 0.3rem;
            color: #ccc;
         }

         /* Anchor link styling */
         .anchor {
            color: rgba(255, 255, 255, 0.3);
            text-decoration: none;
            font-weight: normal;
            margin-left: 0.5rem;
            opacity: 0;
            transition: opacity 0.2s ease;
            font-size: 0.8em;
         }

         h3:hover .anchor,
         .anchor:focus {
            opacity: 1;
         }

         .anchor:hover {
            color: rgba(255, 255, 255, 0.6);
         }

         /* Scroll target offset for fixed elements */
         .symbol-anchor {
            scroll-margin-top: 2rem;
         }

         pre {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e6e6e6;
            padding: 1rem 1.2rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.9rem;
            overflow-x: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
         }

         code {
            color: #f5f5f5;
            font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
            white-space: pre-wrap;
         }

         p {
            font-size: 15px;
            margin: 1rem 0;
            color: #ddd;
         }

         article {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(59, 56, 56, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
         }

         article:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
         }

         article:target {
            border-color: rgba(100, 200, 255, 0.5);
            box-shadow: 0 0 0 2px rgba(100, 200, 255, 0.2);
         }

         .hidden {
            display: none !important;
         }

         .filter-section {
            margin-bottom: 1.5rem;
         }

         .filter-section h3 {
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #aaa;
         }

         .filter-toggle label {
            display: flex;
            align-items: center;
            margin-bottom: 0.6rem;
            font-size: 0.85rem;
            color: #bbb;
            cursor: pointer;
            padding: 0.3rem;
            border-radius: 4px;
            transition: background 0.2s ease;
         }

         .filter-toggle label:hover {
            background: rgba(255, 255, 255, 0.05);
         }

         .filter-toggle input {
            margin-right: 0.6rem;
         }

         .field-line,
         .method-line {
            display: block;
         }

         #searchInput {
            width: 100%;
            margin-bottom: 1.5rem;
            border-radius: 8px !important;
            height: 2.8rem;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 0 1rem;
         }

         #searchInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
         }

         #searchInput:focus {
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
         }

         .section-divider {
            height: 1px;
            background: linear-gradient(
               90deg,
               transparent 0%,
               rgba(255, 255, 255, 0.3) 50%,
               transparent 100%
            );
            margin: 1.5rem 0;
         }

         .subpackage-list {
            list-style: none;
            padding: 0;
         }

         .subpackage-list li {
            margin-bottom: 0.4rem;
         }

         .subpackage-list a {
            display: block;
            padding: 0.5rem 0.8rem;
            color: #ccc;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.85rem;
         }

         .subpackage-list a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            transform: translateX(4px);
         }

         .empty-state {
            color: rgba(177, 175, 175, 0.6);
            font-style: italic;
            font-size: 0.8rem;
         }

         .badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            color: #ddd;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
            margin-left: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .method-badge {
            background: rgba(100, 200, 255, 0.2);
            color: #87ceeb;
         }

         .const-badge {
            background: rgba(255, 200, 100, 0.2);
            color: #ffd700;
         }

         .var-badge {
            background: rgba(200, 255, 100, 0.2);
            color: #90ee90;
         }

         .type-badge {
            background: rgba(255, 100, 200, 0.2);
            color: #699eff;
         }

         .interface-badge {
            background: rgba(150, 100, 255, 0.2);
            color: #dda0dd;
         }

         .toc {
            position: sticky;
            top: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
         }

         .toc h4 {
            margin: 0 0 0.8rem;
            font-size: 0.9rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
         }

         .toc li {
            margin-bottom: 0.3rem;
         }

         .toc a {
            color: #bbb;
            text-decoration: none;
            font-size: 0.8rem;
            transition: color 0.2s ease;
         }

         .toc a:hover {
            color: #fff;
         }

         .symbol-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.2);
         }

         .symbol-list::-webkit-scrollbar {
            width: 4px;
         }

         .symbol-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
         }

         .symbol-list ul {
            list-style: none;
            padding: 0.5rem;
            margin: 0;
         }

         .symbol-list li {
            margin-bottom: 0.2rem;
         }

         .symbol-list a {
            display: block;
            padding: 0.3rem 0.5rem;
            color: #bbb;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-size: 0.75rem;
         }

         .symbol-list a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
         }

         @media (max-width: 768px) {
            body {
               flex-direction: column;
            }

            .sidebar {
               width: 90%;
               height: auto;
               position: relative;
            }

            main {
               max-width: 100%;
               padding: 1rem;
            }
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <div class="nav-links">
            <a href="index.html" title="Home">⌂</a>
            <span>|</span>
            <a href="#" onclick="history.back()" title="Back">←</a>
         </div>

         <div class="filter-section">
            <h3>Search</h3>
            <input
               type="search"
               id="searchInput"
               placeholder="Search symbols..."
            />
         </div>

         <div class="filter-section">
            <h3>Filters</h3>
            <div class="filter-toggle">
               <label>
                  <input type="checkbox" id="showImports" />
                  Show imports
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFunctions" />
                  Show private functions
               </label>
               <label>
                  <input type="checkbox" id="showPrivateStructs" />
                  Show private structs
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFields" />
                  Show private fields
               </label>
               <label>
                  <input type="checkbox" id="showPrivateGlobals" />
                  Show private globals
               </label>
               <label>
                  <input type="checkbox" id="showPrivateTypes" />
                  Show private types
               </label>
               <label>
                  <input type="checkbox" id="showPrivateInterfaces" />
                  Show private interfaces
               </label>
            </div>
         </div>

         <div class="section-divider"></div>

         <div class="filter-section">
            <h3>Subpackages</h3>
            
            <div class="empty-state">No subpackages</div>
            
         </div>

         
         <div class="section-divider"></div>

         <div class="toc">
            <h4>Quick Navigation</h4>
            <ul>
               
               <li><a href="#globals">Constants & Variables</a></li>
                  
               <li><a href="#structs">Structs</a></li>
                
               <li><a href="#functions">Functions</a></li>
               
            </ul>
         </div>

         <div class="filter-section">
            <h3>All Symbols</h3>
            <div class="symbol-list">
               <ul id="symbolIndex">
               </ul>
            </div>
         </div>
         
      </aside>

      <main>
         <h1>scripttest</h1>
         <div class="section-divider"></div>

         
         <section id="imports">
            <h2>Imports</h2>
            <article class="imports symbol-anchor" id="imports-section" data-name="imports">
               <h3>
                  Imports
                  <a href="#imports-section" class="anchor" title="Link to imports">#</a>
               </h3>
               <pre><code>"bytes"
"cmd/internal/script"
"internal/diff"
"internal/testenv"
"os"
"path/filepath"
"strings"
"testing"
"text/template"
"bytes"
"cmd/internal/script"
"context"
"fmt"
"internal/testenv"
"internal/txtar"
"os"
"os/exec"
"path/filepath"
"runtime"
"strings"
"testing"
"time"
"bufio"
"cmd/internal/pathcache"
"cmd/internal/script"
"errors"
"io"
"strings"
"testing"
"io"
"os"
"path/filepath"
"runtime"
"testing"
"cmd/internal/script"
"fmt"
"internal/buildcfg"
"internal/platform"
"internal/testenv"
"runtime"
"strings"
"testing"
</code></pre>
            </article>
         </section>
          
         <section id="globals">
            <h2>Constants & Variables</h2>
            
            <article class="global symbol-anchor" id="readmeTmpl" data-name="readmeTmpl">
               <h3>
                  readmeTmpl 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#readmeTmpl" class="anchor" title="Link to readmeTmpl">#</a>
               </h3>
               
               <pre><code>const readmeTmpl = `
This file is generated by 'go generate'. DO NOT EDIT.

This directory holds test scripts *.txt run during 'go test cmd/<toolname>'.
To run a specific script foo.txt

	go test cmd/<toolname> -run=Script/^foo$

In general script files should have short names: a few words,
 not whole sentences.
The first word should be the general category of behavior being tested,
often the name of a go subcommand (build, link, compile, ...) or concept (vendor, pattern).

Each script is a text archive (go doc internal/txtar).
The script begins with an actual command script to run
followed by the content of zero or more supporting files to
create in the script's temporary file system before it starts executing.

As an example, run_hello.txt says:

	# hello world
	go run hello.go
	stderr 'hello world'
	! stdout .

	-- hello.go --
	package main
	func main() { println("hello world") }

Each script runs in a fresh temporary work directory tree, available to scripts as $WORK.
Scripts also have access to other environment variables, including:

	GOARCH=<target GOARCH>
	GOOS=<target GOOS>
	TMPDIR=$WORK/tmp
	devnull=<value of os.DevNull>
	goversion=<current Go version; for example, 1.12>

On Plan 9, the variables $path and $home are set instead of $PATH and $HOME.
On Windows, the variables $USERPROFILE and $TMP are set instead of
$HOME and $TMPDIR.

The lines at the top of the script are a sequence of commands to be executed by
a small script engine configured in .../cmd/internal/script/scripttest/run.go (not the system shell).

{{.Language}}

When TestScript runs a script and the script fails, by default TestScript shows
the execution of the most recent phase of the script (since the last # comment)
and only shows the # comments for earlier phases.

Note also that in reported output, the actual name of the per-script temporary directory
has been consistently replaced with the literal string $WORK.

The available commands are:
{{.Commands}}

The available conditions are:
{{.Conditions}}
`</code></pre>
            </article>
            
         </section>
            
         <section id="structs">
            <h2>Structs</h2>
            
            <article class="struct symbol-anchor" id="ToolReplacement" data-name="ToolReplacement">
               <h3>
                  ToolReplacement
                  <span class="badge">struct</span>
                  <a href="#ToolReplacement" class="anchor" title="Link to ToolReplacement">#</a>
               </h3>
               
               <p>ToolReplacement records the name of a tool to replace
within a given GOROOT for script testing purposes.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type ToolReplacement struct {
ToolName string
ReplacementPath string
EnvVar string
}</code></pre>
            </article>
            
            <article class="struct symbol-anchor" id="skipError" data-name="skipError">
               <h3>
                  skipError
                  <span class="badge">struct</span>
                  <a href="#skipError" class="anchor" title="Link to skipError">#</a>
               </h3>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type skipError struct {
msg string
}</code></pre>
            </article>
            
         </section>
          
         <section id="functions">
            <h2>Functions</h2>
            
            <article class="function symbol-anchor" id="AddToolChainScriptConditions" data-name="AddToolChainScriptConditions">
               <h3>
                  AddToolChainScriptConditions 
                  <span class="badge">function</span>
                  
                  <a href="#AddToolChainScriptConditions" class="anchor" title="Link to AddToolChainScriptConditions">#</a>
               </h3>
               
               <p>AddToolChainScriptConditions accepts a [script.Cond] map and adds into it a
set of commonly used conditions for doing toolchains testing,
including whether the platform supports cgo, a buildmode condition,
support for GOEXPERIMENT testing, etc. Callers must also pass in
current GOHOSTOOS/GOHOSTARCH settings, since some of the conditions
introduced can be influenced by them.</p>
               
               <pre><code>func AddToolChainScriptConditions(t *testing.T, conds map[string]script.Cond, goHostOS string, goHostArch string)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="CachedExec" data-name="CachedExec">
               <h3>
                  CachedExec 
                  <span class="badge">function</span>
                  
                  <a href="#CachedExec" class="anchor" title="Link to CachedExec">#</a>
               </h3>
               
               <p>CachedExec returns a Condition that reports whether the PATH of the test
binary itself (not the script's current environment) contains the named
executable.</p>
               
               <pre><code>func CachedExec() script.Cond</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="DefaultCmds" data-name="DefaultCmds">
               <h3>
                  DefaultCmds 
                  <span class="badge">function</span>
                  
                  <a href="#DefaultCmds" class="anchor" title="Link to DefaultCmds">#</a>
               </h3>
               
               <p>DefaultCmds returns a set of broadly useful script commands.
This set includes all of the commands in script.DefaultCmds,
as well as a "skip" command that halts the script and causes the
testing.TB passed to Run to be skipped.</p>
               
               <pre><code>func DefaultCmds() map[string]script.Cmd</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="DefaultConds" data-name="DefaultConds">
               <h3>
                  DefaultConds 
                  <span class="badge">function</span>
                  
                  <a href="#DefaultConds" class="anchor" title="Link to DefaultConds">#</a>
               </h3>
               
               <p>DefaultConds returns a set of broadly useful script conditions.
This set includes all of the conditions in script.DefaultConds,
as well as:
- Conditions of the form "exec:foo" are active when the executable "foo" is
found in the test process's PATH, and inactive when the executable is
not found.
- "short" is active when testing.Short() is true.
- "verbose" is active when testing.Verbose() is true.</p>
               
               <pre><code>func DefaultConds() map[string]script.Cond</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Error" data-name="Error">
               <h3>
                  Error 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Error" class="anchor" title="Link to Error">#</a>
               </h3>
               
               <pre><code>func (s skipError) Error() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="ReplaceGoToolInTestGoRoot" data-name="ReplaceGoToolInTestGoRoot">
               <h3>
                  ReplaceGoToolInTestGoRoot 
                  <span class="badge">function</span>
                  
                  <a href="#ReplaceGoToolInTestGoRoot" class="anchor" title="Link to ReplaceGoToolInTestGoRoot">#</a>
               </h3>
               
               <p>ReplaceGoToolInTestGoRoot replaces the go tool binary toolname with
an alternate executable newtoolpath within a test GOROOT directory
previously created by SetupTestGoRoot.</p>
               
               <pre><code>func ReplaceGoToolInTestGoRoot(t *testing.T, testgoroot string, toolname string, newtoolpath string)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Run" data-name="Run">
               <h3>
                  Run 
                  <span class="badge">function</span>
                  
                  <a href="#Run" class="anchor" title="Link to Run">#</a>
               </h3>
               
               <p>Run runs the script from the given filename starting at the given initial state.
When the script completes, Run closes the state.</p>
               
               <pre><code>func Run(t testing.TB, e *script.Engine, s *script.State, filename string, testScript io.Reader)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="RunTests" data-name="RunTests">
               <h3>
                  RunTests 
                  <span class="badge">function</span>
                  
                  <a href="#RunTests" class="anchor" title="Link to RunTests">#</a>
               </h3>
               
               <p>RunTests kicks off one or more script-based tests using the
specified engine, running all test files that match pattern.
This function adapted from Russ's rsc.io/script/scripttest#Run
function, which was in turn forked off cmd/go's runner.</p>
               
               <pre><code>func RunTests(t *testing.T, ctx context.Context, engine *script.Engine, env []string, pattern string)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="RunToolScriptTest" data-name="RunToolScriptTest">
               <h3>
                  RunToolScriptTest 
                  <span class="badge">function</span>
                  
                  <a href="#RunToolScriptTest" class="anchor" title="Link to RunToolScriptTest">#</a>
               </h3>
               
               <p>RunToolScriptTest kicks off a set of script tests runs for
a tool of some sort (compiler, linker, etc). The expectation
is that we'll be called from the top level cmd/X dir for tool X,
and that instead of executing the install tool X we'll use the
test binary instead.</p>
               
               <pre><code>func RunToolScriptTest(t *testing.T, repls []ToolReplacement, scriptsdir string, fixReadme bool)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="SetupTestGoRoot" data-name="SetupTestGoRoot">
               <h3>
                  SetupTestGoRoot 
                  <span class="badge">function</span>
                  
                  <a href="#SetupTestGoRoot" class="anchor" title="Link to SetupTestGoRoot">#</a>
               </h3>
               
               <p>SetupTestGoRoot sets up a temporary GOROOT for use with script test
execution. It copies the existing goroot bin and pkg dirs using
symlinks (if possible) or raw copying. Return value is the path to
the newly created testgoroot dir.</p>
               
               <pre><code>func SetupTestGoRoot(t *testing.T, tmpdir string, goroot string) string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Skip" data-name="Skip">
               <h3>
                  Skip 
                  <span class="badge">function</span>
                  
                  <a href="#Skip" class="anchor" title="Link to Skip">#</a>
               </h3>
               
               <p>Skip returns a sentinel error that causes Run to mark the test as skipped.</p>
               
               <pre><code>func Skip() script.Cmd</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="cgoLinkExt" data-name="cgoLinkExt">
               <h3>
                  cgoLinkExt 
                  <span class="badge">function</span>
                  
                  <a href="#cgoLinkExt" class="anchor" title="Link to cgoLinkExt">#</a>
               </h3>
               
               <pre><code>func cgoLinkExt(s *script.State) (bool, error)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="checkScriptReadme" data-name="checkScriptReadme">
               <h3>
                  checkScriptReadme 
                  <span class="badge">function</span>
                  
                  <a href="#checkScriptReadme" class="anchor" title="Link to checkScriptReadme">#</a>
               </h3>
               
               <pre><code>func checkScriptReadme(t *testing.T, engine *script.Engine, env []string, scriptspath string, gotool string, fixReadme bool)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="hasBuildmode" data-name="hasBuildmode">
               <h3>
                  hasBuildmode 
                  <span class="badge">function</span>
                  
                  <a href="#hasBuildmode" class="anchor" title="Link to hasBuildmode">#</a>
               </h3>
               
               <pre><code>func hasBuildmode(s *script.State, mode string) (bool, error)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="hasGodebug" data-name="hasGodebug">
               <h3>
                  hasGodebug 
                  <span class="badge">function</span>
                  
                  <a href="#hasGodebug" class="anchor" title="Link to hasGodebug">#</a>
               </h3>
               
               <pre><code>func hasGodebug(s *script.State, value string) (bool, error)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="hasGoexperiment" data-name="hasGoexperiment">
               <h3>
                  hasGoexperiment 
                  <span class="badge">function</span>
                  
                  <a href="#hasGoexperiment" class="anchor" title="Link to hasGoexperiment">#</a>
               </h3>
               
               <pre><code>func hasGoexperiment(s *script.State, value string) (bool, error)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="initScriptDirs" data-name="initScriptDirs">
               <h3>
                  initScriptDirs 
                  <span class="badge">function</span>
                  
                  <a href="#initScriptDirs" class="anchor" title="Link to initScriptDirs">#</a>
               </h3>
               
               <pre><code>func initScriptDirs(t testing.TB, s *script.State)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="linkOrCopy" data-name="linkOrCopy">
               <h3>
                  linkOrCopy 
                  <span class="badge">function</span>
                  
                  <a href="#linkOrCopy" class="anchor" title="Link to linkOrCopy">#</a>
               </h3>
               
               <p>linkOrCopy creates a link to src at dst, or if the symlink fails
(platform doesn't support) then copies src to dst.</p>
               
               <pre><code>func linkOrCopy(t *testing.T, src string, dst string)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="mustLinkExt" data-name="mustLinkExt">
               <h3>
                  mustLinkExt 
                  <span class="badge">function</span>
                  
                  <a href="#mustLinkExt" class="anchor" title="Link to mustLinkExt">#</a>
               </h3>
               
               <pre><code>func mustLinkExt(s *script.State) (bool, error)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="pieLinkExt" data-name="pieLinkExt">
               <h3>
                  pieLinkExt 
                  <span class="badge">function</span>
                  
                  <a href="#pieLinkExt" class="anchor" title="Link to pieLinkExt">#</a>
               </h3>
               
               <pre><code>func pieLinkExt(s *script.State) (bool, error)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="scriptCC" data-name="scriptCC">
               <h3>
                  scriptCC 
                  <span class="badge">function</span>
                  
                  <a href="#scriptCC" class="anchor" title="Link to scriptCC">#</a>
               </h3>
               
               <p>scriptCC runs the platform C compiler.</p>
               
               <pre><code>func scriptCC(cmdExec script.Cmd, ccexe string) script.Cmd</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="sysCondition" data-name="sysCondition">
               <h3>
                  sysCondition 
                  <span class="badge">function</span>
                  
                  <a href="#sysCondition" class="anchor" title="Link to sysCondition">#</a>
               </h3>
               
               <pre><code>func sysCondition(flag string, f func(goos string, goarch string) bool, needsCgo bool, goHostOS string, goHostArch string) script.Cond</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="tempEnvName" data-name="tempEnvName">
               <h3>
                  tempEnvName 
                  <span class="badge">function</span>
                  
                  <a href="#tempEnvName" class="anchor" title="Link to tempEnvName">#</a>
               </h3>
               
               <pre><code>func tempEnvName() string</code></pre>
            </article>
            
         </section>
         
      </main>

      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }

         function buildSymbolIndex() {
            const symbolIndex = document.getElementById('symbolIndex');
            if (!symbolIndex) return;

            const symbols = [];
            
            document.querySelectorAll('article[data-name]').forEach(article => {
               const name = article.dataset.name;
               const type = article.className.split(' ')[0]; 
               const isPrivateSymbol = isPrivate(name);
               
               if (name && name !== 'imports') {
                  symbols.push({
                     name,
                     type,
                     element: article,
                     isPrivate: isPrivateSymbol
                  });
               }
            });

            symbols.sort((a, b) => a.name.localeCompare(b.name));
            symbolIndex.innerHTML = '';
            symbols.forEach(symbol => {
               const li = document.createElement('li');
               const a = document.createElement('a');
               a.href = `#${symbol.name}`;
               a.textContent = symbol.name;
               a.title = `${symbol.type}: ${symbol.name}`;
               
               if (symbol.isPrivate) {
                  li.classList.add('private', 'hidden');
               }
               
               li.appendChild(a);
               symbolIndex.appendChild(li);
            });
         }

         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               imports: document.getElementById("showImports"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
               types: document.getElementById("showPrivateTypes"),
               interfaces: document.getElementById(
                  "showPrivateInterfaces"
               ),
            };

            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });

               if (toggle) {
                  toggle.addEventListener("change", () => {
                     const show = toggle.checked;
                     document
                        .querySelectorAll(`${selector}.private`)
                        .forEach((el) => {
                           el.classList.toggle("hidden", !show);
                        });
                     
                     const symbolIndexItems = document.querySelectorAll('#symbolIndex li.private');
                     symbolIndexItems.forEach(li => {
                        const link = li.querySelector('a');
                        if (link) {
                           const targetId = link.getAttribute('href').substring(1);
                           const targetEl = document.getElementById(targetId);
                           if (targetEl && targetEl.matches(selector)) {
                              li.classList.toggle("hidden", !show);
                           }
                        }
                     });
                  });
               }
            };

            hideInitial("article.imports", toggles.imports);
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            hideInitial("article.type", toggles.types);
            hideInitial("article.interface", toggles.interfaces);

            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;

                  const lines = codeBlock.innerHTML.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch && trimmed != "}") {
                           return `<span class="field-line">${line}</span>`;
                        }
                        if (nameMatch == null) return;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class="field-line${
                           isPriv ? " hidden private" : ""
                        }" data-name="${name}">${line}</span>`;
                     })
                     .join("");

                  codeBlock.innerHTML = newContent;

                  if (toggles.fields) {
                     toggles.fields.addEventListener("change", () => {
                        const show = toggles.fields.checked;
                        article
                           .querySelectorAll(".field-line.private")
                           .forEach((el) =>
                              el.classList.toggle("hidden", !show)
                           );
                     });
                  }
               });

            document
               .querySelectorAll("article.interface")
               .forEach((article) => {
                  const codeBlock = article.querySelector(
                     "code.methods-code"
                  );
                  if (!codeBlock) return;

                  const lines = codeBlock.innerHTML.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch) {
                           return `<span class="method-line">${line}</span>`;
                        }

                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class="method-line${
                           isPriv ? " hidden private" : ""
                        }" data-name="${name}">${line}</span>`;
                     })
                     .join("");

                  codeBlock.innerHTML = newContent;

                  if (toggles.fields) {
                     toggles.fields.addEventListener("change", () => {
                        const show = toggles.fields.checked;
                        article
                           .querySelectorAll(".method-line.private")
                           .forEach((el) =>
                              el.classList.toggle("hidden", !show)
                           );
                     });
                  }
               });

            const searchInput = document.getElementById("searchInput");
            if (searchInput) {
               searchInput.addEventListener("input", () => {
                  const query = searchInput.value.trim().toLowerCase();

                  document.querySelectorAll("article").forEach((el) => {
                     const name = el.dataset.name;
                     if (!name) return;

                     const matches =
                        query === "" ||
                        name.toLowerCase().includes(query) ||
                        (el.textContent &&
                           el.textContent.toLowerCase().includes(query));

                     if (matches) {
                        const isPrivateEl =
                           el.classList.contains("private");
                        const shouldShowPrivate =
                           getPrivateToggleState(el);

                        if (!isPrivateEl || shouldShowPrivate) {
                           el.classList.remove("hidden");
                        }
                     } else {
                        el.classList.add("hidden");
                     }
                  });

                  document.querySelectorAll('#symbolIndex li').forEach(li => {
                     const link = li.querySelector('a');
                     if (link) {
                        const symbolName = link.textContent.toLowerCase();
                        const matches = query === "" || symbolName.includes(query);
                        
                        if (matches) {
                           const isPrivateSymbol = li.classList.contains('private');
                           const targetId = link.getAttribute('href').substring(1);
                           const targetEl = document.getElementById(targetId);
                           const shouldShowPrivate = targetEl ? getPrivateToggleState(targetEl) : false;
                           
                           if (!isPrivateSymbol || shouldShowPrivate) {
                              li.style.display = '';
                           }
                        } else {
                           li.style.display = 'none';
                        }
                     }
                  });
               });
            }

            function getPrivateToggleState(element) {
               if (element.classList.contains("function")) {
                  return toggles.functions?.checked || false;
               } else if (element.classList.contains("struct")) {
                  return toggles.structs?.checked || false;
               } else if (element.classList.contains("global")) {
                  return toggles.globals?.checked || false;
               } else if (element.classList.contains("type")) {
                  return toggles.types?.checked || false;
               } else if (element.classList.contains("interface")) {
                  return toggles.interfaces?.checked || false;
               } else if (element.classList.contains("imports")) {
                  return toggles.imports?.checked || false;
               }
               return false;
            }

            buildSymbolIndex();

            document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
               anchor.addEventListener("click", function (e) {
                  const target = document.querySelector(
                     this.getAttribute("href")
                  );
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               });
            });

            window.addEventListener('hashchange', () => {
               const hash = window.location.hash;
               if (hash) {
                  const target = document.querySelector(hash);
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               }
            });

            if (window.location.hash) {
               setTimeout(() => {
                  const target = document.querySelector(window.location.hash);
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               }, 100);
            }
         });
      </script>
   </body>
</html>