<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - cookiejar</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>cookiejar</code>
         </h1>
         <hr />
         
         <article class="global" data-name="errIllegalDomain">
            <h2>errIllegalDomain</h2>
            <hr />
            
            <pre><code>errIllegalDomain</code></pre>
         </article>
         
         <article class="global" data-name="errMalformedDomain">
            <h2>errMalformedDomain</h2>
            <hr />
            
            <pre><code>errMalformedDomain</code></pre>
         </article>
         
         <article class="global" data-name="endOfTime">
            <h2>endOfTime</h2>
            <hr />
            
            <p>endOfTime is the time when session (non-persistent) cookies expire.
This instant is representable in most date/time formats (not just
Go's time.Time) and should be far enough in the future.</p>
            
            <pre><code>endOfTime</code></pre>
         </article>
         
         <article class="global" data-name="tNow">
            <h2>tNow</h2>
            <hr />
            
            <p>tNow is the synthetic current time used as now during testing.</p>
            
            <pre><code>tNow</code></pre>
         </article>
         
         <article class="global" data-name="hasDotSuffixTests">
            <h2>hasDotSuffixTests</h2>
            <hr />
            
            <pre><code>hasDotSuffixTests</code></pre>
         </article>
         
         <article class="global" data-name="canonicalHostTests">
            <h2>canonicalHostTests</h2>
            <hr />
            
            <pre><code>canonicalHostTests</code></pre>
         </article>
         
         <article class="global" data-name="hasPortTests">
            <h2>hasPortTests</h2>
            <hr />
            
            <pre><code>hasPortTests</code></pre>
         </article>
         
         <article class="global" data-name="jarKeyTests">
            <h2>jarKeyTests</h2>
            <hr />
            
            <pre><code>jarKeyTests</code></pre>
         </article>
         
         <article class="global" data-name="jarKeyNilPSLTests">
            <h2>jarKeyNilPSLTests</h2>
            <hr />
            
            <pre><code>jarKeyNilPSLTests</code></pre>
         </article>
         
         <article class="global" data-name="isIPTests">
            <h2>isIPTests</h2>
            <hr />
            
            <pre><code>isIPTests</code></pre>
         </article>
         
         <article class="global" data-name="defaultPathTests">
            <h2>defaultPathTests</h2>
            <hr />
            
            <pre><code>defaultPathTests</code></pre>
         </article>
         
         <article class="global" data-name="domainAndTypeTests">
            <h2>domainAndTypeTests</h2>
            <hr />
            
            <pre><code>domainAndTypeTests</code></pre>
         </article>
         
         <article class="global" data-name="basicsTests">
            <h2>basicsTests</h2>
            <hr />
            
            <p>basicsTests contains fundamental tests. Each jarTest has to be performed on
a fresh, empty Jar.</p>
            
            <pre><code>basicsTests</code></pre>
         </article>
         
         <article class="global" data-name="updateAndDeleteTests">
            <h2>updateAndDeleteTests</h2>
            <hr />
            
            <p>updateAndDeleteTests contains jarTests which must be performed on the same
Jar.</p>
            
            <pre><code>updateAndDeleteTests</code></pre>
         </article>
         
         <article class="global" data-name="chromiumBasicsTests">
            <h2>chromiumBasicsTests</h2>
            <hr />
            
            <p>chromiumBasicsTests contains fundamental tests. Each jarTest has to be
performed on a fresh, empty Jar.</p>
            
            <pre><code>chromiumBasicsTests</code></pre>
         </article>
         
         <article class="global" data-name="chromiumDomainTests">
            <h2>chromiumDomainTests</h2>
            <hr />
            
            <p>chromiumDomainTests contains jarTests which must be executed all on the
same Jar.</p>
            
            <pre><code>chromiumDomainTests</code></pre>
         </article>
         
         <article class="global" data-name="chromiumDeletionTests">
            <h2>chromiumDeletionTests</h2>
            <hr />
            
            <p>chromiumDeletionTests must be performed all on the same Jar.</p>
            
            <pre><code>chromiumDeletionTests</code></pre>
         </article>
         
         <article class="global" data-name="domainHandlingTests">
            <h2>domainHandlingTests</h2>
            <hr />
            
            <p>domainHandlingTests tests and documents the rules for domain handling.
Each test must be performed on an empty new Jar.</p>
            
            <pre><code>domainHandlingTests</code></pre>
         </article>
         
         <article class="global" data-name="base">
            <h2>base</h2>
            <hr />
            
            <p>These parameter values are specified in section 5.

All computation is done with int32s, so that overflow behavior is identical
regardless of whether int is 32-bit or 64-bit.</p>
            
            <pre><code>base int32</code></pre>
         </article>
         
         <article class="global" data-name="damp">
            <h2>damp</h2>
            <hr />
            
            <p>These parameter values are specified in section 5.

All computation is done with int32s, so that overflow behavior is identical
regardless of whether int is 32-bit or 64-bit.</p>
            
            <pre><code>damp int32</code></pre>
         </article>
         
         <article class="global" data-name="initialBias">
            <h2>initialBias</h2>
            <hr />
            
            <p>These parameter values are specified in section 5.

All computation is done with int32s, so that overflow behavior is identical
regardless of whether int is 32-bit or 64-bit.</p>
            
            <pre><code>initialBias int32</code></pre>
         </article>
         
         <article class="global" data-name="initialN">
            <h2>initialN</h2>
            <hr />
            
            <p>These parameter values are specified in section 5.

All computation is done with int32s, so that overflow behavior is identical
regardless of whether int is 32-bit or 64-bit.</p>
            
            <pre><code>initialN int32</code></pre>
         </article>
         
         <article class="global" data-name="skew">
            <h2>skew</h2>
            <hr />
            
            <p>These parameter values are specified in section 5.

All computation is done with int32s, so that overflow behavior is identical
regardless of whether int is 32-bit or 64-bit.</p>
            
            <pre><code>skew int32</code></pre>
         </article>
         
         <article class="global" data-name="tmax">
            <h2>tmax</h2>
            <hr />
            
            <p>These parameter values are specified in section 5.

All computation is done with int32s, so that overflow behavior is identical
regardless of whether int is 32-bit or 64-bit.</p>
            
            <pre><code>tmax int32</code></pre>
         </article>
         
         <article class="global" data-name="tmin">
            <h2>tmin</h2>
            <hr />
            
            <p>These parameter values are specified in section 5.

All computation is done with int32s, so that overflow behavior is identical
regardless of whether int is 32-bit or 64-bit.</p>
            
            <pre><code>tmin int32</code></pre>
         </article>
         
         <article class="global" data-name="acePrefix">
            <h2>acePrefix</h2>
            <hr />
            
            <p>acePrefix is the ASCII Compatible Encoding prefix.</p>
            
            <pre><code>acePrefix</code></pre>
         </article>
         
         <article class="global" data-name="punycodeTestCases">
            <h2>punycodeTestCases</h2>
            <hr />
            
            <pre><code>punycodeTestCases</code></pre>
         </article>
          
         <article class="struct" data-name="Options">
            <h2>type Options struct</h2>
            <hr />
            
            <p>Options are the options for creating a new Jar.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">PublicSuffixList PublicSuffixList</code></pre>
         </article>
         
         <article class="struct" data-name="Jar">
            <h2>type Jar struct</h2>
            <hr />
            
            <p>Jar implements the http.CookieJar interface from the net/http package.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">psList PublicSuffixList
mu sync.Mutex
entries *ast.MapType
nextSeqNum uint64</code></pre>
         </article>
         
         <article class="struct" data-name="entry">
            <h2>type entry struct</h2>
            <hr />
            
            <p>entry is the internal representation of a cookie.

This struct type is not used outside of this package per se, but the exported
fields are those of RFC 6265.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">Name string
Value string
Quoted bool
Domain string
Path string
SameSite string
Secure bool
HttpOnly bool
Persistent bool
HostOnly bool
Expires time.Time
Creation time.Time
LastAccess time.Time
seqNum uint64</code></pre>
         </article>
         
         <article class="struct" data-name="testPSL">
            <h2>type testPSL struct</h2>
            <hr />
            
            <p>testPSL implements PublicSuffixList with just two rules: "co.uk"
and the default rule "*".
The implementation has two intentional bugs:

	PublicSuffix("www.buggy.psl") == "xy"
	PublicSuffix("www2.buggy.psl") == "com"</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code"></code></pre>
         </article>
         
         <article class="struct" data-name="jarTest">
            <h2>type jarTest struct</h2>
            <hr />
            
            <p>jarTest encapsulates the following actions on a jar:
 1. Perform SetCookies with fromURL and the cookies from setCookies.
    (Done at time tNow + 0 ms.)
 2. Check that the entries in the jar matches content.
    (Done at time tNow + 1001 ms.)
 3. For each query in tests: Check that Cookies with toURL yields the
    cookies in want.
    (Query n done at tNow + (n+2)*1001 ms.)</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">description string
fromURL string
setCookies []string
content string
queries []query</code></pre>
         </article>
         
         <article class="struct" data-name="query">
            <h2>type query struct</h2>
            <hr />
            
            <p>query contains one test of the cookies returned from Jar.Cookies.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">toURL string
want string</code></pre>
         </article>
          
         <article class="function" data-name="New">
            <h2>New</h2>
            <hr />
            
            <p>New returns a new cookie jar. A nil [*Options] is equivalent to a zero
Options.</p>
            
            <pre><code>func New(o *Options) (*Jar, error)</code></pre>
         </article>
         
         <article class="function" data-name="id">
            <h2>id</h2>
            <hr />
            
            <p>id returns the domain;path;name triple of e as an id.</p>
            
            <pre><code>func id() string</code></pre>
         </article>
         
         <article class="function" data-name="shouldSend">
            <h2>shouldSend</h2>
            <hr />
            
            <p>shouldSend determines whether e's cookie qualifies to be included in a
request to host/path. It is the caller's responsibility to check if the
cookie is expired.</p>
            
            <pre><code>func shouldSend(https bool, host string, path string) bool</code></pre>
         </article>
         
         <article class="function" data-name="domainMatch">
            <h2>domainMatch</h2>
            <hr />
            
            <p>domainMatch checks whether e's Domain allows sending e back to host.
It differs from "domain-match" of RFC 6265 section 5.1.3 because we treat
a cookie with an IP address in the Domain always as a host cookie.</p>
            
            <pre><code>func domainMatch(host string) bool</code></pre>
         </article>
         
         <article class="function" data-name="pathMatch">
            <h2>pathMatch</h2>
            <hr />
            
            <p>pathMatch implements "path-match" according to RFC 6265 section 5.1.4.</p>
            
            <pre><code>func pathMatch(requestPath string) bool</code></pre>
         </article>
         
         <article class="function" data-name="hasDotSuffix">
            <h2>hasDotSuffix</h2>
            <hr />
            
            <p>hasDotSuffix reports whether s ends in "."+suffix.</p>
            
            <pre><code>func hasDotSuffix(s string, suffix string) bool</code></pre>
         </article>
         
         <article class="function" data-name="Cookies">
            <h2>Cookies</h2>
            <hr />
            
            <p>Cookies implements the Cookies method of the [http.CookieJar] interface.

It returns an empty slice if the URL's scheme is not HTTP or HTTPS.</p>
            
            <pre><code>func Cookies(u *url.URL) cookies []*http.Cookie</code></pre>
         </article>
         
         <article class="function" data-name="cookies">
            <h2>cookies</h2>
            <hr />
            
            <p>cookies is like Cookies but takes the current time as a parameter.</p>
            
            <pre><code>func cookies(u *url.URL, now time.Time) cookies []*http.Cookie</code></pre>
         </article>
         
         <article class="function" data-name="SetCookies">
            <h2>SetCookies</h2>
            <hr />
            
            <p>SetCookies implements the SetCookies method of the [http.CookieJar] interface.

It does nothing if the URL's scheme is not HTTP or HTTPS.</p>
            
            <pre><code>func SetCookies(u *url.URL, cookies []*http.Cookie)</code></pre>
         </article>
         
         <article class="function" data-name="setCookies">
            <h2>setCookies</h2>
            <hr />
            
            <p>setCookies is like SetCookies but takes the current time as parameter.</p>
            
            <pre><code>func setCookies(u *url.URL, cookies []*http.Cookie, now time.Time)</code></pre>
         </article>
         
         <article class="function" data-name="canonicalHost">
            <h2>canonicalHost</h2>
            <hr />
            
            <p>canonicalHost strips port from host if present and returns the canonicalized
host name.</p>
            
            <pre><code>func canonicalHost(host string) (string, error)</code></pre>
         </article>
         
         <article class="function" data-name="hasPort">
            <h2>hasPort</h2>
            <hr />
            
            <p>hasPort reports whether host contains a port number. host may be a host
name, an IPv4 or an IPv6 address.</p>
            
            <pre><code>func hasPort(host string) bool</code></pre>
         </article>
         
         <article class="function" data-name="jarKey">
            <h2>jarKey</h2>
            <hr />
            
            <p>jarKey returns the key to use for a jar.</p>
            
            <pre><code>func jarKey(host string, psl PublicSuffixList) string</code></pre>
         </article>
         
         <article class="function" data-name="isIP">
            <h2>isIP</h2>
            <hr />
            
            <p>isIP reports whether host is an IP address.</p>
            
            <pre><code>func isIP(host string) bool</code></pre>
         </article>
         
         <article class="function" data-name="defaultPath">
            <h2>defaultPath</h2>
            <hr />
            
            <p>defaultPath returns the directory part of a URL's path according to
RFC 6265 section 5.1.4.</p>
            
            <pre><code>func defaultPath(path string) string</code></pre>
         </article>
         
         <article class="function" data-name="newEntry">
            <h2>newEntry</h2>
            <hr />
            
            <p>newEntry creates an entry from an http.Cookie c. now is the current time and
is compared to c.Expires to determine deletion of c. defPath and host are the
default-path and the canonical host name of the URL c was received from.

remove records whether the jar should delete this cookie, as it has already
expired with respect to now. In this case, e may be incomplete, but it will
be valid to call e.id (which depends on e's Name, Domain and Path).

A malformed c.Domain will result in an error.</p>
            
            <pre><code>func newEntry(c *http.Cookie, now time.Time, defPath string, host string) (e entry, remove bool, err error)</code></pre>
         </article>
         
         <article class="function" data-name="domainAndType">
            <h2>domainAndType</h2>
            <hr />
            
            <p>domainAndType determines the cookie's domain and hostOnly attribute.</p>
            
            <pre><code>func domainAndType(host string, domain string) (string, bool, error)</code></pre>
         </article>
         
         <article class="function" data-name="String">
            <h2>String</h2>
            <hr />
            
            <pre><code>func String() string</code></pre>
         </article>
         
         <article class="function" data-name="PublicSuffix">
            <h2>PublicSuffix</h2>
            <hr />
            
            <pre><code>func PublicSuffix(d string) string</code></pre>
         </article>
         
         <article class="function" data-name="newTestJar">
            <h2>newTestJar</h2>
            <hr />
            
            <p>newTestJar creates an empty Jar with testPSL as the public suffix list.</p>
            
            <pre><code>func newTestJar() *Jar</code></pre>
         </article>
         
         <article class="function" data-name="TestHasDotSuffix">
            <h2>TestHasDotSuffix</h2>
            <hr />
            
            <pre><code>func TestHasDotSuffix(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestCanonicalHost">
            <h2>TestCanonicalHost</h2>
            <hr />
            
            <pre><code>func TestCanonicalHost(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestHasPort">
            <h2>TestHasPort</h2>
            <hr />
            
            <pre><code>func TestHasPort(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestJarKey">
            <h2>TestJarKey</h2>
            <hr />
            
            <pre><code>func TestJarKey(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestJarKeyNilPSL">
            <h2>TestJarKeyNilPSL</h2>
            <hr />
            
            <pre><code>func TestJarKeyNilPSL(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestIsIP">
            <h2>TestIsIP</h2>
            <hr />
            
            <pre><code>func TestIsIP(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestDefaultPath">
            <h2>TestDefaultPath</h2>
            <hr />
            
            <pre><code>func TestDefaultPath(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestDomainAndType">
            <h2>TestDomainAndType</h2>
            <hr />
            
            <pre><code>func TestDomainAndType(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="expiresIn">
            <h2>expiresIn</h2>
            <hr />
            
            <p>expiresIn creates an expires attribute delta seconds from tNow.</p>
            
            <pre><code>func expiresIn(delta int) string</code></pre>
         </article>
         
         <article class="function" data-name="mustParseURL">
            <h2>mustParseURL</h2>
            <hr />
            
            <p>mustParseURL parses s to a URL and panics on error.</p>
            
            <pre><code>func mustParseURL(s string) *url.URL</code></pre>
         </article>
         
         <article class="function" data-name="run">
            <h2>run</h2>
            <hr />
            
            <p>run runs the jarTest.</p>
            
            <pre><code>func run(t *testing.T, jar *Jar)</code></pre>
         </article>
         
         <article class="function" data-name="TestBasics">
            <h2>TestBasics</h2>
            <hr />
            
            <pre><code>func TestBasics(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestUpdateAndDelete">
            <h2>TestUpdateAndDelete</h2>
            <hr />
            
            <pre><code>func TestUpdateAndDelete(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestExpiration">
            <h2>TestExpiration</h2>
            <hr />
            
            <pre><code>func TestExpiration(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestChromiumBasics">
            <h2>TestChromiumBasics</h2>
            <hr />
            
            <pre><code>func TestChromiumBasics(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestChromiumDomain">
            <h2>TestChromiumDomain</h2>
            <hr />
            
            <pre><code>func TestChromiumDomain(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestChromiumDeletion">
            <h2>TestChromiumDeletion</h2>
            <hr />
            
            <pre><code>func TestChromiumDeletion(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestDomainHandling">
            <h2>TestDomainHandling</h2>
            <hr />
            
            <pre><code>func TestDomainHandling(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestIssue19384">
            <h2>TestIssue19384</h2>
            <hr />
            
            <pre><code>func TestIssue19384(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="encode">
            <h2>encode</h2>
            <hr />
            
            <p>encode encodes a string as specified in section 6.3 and prepends prefix to
the result.

The "while h < length(input)" line in the specification becomes "for
remaining != 0" in the Go code, because len(s) in Go is in bytes, not runes.</p>
            
            <pre><code>func encode(prefix string, s string) (string, error)</code></pre>
         </article>
         
         <article class="function" data-name="encodeDigit">
            <h2>encodeDigit</h2>
            <hr />
            
            <pre><code>func encodeDigit(digit int32) byte</code></pre>
         </article>
         
         <article class="function" data-name="adapt">
            <h2>adapt</h2>
            <hr />
            
            <p>adapt is the bias adaptation function specified in section 6.1.</p>
            
            <pre><code>func adapt(delta int32, numPoints int32, firstTime bool) int32</code></pre>
         </article>
         
         <article class="function" data-name="toASCII">
            <h2>toASCII</h2>
            <hr />
            
            <p>toASCII converts a domain or domain label to its ASCII form. For example,
toASCII("bücher.example.com") is "xn--bcher-kva.example.com", and
toASCII("golang") is "golang".</p>
            
            <pre><code>func toASCII(s string) (string, error)</code></pre>
         </article>
         
         <article class="function" data-name="TestPunycode">
            <h2>TestPunycode</h2>
            <hr />
            
            <pre><code>func TestPunycode(t *testing.T)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
