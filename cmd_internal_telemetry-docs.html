<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - telemetry</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
          
         <a href="cmd_internal_telemetry_counter-docs.html">counter</a>
         <br />
          
      </aside>
      <main>
         <h1>
            Package
            <code>telemetry</code>
         </h1>
         <hr />
         
         <article class="global" data-name="openCountersCalled">
            <h2>openCountersCalled</h2>
            <hr />
            
            <pre><code>openCountersCalled bool</code></pre>
         </article>
         
         <article class="global" data-name="maybeChildCalled">
            <h2>maybeChildCalled</h2>
            <hr />
            
            <pre><code>maybeChildCalled bool</code></pre>
         </article>
           
         <article class="function" data-name="MaybeParent">
            <h2>MaybeParent</h2>
            <hr />
            
            <p>MaybeParent does a once a day check to see if the weekly reports are
ready to be processed or uploaded, and if so, starts the telemetry child to
do so. It should only be called by cmd/go, and only after OpenCounters and MaybeChild
have already been called.</p>
            
            <pre><code>func MaybeParent()</code></pre>
         </article>
         
         <article class="function" data-name="MaybeChild">
            <h2>MaybeChild</h2>
            <hr />
            
            <p>MaybeChild executes the telemetry child logic if the calling program is
the telemetry child process, and does nothing otherwise. It is meant to be
called as the first thing in a program that uses telemetry.OpenCounters but cannot
call telemetry.OpenCounters immediately when it starts.</p>
            
            <pre><code>func MaybeChild()</code></pre>
         </article>
         
         <article class="function" data-name="Mode">
            <h2>Mode</h2>
            <hr />
            
            <p>Mode returns the current telemetry mode.

The telemetry mode is a global value that controls both the local collection
and uploading of telemetry data. Possible mode values are:
  - "on":    both collection and uploading is enabled
  - "local": collection is enabled, but uploading is disabled
  - "off":   both collection and uploading are disabled

When mode is "on", or "local", telemetry data is written to the local file
system and may be inspected with the [gotelemetry] command.

If an error occurs while reading the telemetry mode from the file system,
Mode returns the default value "local".

[gotelemetry]: https://pkg.go.dev/golang.org/x/telemetry/cmd/gotelemetry</p>
            
            <pre><code>func Mode() string</code></pre>
         </article>
         
         <article class="function" data-name="SetMode">
            <h2>SetMode</h2>
            <hr />
            
            <p>SetMode sets the global telemetry mode to the given value.

See the documentation of [Mode] for a description of the supported mode
values.

An error is returned if the provided mode value is invalid, or if an error
occurs while persisting the mode value to the file system.</p>
            
            <pre><code>func SetMode(mode string) error</code></pre>
         </article>
         
         <article class="function" data-name="Dir">
            <h2>Dir</h2>
            <hr />
            
            <p>Dir returns the telemetry directory.</p>
            
            <pre><code>func Dir() string</code></pre>
         </article>
         
         <article class="function" data-name="MaybeParent">
            <h2>MaybeParent</h2>
            <hr />
            
            <pre><code>func MaybeParent()</code></pre>
         </article>
         
         <article class="function" data-name="MaybeChild">
            <h2>MaybeChild</h2>
            <hr />
            
            <pre><code>func MaybeChild()</code></pre>
         </article>
         
         <article class="function" data-name="Mode">
            <h2>Mode</h2>
            <hr />
            
            <pre><code>func Mode() string</code></pre>
         </article>
         
         <article class="function" data-name="SetMode">
            <h2>SetMode</h2>
            <hr />
            
            <pre><code>func SetMode(mode string) error</code></pre>
         </article>
         
         <article class="function" data-name="Dir">
            <h2>Dir</h2>
            <hr />
            
            <pre><code>func Dir() string</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
