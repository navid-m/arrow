<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - loadmacho</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>loadmacho</code>
         </h1>
         <hr />
         
         <article class="global" data-name="MACHO_X86_64_RELOC_UNSIGNED">
            <h2>MACHO_X86_64_RELOC_UNSIGNED</h2>
            <hr />
            
            <p>TODO(crawshaw): de-duplicate these symbols with cmd/link/internal/ld</p>
            
            <pre><code>MACHO_X86_64_RELOC_UNSIGNED</code></pre>
         </article>
         
         <article class="global" data-name="MACHO_X86_64_RELOC_SIGNED">
            <h2>MACHO_X86_64_RELOC_SIGNED</h2>
            <hr />
            
            <p>TODO(crawshaw): de-duplicate these symbols with cmd/link/internal/ld</p>
            
            <pre><code>MACHO_X86_64_RELOC_SIGNED</code></pre>
         </article>
         
         <article class="global" data-name="MACHO_ARM64_RELOC_ADDEND">
            <h2>MACHO_ARM64_RELOC_ADDEND</h2>
            <hr />
            
            <p>TODO(crawshaw): de-duplicate these symbols with cmd/link/internal/ld</p>
            
            <pre><code>MACHO_ARM64_RELOC_ADDEND</code></pre>
         </article>
         
         <article class="global" data-name="N_EXT">
            <h2>N_EXT</h2>
            <hr />
            
            <p>ldMachoSym.type_</p>
            
            <pre><code>N_EXT</code></pre>
         </article>
         
         <article class="global" data-name="N_TYPE">
            <h2>N_TYPE</h2>
            <hr />
            
            <p>ldMachoSym.type_</p>
            
            <pre><code>N_TYPE</code></pre>
         </article>
         
         <article class="global" data-name="N_STAB">
            <h2>N_STAB</h2>
            <hr />
            
            <p>ldMachoSym.type_</p>
            
            <pre><code>N_STAB</code></pre>
         </article>
         
         <article class="global" data-name="N_WEAK_REF">
            <h2>N_WEAK_REF</h2>
            <hr />
            
            <p>ldMachoSym.desc</p>
            
            <pre><code>N_WEAK_REF</code></pre>
         </article>
         
         <article class="global" data-name="N_WEAK_DEF">
            <h2>N_WEAK_DEF</h2>
            <hr />
            
            <p>ldMachoSym.desc</p>
            
            <pre><code>N_WEAK_DEF</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpuVax">
            <h2>LdMachoCpuVax</h2>
            <hr />
            
            <pre><code>LdMachoCpuVax</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpu68000">
            <h2>LdMachoCpu68000</h2>
            <hr />
            
            <pre><code>LdMachoCpu68000</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpu386">
            <h2>LdMachoCpu386</h2>
            <hr />
            
            <pre><code>LdMachoCpu386</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpuAmd64">
            <h2>LdMachoCpuAmd64</h2>
            <hr />
            
            <pre><code>LdMachoCpuAmd64</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpuMips">
            <h2>LdMachoCpuMips</h2>
            <hr />
            
            <pre><code>LdMachoCpuMips</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpu98000">
            <h2>LdMachoCpu98000</h2>
            <hr />
            
            <pre><code>LdMachoCpu98000</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpuHppa">
            <h2>LdMachoCpuHppa</h2>
            <hr />
            
            <pre><code>LdMachoCpuHppa</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpuArm">
            <h2>LdMachoCpuArm</h2>
            <hr />
            
            <pre><code>LdMachoCpuArm</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpuArm64">
            <h2>LdMachoCpuArm64</h2>
            <hr />
            
            <pre><code>LdMachoCpuArm64</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpu88000">
            <h2>LdMachoCpu88000</h2>
            <hr />
            
            <pre><code>LdMachoCpu88000</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpuSparc">
            <h2>LdMachoCpuSparc</h2>
            <hr />
            
            <pre><code>LdMachoCpuSparc</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpu860">
            <h2>LdMachoCpu860</h2>
            <hr />
            
            <pre><code>LdMachoCpu860</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpuAlpha">
            <h2>LdMachoCpuAlpha</h2>
            <hr />
            
            <pre><code>LdMachoCpuAlpha</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCpuPower">
            <h2>LdMachoCpuPower</h2>
            <hr />
            
            <pre><code>LdMachoCpuPower</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCmdSegment">
            <h2>LdMachoCmdSegment</h2>
            <hr />
            
            <pre><code>LdMachoCmdSegment</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCmdSymtab">
            <h2>LdMachoCmdSymtab</h2>
            <hr />
            
            <pre><code>LdMachoCmdSymtab</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCmdSymseg">
            <h2>LdMachoCmdSymseg</h2>
            <hr />
            
            <pre><code>LdMachoCmdSymseg</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCmdThread">
            <h2>LdMachoCmdThread</h2>
            <hr />
            
            <pre><code>LdMachoCmdThread</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCmdDysymtab">
            <h2>LdMachoCmdDysymtab</h2>
            <hr />
            
            <pre><code>LdMachoCmdDysymtab</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoCmdSegment64">
            <h2>LdMachoCmdSegment64</h2>
            <hr />
            
            <pre><code>LdMachoCmdSegment64</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoFileObject">
            <h2>LdMachoFileObject</h2>
            <hr />
            
            <pre><code>LdMachoFileObject</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoFileExecutable">
            <h2>LdMachoFileExecutable</h2>
            <hr />
            
            <pre><code>LdMachoFileExecutable</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoFileFvmlib">
            <h2>LdMachoFileFvmlib</h2>
            <hr />
            
            <pre><code>LdMachoFileFvmlib</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoFileCore">
            <h2>LdMachoFileCore</h2>
            <hr />
            
            <pre><code>LdMachoFileCore</code></pre>
         </article>
         
         <article class="global" data-name="LdMachoFilePreload">
            <h2>LdMachoFilePreload</h2>
            <hr />
            
            <pre><code>LdMachoFilePreload</code></pre>
         </article>
          
         <article class="struct" data-name="ldMachoObj">
            <h2>type ldMachoObj struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">f *bio.Reader
base int64
length int64
is64 bool
name string
e binary.ByteOrder
cputype uint
subcputype uint
filetype uint32
flags uint32
cmd []ldMachoCmd
ncmd uint</code></pre>
         </article>
         
         <article class="struct" data-name="ldMachoCmd">
            <h2>type ldMachoCmd struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">type_ int
off uint32
size uint32
seg ldMachoSeg
sym ldMachoSymtab
dsym ldMachoDysymtab</code></pre>
         </article>
         
         <article class="struct" data-name="ldMachoSeg">
            <h2>type ldMachoSeg struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">name string
vmaddr uint64
vmsize uint64
fileoff uint32
filesz uint32
maxprot uint32
initprot uint32
nsect uint32
flags uint32
sect []ldMachoSect</code></pre>
         </article>
         
         <article class="struct" data-name="ldMachoSect">
            <h2>type ldMachoSect struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">name string
segname string
addr uint64
size uint64
off uint32
align uint32
reloff uint32
nreloc uint32
flags uint32
res1 uint32
res2 uint32
sym loader.Sym
rel []ldMachoRel</code></pre>
         </article>
         
         <article class="struct" data-name="ldMachoRel">
            <h2>type ldMachoRel struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">addr uint32
symnum uint32
pcrel uint8
length uint8
extrn uint8
type_ uint8
scattered uint8
value uint32</code></pre>
         </article>
         
         <article class="struct" data-name="ldMachoSymtab">
            <h2>type ldMachoSymtab struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">symoff uint32
nsym uint32
stroff uint32
strsize uint32
str []byte
sym []ldMachoSym</code></pre>
         </article>
         
         <article class="struct" data-name="ldMachoSym">
            <h2>type ldMachoSym struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">name string
type_ uint8
sectnum uint8
desc uint16
kind int8
value uint64
sym loader.Sym</code></pre>
         </article>
         
         <article class="struct" data-name="ldMachoDysymtab">
            <h2>type ldMachoDysymtab struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">ilocalsym uint32
nlocalsym uint32
iextdefsym uint32
nextdefsym uint32
iundefsym uint32
nundefsym uint32
tocoff uint32
ntoc uint32
modtaboff uint32
nmodtab uint32
extrefsymoff uint32
nextrefsyms uint32
indirectsymoff uint32
nindirectsyms uint32
extreloff uint32
nextrel uint32
locreloff uint32
nlocrel uint32
indir []uint32</code></pre>
         </article>
          
         <article class="function" data-name="unpackcmd">
            <h2>unpackcmd</h2>
            <hr />
            
            <pre><code>func unpackcmd(p []byte, m *ldMachoObj, c *ldMachoCmd, type_ uint, sz uint) int</code></pre>
         </article>
         
         <article class="function" data-name="macholoadrel">
            <h2>macholoadrel</h2>
            <hr />
            
            <pre><code>func macholoadrel(m *ldMachoObj, sect *ldMachoSect) int</code></pre>
         </article>
         
         <article class="function" data-name="macholoaddsym">
            <h2>macholoaddsym</h2>
            <hr />
            
            <pre><code>func macholoaddsym(m *ldMachoObj, d *ldMachoDysymtab) int</code></pre>
         </article>
         
         <article class="function" data-name="macholoadsym">
            <h2>macholoadsym</h2>
            <hr />
            
            <pre><code>func macholoadsym(m *ldMachoObj, symtab *ldMachoSymtab) int</code></pre>
         </article>
         
         <article class="function" data-name="Load">
            <h2>Load</h2>
            <hr />
            
            <p>Load the Mach-O file pn from f.
Symbols are written into syms, and a slice of the text symbols is returned.</p>
            
            <pre><code>func Load(l *loader.Loader, arch *sys.Arch, localSymVersion int, f *bio.Reader, pkg string, length int64, pn string) (textp []loader.Sym, err error)</code></pre>
         </article>
         
         <article class="function" data-name="cstring">
            <h2>cstring</h2>
            <hr />
            
            <pre><code>func cstring(x []byte) string</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
