<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - chacha20</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>chacha20</code>
         </h1>
         <hr />
         
         <article class="global" data-name="KeySize">
            <h2>KeySize</h2>
            <hr />
            
            <p>KeySize is the size of the key used by this cipher, in bytes.</p>
            
            <pre><code>KeySize</code></pre>
         </article>
         
         <article class="global" data-name="NonceSize">
            <h2>NonceSize</h2>
            <hr />
            
            <p>NonceSize is the size of the nonce used with the standard variant of this
cipher, in bytes.

Note that this is too short to be safely generated at random if the same
key is reused more than 2³² times.</p>
            
            <pre><code>NonceSize</code></pre>
         </article>
         
         <article class="global" data-name="NonceSizeX">
            <h2>NonceSizeX</h2>
            <hr />
            
            <p>NonceSizeX is the size of the nonce used with the XChaCha20 variant of
this cipher, in bytes.</p>
            
            <pre><code>NonceSizeX</code></pre>
         </article>
         
         <article class="global" data-name="_">
            <h2>_</h2>
            <hr />
            
            <pre><code>_ cipher.Stream</code></pre>
         </article>
         
         <article class="global" data-name="j0">
            <h2>j0</h2>
            <hr />
            
            <p>The constant first 4 words of the ChaCha20 state.</p>
            
            <pre><code>j0 uint32</code></pre>
         </article>
         
         <article class="global" data-name="j1">
            <h2>j1</h2>
            <hr />
            
            <p>The constant first 4 words of the ChaCha20 state.</p>
            
            <pre><code>j1 uint32</code></pre>
         </article>
         
         <article class="global" data-name="j2">
            <h2>j2</h2>
            <hr />
            
            <p>The constant first 4 words of the ChaCha20 state.</p>
            
            <pre><code>j2 uint32</code></pre>
         </article>
         
         <article class="global" data-name="j3">
            <h2>j3</h2>
            <hr />
            
            <p>The constant first 4 words of the ChaCha20 state.</p>
            
            <pre><code>j3 uint32</code></pre>
         </article>
         
         <article class="global" data-name="blockSize">
            <h2>blockSize</h2>
            <hr />
            
            <pre><code>blockSize</code></pre>
         </article>
         
         <article class="global" data-name="bufSize">
            <h2>bufSize</h2>
            <hr />
            
            <pre><code>bufSize</code></pre>
         </article>
         
         <article class="global" data-name="bufSize">
            <h2>bufSize</h2>
            <hr />
            
            <pre><code>bufSize</code></pre>
         </article>
         
         <article class="global" data-name="haveAsm">
            <h2>haveAsm</h2>
            <hr />
            
            <pre><code>haveAsm</code></pre>
         </article>
         
         <article class="global" data-name="bufSize">
            <h2>bufSize</h2>
            <hr />
            
            <pre><code>bufSize</code></pre>
         </article>
         
         <article class="global" data-name="unaligned">
            <h2>unaligned</h2>
            <hr />
            
            <p>Platforms that have fast unaligned 32-bit little endian accesses.</p>
            
            <pre><code>unaligned</code></pre>
         </article>
         
         <article class="global" data-name="bufSize">
            <h2>bufSize</h2>
            <hr />
            
            <pre><code>bufSize</code></pre>
         </article>
          
         <article class="struct" data-name="Cipher">
            <h2>type Cipher struct</h2>
            <hr />
            
            <p>Cipher is a stateful instance of ChaCha20 or XChaCha20 using a particular key
and nonce. A *Cipher implements the cipher.Stream interface.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">key []uint32
counter uint32
nonce []uint32
buf []byte
len int
overflow bool
precompDone bool
p1 uint32
p5 uint32
p9 uint32
p13 uint32
p2 uint32
p6 uint32
p10 uint32
p14 uint32
p3 uint32
p7 uint32
p11 uint32
p15 uint32</code></pre>
         </article>
          
         <article class="function" data-name="NewUnauthenticatedCipher">
            <h2>NewUnauthenticatedCipher</h2>
            <hr />
            
            <p>NewUnauthenticatedCipher creates a new ChaCha20 stream cipher with the given
32 bytes key and a 12 or 24 bytes nonce. If a nonce of 24 bytes is provided,
the XChaCha20 construction will be used. It returns an error if key or nonce
have any other length.

Note that ChaCha20, like all stream ciphers, is not authenticated and allows
attackers to silently tamper with the plaintext. For this reason, it is more
appropriate as a building block than as a standalone encryption mechanism.
Instead, consider using package golang.org/x/crypto/chacha20poly1305.</p>
            
            <pre><code>func NewUnauthenticatedCipher(key []byte, nonce []byte) (*Cipher, error)</code></pre>
         </article>
         
         <article class="function" data-name="newUnauthenticatedCipher">
            <h2>newUnauthenticatedCipher</h2>
            <hr />
            
            <pre><code>func newUnauthenticatedCipher(c *Cipher, key []byte, nonce []byte) (*Cipher, error)</code></pre>
         </article>
         
         <article class="function" data-name="quarterRound">
            <h2>quarterRound</h2>
            <hr />
            
            <p>quarterRound is the core of ChaCha20. It shuffles the bits of 4 state words.
It's executed 4 times for each of the 20 ChaCha20 rounds, operating on all 16
words each round, in columnar or diagonal groups of 4 at a time.</p>
            
            <pre><code>func quarterRound(a uint32, b uint32, c uint32, d uint32) (uint32, uint32, uint32, uint32)</code></pre>
         </article>
         
         <article class="function" data-name="SetCounter">
            <h2>SetCounter</h2>
            <hr />
            
            <p>SetCounter sets the Cipher counter. The next invocation of XORKeyStream will
behave as if (64 * counter) bytes had been encrypted so far.

To prevent accidental counter reuse, SetCounter panics if counter is less
than the current value.

Note that the execution time of XORKeyStream is not independent of the
counter value.</p>
            
            <pre><code>func SetCounter(counter uint32)</code></pre>
         </article>
         
         <article class="function" data-name="XORKeyStream">
            <h2>XORKeyStream</h2>
            <hr />
            
            <p>XORKeyStream XORs each byte in the given slice with a byte from the
cipher's key stream. Dst and src must overlap entirely or not at all.

If len(dst) < len(src), XORKeyStream will panic. It is acceptable
to pass a dst bigger than src, and in that case, XORKeyStream will
only update dst[:len(src)] and will not touch the rest of dst.

Multiple calls to XORKeyStream behave as if the concatenation of
the src buffers was passed in a single run. That is, Cipher
maintains state and does not reset at each XORKeyStream call.</p>
            
            <pre><code>func XORKeyStream(dst []byte, src []byte)</code></pre>
         </article>
         
         <article class="function" data-name="xorKeyStreamBlocksGeneric">
            <h2>xorKeyStreamBlocksGeneric</h2>
            <hr />
            
            <pre><code>func xorKeyStreamBlocksGeneric(dst []byte, src []byte)</code></pre>
         </article>
         
         <article class="function" data-name="HChaCha20">
            <h2>HChaCha20</h2>
            <hr />
            
            <p>HChaCha20 uses the ChaCha20 core to generate a derived key from a 32 bytes
key and a 16 bytes nonce. It returns an error if key or nonce have any other
length. It is used as part of the XChaCha20 construction.</p>
            
            <pre><code>func HChaCha20(key []byte, nonce []byte) ([]byte, error)</code></pre>
         </article>
         
         <article class="function" data-name="hChaCha20">
            <h2>hChaCha20</h2>
            <hr />
            
            <pre><code>func hChaCha20(out []byte, key []byte, nonce []byte) ([]byte, error)</code></pre>
         </article>
         
         <article class="function" data-name="xorKeyStreamBlocks">
            <h2>xorKeyStreamBlocks</h2>
            <hr />
            
            <pre><code>func xorKeyStreamBlocks(dst []byte, src []byte)</code></pre>
         </article>
         
         <article class="function" data-name="chaCha20_ctr32_vsx">
            <h2>chaCha20_ctr32_vsx</h2>
            <hr />
            
            <pre><code>func chaCha20_ctr32_vsx(out *byte, inp *byte, len int, key *[]uint32, counter *uint32)</code></pre>
         </article>
         
         <article class="function" data-name="xorKeyStreamBlocks">
            <h2>xorKeyStreamBlocks</h2>
            <hr />
            
            <pre><code>func xorKeyStreamBlocks(dst []byte, src []byte)</code></pre>
         </article>
         
         <article class="function" data-name="xorKeyStreamVX">
            <h2>xorKeyStreamVX</h2>
            <hr />
            
            <p>xorKeyStreamVX is an assembly implementation of XORKeyStream. It must only
be called when the vector facility is available. Implementation in asm_s390x.s.</p>
            
            <pre><code>func xorKeyStreamVX(dst []byte, src []byte, key *[]uint32, nonce *[]uint32, counter *uint32)</code></pre>
         </article>
         
         <article class="function" data-name="xorKeyStreamBlocks">
            <h2>xorKeyStreamBlocks</h2>
            <hr />
            
            <pre><code>func xorKeyStreamBlocks(dst []byte, src []byte)</code></pre>
         </article>
         
         <article class="function" data-name="addXor">
            <h2>addXor</h2>
            <hr />
            
            <p>addXor reads a little endian uint32 from src, XORs it with (a + b) and
places the result in little endian byte order in dst.</p>
            
            <pre><code>func addXor(dst []byte, src []byte, a uint32, b uint32)</code></pre>
         </article>
         
         <article class="function" data-name="xorKeyStreamVX">
            <h2>xorKeyStreamVX</h2>
            <hr />
            
            <pre><code>func xorKeyStreamVX(dst []byte, src []byte, key *[]uint32, nonce *[]uint32, counter *uint32)</code></pre>
         </article>
         
         <article class="function" data-name="xorKeyStreamBlocks">
            <h2>xorKeyStreamBlocks</h2>
            <hr />
            
            <pre><code>func xorKeyStreamBlocks(dst []byte, src []byte)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
