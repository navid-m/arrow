<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - mvs</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>mvs</code>
         </h1>
         <hr />
         
         <article class="global" data-name="tests">
            <h2>tests</h2>
            <hr />
            
            <pre><code>tests</code></pre>
         </article>
          
         <article class="struct" data-name="BuildListError">
            <h2>type BuildListError struct</h2>
            <hr />
            
            <p>BuildListError decorates an error that occurred gathering requirements
while constructing a build list. BuildListError prints the chain
of requirements to the module where the error occurred.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">Err error
stack []buildListErrorElem</code></pre>
         </article>
         
         <article class="struct" data-name="buildListErrorElem">
            <h2>type buildListErrorElem struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">m module.Version
nextReason string</code></pre>
         </article>
         
         <article class="struct" data-name="Graph">
            <h2>type Graph struct</h2>
            <hr />
            
            <p>Graph implements an incremental version of the MVS algorithm, with the
requirements pushed by the caller instead of pulled by the MVS traversal.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">cmp func
roots []module.Version
required *ast.MapType
isRoot *ast.MapType
selected *ast.MapType</code></pre>
         </article>
         
         <article class="struct" data-name="override">
            <h2>type override struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">target module.Version
list []module.Version
Reqs</code></pre>
         </article>
          
         <article class="function" data-name="NewBuildListError">
            <h2>NewBuildListError</h2>
            <hr />
            
            <p>NewBuildListError returns a new BuildListError wrapping an error that
occurred at a module found along the given path of requirements and/or
upgrades, which must be non-empty.

The isVersionChange function reports whether a path step is due to an
explicit upgrade or downgrade (as opposed to an existing requirement in a
go.mod file). A nil isVersionChange function indicates that none of the path
steps are due to explicit version changes.</p>
            
            <pre><code>func NewBuildListError(err error, path []module.Version, isVersionChange func) *BuildListError</code></pre>
         </article>
         
         <article class="function" data-name="Module">
            <h2>Module</h2>
            <hr />
            
            <p>Module returns the module where the error occurred. If the module stack
is empty, this returns a zero value.</p>
            
            <pre><code>func Module() module.Version</code></pre>
         </article>
         
         <article class="function" data-name="Error">
            <h2>Error</h2>
            <hr />
            
            <pre><code>func Error() string</code></pre>
         </article>
         
         <article class="function" data-name="Unwrap">
            <h2>Unwrap</h2>
            <hr />
            
            <pre><code>func Unwrap() error</code></pre>
         </article>
         
         <article class="function" data-name="NewGraph">
            <h2>NewGraph</h2>
            <hr />
            
            <p>NewGraph returns an incremental MVS graph containing only a set of root
dependencies and using the given max function for version strings.

The caller must ensure that the root slice is not modified while the Graph
may be in use.</p>
            
            <pre><code>func NewGraph(cmp func, roots []module.Version) *Graph</code></pre>
         </article>
         
         <article class="function" data-name="Require">
            <h2>Require</h2>
            <hr />
            
            <p>Require adds the information that module m requires all modules in reqs.
The reqs slice must not be modified after it is passed to Require.

m must be reachable by some existing chain of requirements from g's target,
and Require must not have been called for it already.

If any of the modules in reqs has the same path as g's target,
the target must have higher precedence than the version in req.</p>
            
            <pre><code>func Require(m module.Version, reqs []module.Version)</code></pre>
         </article>
         
         <article class="function" data-name="RequiredBy">
            <h2>RequiredBy</h2>
            <hr />
            
            <p>RequiredBy returns the slice of requirements passed to Require for m, if any,
with its capacity reduced to its length.
If Require has not been called for m, RequiredBy(m) returns ok=false.

The caller must not modify the returned slice, but may safely append to it
and may rely on it not to be modified.</p>
            
            <pre><code>func RequiredBy(m module.Version) (reqs []module.Version, ok bool)</code></pre>
         </article>
         
         <article class="function" data-name="Selected">
            <h2>Selected</h2>
            <hr />
            
            <p>Selected returns the selected version of the given module path.

If no version is selected, Selected returns version "none".</p>
            
            <pre><code>func Selected(path string) version string</code></pre>
         </article>
         
         <article class="function" data-name="BuildList">
            <h2>BuildList</h2>
            <hr />
            
            <p>BuildList returns the selected versions of all modules present in the Graph,
beginning with the selected versions of each module path in the roots of g.

The order of the remaining elements in the list is deterministic
but arbitrary.</p>
            
            <pre><code>func BuildList() []module.Version</code></pre>
         </article>
         
         <article class="function" data-name="WalkBreadthFirst">
            <h2>WalkBreadthFirst</h2>
            <hr />
            
            <p>WalkBreadthFirst invokes f once, in breadth-first order, for each module
version other than "none" that appears in the graph, regardless of whether
that version is selected.</p>
            
            <pre><code>func WalkBreadthFirst(f func)</code></pre>
         </article>
         
         <article class="function" data-name="FindPath">
            <h2>FindPath</h2>
            <hr />
            
            <p>FindPath reports a shortest requirement path starting at one of the roots of
the graph and ending at a module version m for which f(m) returns true, or
nil if no such path exists.</p>
            
            <pre><code>func FindPath(f func) []module.Version</code></pre>
         </article>
         
         <article class="function" data-name="BuildList">
            <h2>BuildList</h2>
            <hr />
            
            <p>BuildList returns the build list for the target module.

target is the root vertex of a module requirement graph. For cmd/go, this is
typically the main module, but note that this algorithm is not intended to
be Go-specific: module paths and versions are treated as opaque values.

reqs describes the module requirement graph and provides an opaque method
for comparing versions.

BuildList traverses the graph and returns a list containing the highest
version for each visited module. The first element of the returned list is
target itself; reqs.Max requires target.Version to compare higher than all
other versions, so no other version can be selected. The remaining elements
of the list are sorted by path.

See https://research.swtch.com/vgo-mvs for details.</p>
            
            <pre><code>func BuildList(targets []module.Version, reqs Reqs) ([]module.Version, error)</code></pre>
         </article>
         
         <article class="function" data-name="buildList">
            <h2>buildList</h2>
            <hr />
            
            <pre><code>func buildList(targets []module.Version, reqs Reqs, upgrade func) ([]module.Version, error)</code></pre>
         </article>
         
         <article class="function" data-name="Req">
            <h2>Req</h2>
            <hr />
            
            <p>Req returns the minimal requirement list for the target module,
with the constraint that all module paths listed in base must
appear in the returned list.</p>
            
            <pre><code>func Req(mainModule module.Version, base []string, reqs Reqs) ([]module.Version, error)</code></pre>
         </article>
         
         <article class="function" data-name="UpgradeAll">
            <h2>UpgradeAll</h2>
            <hr />
            
            <p>UpgradeAll returns a build list for the target module
in which every module is upgraded to its latest version.</p>
            
            <pre><code>func UpgradeAll(target module.Version, reqs UpgradeReqs) ([]module.Version, error)</code></pre>
         </article>
         
         <article class="function" data-name="Upgrade">
            <h2>Upgrade</h2>
            <hr />
            
            <p>Upgrade returns a build list for the target module
in which the given additional modules are upgraded.</p>
            
            <pre><code>func Upgrade(target module.Version, reqs UpgradeReqs, upgrade ...module.Version) ([]module.Version, error)</code></pre>
         </article>
         
         <article class="function" data-name="Downgrade">
            <h2>Downgrade</h2>
            <hr />
            
            <p>Downgrade returns a build list for the target module
in which the given additional modules are downgraded,
potentially overriding the requirements of the target.

The versions to be downgraded may be unreachable from reqs.Latest and
reqs.Previous, but the methods of reqs must otherwise handle such versions
correctly.</p>
            
            <pre><code>func Downgrade(target module.Version, reqs DowngradeReqs, downgrade ...module.Version) ([]module.Version, error)</code></pre>
         </article>
         
         <article class="function" data-name="Required">
            <h2>Required</h2>
            <hr />
            
            <pre><code>func Required(m module.Version) ([]module.Version, error)</code></pre>
         </article>
         
         <article class="function" data-name="Test">
            <h2>Test</h2>
            <hr />
            
            <pre><code>func Test(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="Max">
            <h2>Max</h2>
            <hr />
            
            <pre><code>func Max(_ string, v1 string, v2 string) string</code></pre>
         </article>
         
         <article class="function" data-name="Upgrade">
            <h2>Upgrade</h2>
            <hr />
            
            <pre><code>func Upgrade(m module.Version) (module.Version, error)</code></pre>
         </article>
         
         <article class="function" data-name="Previous">
            <h2>Previous</h2>
            <hr />
            
            <pre><code>func Previous(m module.Version) (module.Version, error)</code></pre>
         </article>
         
         <article class="function" data-name="Required">
            <h2>Required</h2>
            <hr />
            
            <pre><code>func Required(m module.Version) ([]module.Version, error)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
