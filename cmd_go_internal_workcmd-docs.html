<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - workcmd</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 14px;
            scroll-behavior: smooth;
         }

         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
            line-height: 1.6;
         }

         .sidebar {
            width: 12%;
            background: rgba(59, 56, 56, 0.15);
            padding: 1.5rem;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.4);
            overflow-y: auto;
            position: sticky;
            top: 0;
            height: 100vh;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
         }

         .sidebar::-webkit-scrollbar {
            width: 6px;
         }

         .sidebar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
         }

         .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
         }

         main {
            flex: 1;
            padding: 2rem;
            margin: 0;
            max-width: calc(100% - 280px);
            background: linear-gradient(
               135deg,
               rgba(59, 56, 56, 0.05) 0%,
               rgba(0, 0, 0, 0.1) 100%
            );
         }

         .nav-links {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
         }

         .nav-links a {
            color: #ddd;
            text-decoration: none;
            padding: 0.5rem;
            border-radius: 4px;
            transition: all 0.2s ease;
         }

         .nav-links a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
         }

         h1 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #fff 0%, #ddd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
         }

         h2 {
            font-size: 1.4rem;
            margin: 1rem 0 0.5rem;
            color: #f0f0f0;
         }

         h3 {
            font-size: 1.2rem;
            margin: 0.8rem 0 0.3rem;
            color: #e0e0e0;
         }

         .sidebar h2,
         .sidebar h3 {
            font-size: 1rem;
            margin: 0.5rem 0 0.3rem;
            color: #ccc;
         }

         pre {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e6e6e6;
            padding: 1rem 1.2rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.9rem;
            overflow-x: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
         }

         code {
            color: #f5f5f5;
            font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
            white-space: pre-wrap;
         }

         p {
            font-size: 15px;
            margin: 1rem 0;
            color: #ddd;
         }

         article {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(59, 56, 56, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
         }

         article:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
         }

         .hidden {
            display: none !important;
         }

         .filter-section {
            margin-bottom: 1.5rem;
         }

         .filter-section h3 {
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #aaa;
         }

         .filter-toggle label {
            display: flex;
            align-items: center;
            margin-bottom: 0.6rem;
            font-size: 0.85rem;
            color: #bbb;
            cursor: pointer;
            padding: 0.3rem;
            border-radius: 4px;
            transition: background 0.2s ease;
         }

         .filter-toggle label:hover {
            background: rgba(255, 255, 255, 0.05);
         }

         .filter-toggle input {
            margin-right: 0.6rem;
         }

         .field-line,
         .method-line {
            display: block;
         }

         #searchInput {
            width: 100%;
            margin-bottom: 1.5rem;
            border-radius: 8px !important;
            height: 2.8rem;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 0 1rem;
         }

         #searchInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
         }

         #searchInput:focus {
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
         }

         .section-divider {
            height: 1px;
            background: linear-gradient(
               90deg,
               transparent 0%,
               rgba(255, 255, 255, 0.3) 50%,
               transparent 100%
            );
            margin: 1.5rem 0;
         }

         .subpackage-list {
            list-style: none;
            padding: 0;
         }

         .subpackage-list li {
            margin-bottom: 0.4rem;
         }

         .subpackage-list a {
            display: block;
            padding: 0.5rem 0.8rem;
            color: #ccc;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.85rem;
         }

         .subpackage-list a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            transform: translateX(4px);
         }

         .empty-state {
            color: rgba(177, 175, 175, 0.6);
            font-style: italic;
            font-size: 0.8rem;
         }

         .badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            color: #ddd;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
            margin-left: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .method-badge {
            background: rgba(100, 200, 255, 0.2);
            color: #87ceeb;
         }

         .const-badge {
            background: rgba(255, 200, 100, 0.2);
            color: #ffd700;
         }

         .var-badge {
            background: rgba(200, 255, 100, 0.2);
            color: #90ee90;
         }

         .type-badge {
            background: rgba(255, 100, 200, 0.2);
            color: #699eff;
         }

         .interface-badge {
            background: rgba(150, 100, 255, 0.2);
            color: #dda0dd;
         }

         .toc {
            position: sticky;
            top: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
         }

         .toc h4 {
            margin: 0 0 0.8rem;
            font-size: 0.9rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
         }

         .toc li {
            margin-bottom: 0.3rem;
         }

         .toc a {
            color: #bbb;
            text-decoration: none;
            font-size: 0.8rem;
            transition: color 0.2s ease;
         }

         .toc a:hover {
            color: #fff;
         }

         @media (max-width: 768px) {
            body {
               flex-direction: column;
            }

            .sidebar {
               width: 90%;
               height: auto;
               position: relative;
            }

            main {
               max-width: 100%;
               padding: 1rem;
            }
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <div class="nav-links">
            <a href="index.html" title="Home">⌂</a>
            <span>|</span>
            <a href="#" onclick="history.back()" title="Back">←</a>
         </div>

         <div class="filter-section">
            <h3>Search</h3>
            <input
               type="search"
               id="searchInput"
               placeholder="Search symbols..."
            />
         </div>

         <div class="filter-section">
            <h3>Filters</h3>
            <div class="filter-toggle">
               <label>
                  <input type="checkbox" id="showImports" />
                  Show imports
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFunctions" />
                  Show private functions
               </label>
               <label>
                  <input type="checkbox" id="showPrivateStructs" />
                  Show private structs
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFields" />
                  Show private fields
               </label>
               <label>
                  <input type="checkbox" id="showPrivateGlobals" />
                  Show private globals
               </label>
               <label>
                  <input type="checkbox" id="showPrivateTypes" />
                  Show private types
               </label>
               <label>
                  <input type="checkbox" id="showPrivateInterfaces" />
                  Show private interfaces
               </label>
            </div>
         </div>

         <div class="section-divider"></div>

         <div class="filter-section">
            <h3>Subpackages</h3>
            
            <div class="empty-state">No subpackages</div>
            
         </div>

         
         <div class="section-divider"></div>

         <div class="toc">
            <h4>Quick Navigation</h4>
            <ul>
               
               <li><a href="#globals">Constants & Variables</a></li>
                
               <li><a href="#types">Type Aliases</a></li>
                 
               <li><a href="#structs">Structs</a></li>
                
               <li><a href="#functions">Functions</a></li>
               
            </ul>
         </div>
         
      </aside>

      <main>
         <h1>workcmd</h1>
         <div class="section-divider"></div>

         
         <section id="imports">
            <h2>Imports</h2>
            <article class="imports" data-name="imports">
               <pre><code>"context"
"fmt"
"io/fs"
"os"
"path/filepath"
"cmd/go/internal/base"
"cmd/go/internal/fsys"
"cmd/go/internal/gover"
"cmd/go/internal/modload"
"cmd/go/internal/str"
"cmd/go/internal/toolchain"
"golang.org/x/mod/modfile"
"cmd/go/internal/base"
"cmd/go/internal/cfg"
"cmd/go/internal/modcmd"
"cmd/go/internal/modload"
"context"
"cmd/go/internal/base"
"cmd/go/internal/base"
"cmd/go/internal/gover"
"cmd/go/internal/modload"
"context"
"encoding/json"
"fmt"
"os"
"path/filepath"
"strings"
"golang.org/x/mod/module"
"golang.org/x/mod/modfile"
"context"
"path/filepath"
"cmd/go/internal/base"
"cmd/go/internal/fsys"
"cmd/go/internal/gover"
"cmd/go/internal/modload"
"golang.org/x/mod/modfile"
"cmd/go/internal/base"
"cmd/go/internal/gover"
"cmd/go/internal/imports"
"cmd/go/internal/modload"
"cmd/go/internal/toolchain"
"context"
"golang.org/x/mod/module"
</code></pre>
            </article>
         </section>
          
         <section id="globals">
            <h2>Constants & Variables</h2>
            
            <article class="global" data-name="CmdWork">
               <h3>
                  CmdWork 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var CmdWork = *ast.UnaryExpr</code></pre>
            </article>
            
            <article class="global" data-name="cmdEdit">
               <h3>
                  cmdEdit 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var cmdEdit = *ast.UnaryExpr</code></pre>
            </article>
            
            <article class="global" data-name="cmdInit">
               <h3>
                  cmdInit 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var cmdInit = *ast.UnaryExpr</code></pre>
            </article>
            
            <article class="global" data-name="cmdSync">
               <h3>
                  cmdSync 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var cmdSync = *ast.UnaryExpr</code></pre>
            </article>
            
            <article class="global" data-name="cmdUse">
               <h3>
                  cmdUse 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var cmdUse = *ast.UnaryExpr</code></pre>
            </article>
            
            <article class="global" data-name="cmdVendor">
               <h3>
                  cmdVendor 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var cmdVendor = *ast.UnaryExpr</code></pre>
            </article>
            
            <article class="global" data-name="editFmt">
               <h3>
                  editFmt 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var editFmt = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="editGo">
               <h3>
                  editGo 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var editGo = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="editJSON">
               <h3>
                  editJSON 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var editJSON = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="editPrint">
               <h3>
                  editPrint 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var editPrint = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="editToolchain">
               <h3>
                  editToolchain 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var editToolchain = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="useR">
               <h3>
                  useR 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var useR = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="vendorE">
               <h3>
                  vendorE 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var vendorE bool</code></pre>
            </article>
            
            <article class="global" data-name="vendorO">
               <h3>
                  vendorO 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var vendorO string</code></pre>
            </article>
            
            <article class="global" data-name="workedits">
               <h3>
                  workedits 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var workedits []func(file *modfile.WorkFile)</code></pre>
            </article>
            
         </section>
          
         <section id="types">
            <h2>Type Aliases</h2>
            
            <article class="type" data-name="flagFunc">
               <h3>
                  flagFunc
                  <span class="badge type-badge">type</span>
               </h3>
               
               <pre><code>type flagFunc func(string)</code></pre>
            </article>
            
         </section>
           
         <section id="structs">
            <h2>Structs</h2>
            
            <article class="struct" data-name="replaceJSON">
               <h3>
                  replaceJSON
                  <span class="badge">struct</span>
               </h3>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type replaceJSON struct {
Old module.Version
New module.Version
}</code></pre>
            </article>
            
            <article class="struct" data-name="useJSON">
               <h3>
                  useJSON
                  <span class="badge">struct</span>
               </h3>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type useJSON struct {
DiskPath string
ModPath string `json:",omitempty"`
}</code></pre>
            </article>
            
            <article class="struct" data-name="workfileJSON">
               <h3>
                  workfileJSON
                  <span class="badge">struct</span>
               </h3>
               
               <p>workfileJSON is the -json output data structure.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type workfileJSON struct {
Go string `json:",omitempty"`
Use []useJSON
Replace []replaceJSON
}</code></pre>
            </article>
            
         </section>
          
         <section id="functions">
            <h2>Functions</h2>
            
            <article class="function" data-name="Set">
               <h3>
                  Set 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f flagFunc) Set(s string) error</code></pre>
            </article>
            
            <article class="function" data-name="String">
               <h3>
                  String 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f flagFunc) String() string</code></pre>
            </article>
            
            <article class="function" data-name="allowedVersionArg">
               <h3>
                  allowedVersionArg 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>allowedVersionArg returns whether a token may be used as a version in go.mod.
We don't call modfile.CheckPathVersion, because that insists on versions
being in semver form, but here we want to allow versions like "master" or
"1234abcdef", which the go command will resolve the next time it runs (or
during -fix).  Even so, we need to make sure the version is a valid token.</p>
               
               <pre><code>func allowedVersionArg(arg string) bool</code></pre>
            </article>
            
            <article class="function" data-name="editPrintJSON">
               <h3>
                  editPrintJSON 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>editPrintJSON prints the -json output.</p>
               
               <pre><code>func editPrintJSON(workFile *modfile.WorkFile)</code></pre>
            </article>
            
            <article class="function" data-name="flagEditworkDropGodebug">
               <h3>
                  flagEditworkDropGodebug 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>flagEditworkDropGodebug implements the -dropgodebug flag.</p>
               
               <pre><code>func flagEditworkDropGodebug(arg string)</code></pre>
            </article>
            
            <article class="function" data-name="flagEditworkDropReplace">
               <h3>
                  flagEditworkDropReplace 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>flagEditworkDropReplace implements the -dropreplace flag.</p>
               
               <pre><code>func flagEditworkDropReplace(arg string)</code></pre>
            </article>
            
            <article class="function" data-name="flagEditworkDropUse">
               <h3>
                  flagEditworkDropUse 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>flagEditworkDropUse implements the -dropuse flag.</p>
               
               <pre><code>func flagEditworkDropUse(arg string)</code></pre>
            </article>
            
            <article class="function" data-name="flagEditworkGodebug">
               <h3>
                  flagEditworkGodebug 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>flagEditworkGodebug implements the -godebug flag.</p>
               
               <pre><code>func flagEditworkGodebug(arg string)</code></pre>
            </article>
            
            <article class="function" data-name="flagEditworkReplace">
               <h3>
                  flagEditworkReplace 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>flagEditworkReplace implements the -replace flag.</p>
               
               <pre><code>func flagEditworkReplace(arg string)</code></pre>
            </article>
            
            <article class="function" data-name="flagEditworkUse">
               <h3>
                  flagEditworkUse 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>flagEditworkUse implements the -use flag.</p>
               
               <pre><code>func flagEditworkUse(arg string)</code></pre>
            </article>
            
            <article class="function" data-name="init">
               <h3>
                  init 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func init()</code></pre>
            </article>
            
            <article class="function" data-name="init">
               <h3>
                  init 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func init()</code></pre>
            </article>
            
            <article class="function" data-name="init">
               <h3>
                  init 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func init()</code></pre>
            </article>
            
            <article class="function" data-name="init">
               <h3>
                  init 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func init()</code></pre>
            </article>
            
            <article class="function" data-name="init">
               <h3>
                  init 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func init()</code></pre>
            </article>
            
            <article class="function" data-name="parsePathVersionOptional">
               <h3>
                  parsePathVersionOptional 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>parsePathVersionOptional parses path[@version], using adj to
describe any errors.</p>
               
               <pre><code>func parsePathVersionOptional(adj string, arg string, allowDirPath bool) (path string, version string, err error)</code></pre>
            </article>
            
            <article class="function" data-name="pathRel">
               <h3>
                  pathRel 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>pathRel returns the absolute and canonical forms of dir for use in a
go.work file located in directory workDir.
If dir is relative, it is interpreted relative to base.Cwd()
and its canonical form is relative to workDir if possible.
If dir is absolute or cannot be made relative to workDir,
its canonical form is absolute.
Canonical absolute paths are clean.
Canonical relative paths are clean and slash-separated.</p>
               
               <pre><code>func pathRel(workDir string, dir string) (abs string, canonical string)</code></pre>
            </article>
            
            <article class="function" data-name="runEditwork">
               <h3>
                  runEditwork 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func runEditwork(ctx context.Context, cmd *base.Command, args []string)</code></pre>
            </article>
            
            <article class="function" data-name="runInit">
               <h3>
                  runInit 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func runInit(ctx context.Context, cmd *base.Command, args []string)</code></pre>
            </article>
            
            <article class="function" data-name="runSync">
               <h3>
                  runSync 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func runSync(ctx context.Context, cmd *base.Command, args []string)</code></pre>
            </article>
            
            <article class="function" data-name="runUse">
               <h3>
                  runUse 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func runUse(ctx context.Context, cmd *base.Command, args []string)</code></pre>
            </article>
            
            <article class="function" data-name="runVendor">
               <h3>
                  runVendor 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func runVendor(ctx context.Context, cmd *base.Command, args []string)</code></pre>
            </article>
            
            <article class="function" data-name="workUse">
               <h3>
                  workUse 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func workUse(ctx context.Context, gowork string, wf *modfile.WorkFile, args []string)</code></pre>
            </article>
            
         </section>
         
      </main>

      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }

         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               imports: document.getElementById("showImports"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
               types: document.getElementById("showPrivateTypes"),
               interfaces: document.getElementById(
                  "showPrivateInterfaces"
               ),
            };

            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });

               if (toggle) {
                  toggle.addEventListener("change", () => {
                     const show = toggle.checked;
                     document
                        .querySelectorAll(`${selector}.private`)
                        .forEach((el) => {
                           el.classList.toggle("hidden", !show);
                        });
                  });
               }
            };

            hideInitial("article.imports", toggles.imports);
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            hideInitial("article.type", toggles.types);
            hideInitial("article.interface", toggles.interfaces);

            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;

                  const lines = codeBlock.innerHTML.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch && trimmed != "}") {
                           return `<span class="field-line">${line}</span>`;
                        }
                        if (nameMatch == null) return;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class="field-line${
                           isPriv ? " hidden private" : ""
                        }" data-name="${name}">${line}</span>`;
                     })
                     .join("");

                  codeBlock.innerHTML = newContent;

                  if (toggles.fields) {
                     toggles.fields.addEventListener("change", () => {
                        const show = toggles.fields.checked;
                        article
                           .querySelectorAll(".field-line.private")
                           .forEach((el) =>
                              el.classList.toggle("hidden", !show)
                           );
                     });
                  }
               });

            // Handle private methods in interfaces
            document
               .querySelectorAll("article.interface")
               .forEach((article) => {
                  const codeBlock = article.querySelector(
                     "code.methods-code"
                  );
                  if (!codeBlock) return;

                  const lines = codeBlock.innerHTML.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch) {
                           return `<span class="method-line">${line}</span>`;
                        }

                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class="method-line${
                           isPriv ? " hidden private" : ""
                        }" data-name="${name}">${line}</span>`;
                     })
                     .join("");

                  codeBlock.innerHTML = newContent;

                  if (toggles.fields) {
                     // Reuse fields toggle for interface methods
                     toggles.fields.addEventListener("change", () => {
                        const show = toggles.fields.checked;
                        article
                           .querySelectorAll(".method-line.private")
                           .forEach((el) =>
                              el.classList.toggle("hidden", !show)
                           );
                     });
                  }
               });

            const searchInput = document.getElementById("searchInput");
            if (searchInput) {
               searchInput.addEventListener("input", () => {
                  const query = searchInput.value.trim().toLowerCase();

                  document.querySelectorAll("article").forEach((el) => {
                     const name = el.dataset.name;
                     if (!name) return;

                     const matches =
                        query === "" ||
                        name.toLowerCase().includes(query) ||
                        (el.textContent &&
                           el.textContent.toLowerCase().includes(query));

                     if (matches) {
                        // Only show if not hidden by privacy filters
                        const isPrivateEl =
                           el.classList.contains("private");
                        const shouldShowPrivate =
                           getPrivateToggleState(el);

                        if (!isPrivateEl || shouldShowPrivate) {
                           el.classList.remove("hidden");
                        }
                     } else {
                        el.classList.add("hidden");
                     }
                  });
               });
            }

            // Helper function to check if private elements should be shown
            function getPrivateToggleState(element) {
               if (element.classList.contains("function")) {
                  return toggles.functions?.checked || false;
               } else if (element.classList.contains("struct")) {
                  return toggles.structs?.checked || false;
               } else if (element.classList.contains("global")) {
                  return toggles.globals?.checked || false;
               } else if (element.classList.contains("type")) {
                  return toggles.types?.checked || false;
               } else if (element.classList.contains("interface")) {
                  return toggles.interfaces?.checked || false;
               } else if (element.classList.contains("imports")) {
                  return toggles.imports?.checked || false;
               }
               return false;
            }

            document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
               anchor.addEventListener("click", function (e) {
                  e.preventDefault();
                  const target = document.querySelector(
                     this.getAttribute("href")
                  );
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               });
            });
         });
      </script>
   </body>
</html>
