<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - fsys</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 14px;
            scroll-behavior: smooth;
         }

         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
            line-height: 1.6;
         }

         .sidebar {
            width: 12%;
            background: rgba(59, 56, 56, 0.15);
            padding: 1.5rem;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.4);
            overflow-y: auto;
            position: sticky;
            top: 0;
            height: 100vh;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
         }

         .sidebar::-webkit-scrollbar {
            width: 6px;
         }

         .sidebar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
         }

         .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
         }

         main {
            flex: 1;
            padding: 2rem;
            margin: 0;
            max-width: calc(100% - 280px);
            background: linear-gradient(
               135deg,
               rgba(59, 56, 56, 0.05) 0%,
               rgba(0, 0, 0, 0.1) 100%
            );
         }

         .nav-links {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
         }

         .nav-links a {
            color: #ddd;
            text-decoration: none;
            padding: 0.5rem;
            border-radius: 4px;
            transition: all 0.2s ease;
         }

         .nav-links a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
         }

         h1 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #fff 0%, #ddd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
         }

         h2 {
            font-size: 1.4rem;
            margin: 1rem 0 0.5rem;
            color: #f0f0f0;
         }

         h3 {
            font-size: 1.2rem;
            margin: 0.8rem 0 0.3rem;
            color: #e0e0e0;
         }

         .sidebar h2,
         .sidebar h3 {
            font-size: 1rem;
            margin: 0.5rem 0 0.3rem;
            color: #ccc;
         }

         pre {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e6e6e6;
            padding: 1rem 1.2rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.9rem;
            overflow-x: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
         }

         code {
            color: #f5f5f5;
            font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
            white-space: pre-wrap;
         }

         p {
            font-size: 15px;
            margin: 1rem 0;
            color: #ddd;
         }

         article {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(59, 56, 56, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
         }

         article:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
         }

         .hidden {
            display: none !important;
         }

         .filter-section {
            margin-bottom: 1.5rem;
         }

         .filter-section h3 {
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #aaa;
         }

         .filter-toggle label {
            display: flex;
            align-items: center;
            margin-bottom: 0.6rem;
            font-size: 0.85rem;
            color: #bbb;
            cursor: pointer;
            padding: 0.3rem;
            border-radius: 4px;
            transition: background 0.2s ease;
         }

         .filter-toggle label:hover {
            background: rgba(255, 255, 255, 0.05);
         }

         .filter-toggle input {
            margin-right: 0.6rem;
         }

         .field-line,
         .method-line {
            display: block;
         }

         #searchInput {
            width: 100%;
            margin-bottom: 1.5rem;
            border-radius: 8px !important;
            height: 2.8rem;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 0 1rem;
         }

         #searchInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
         }

         #searchInput:focus {
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
         }

         .section-divider {
            height: 1px;
            background: linear-gradient(
               90deg,
               transparent 0%,
               rgba(255, 255, 255, 0.3) 50%,
               transparent 100%
            );
            margin: 1.5rem 0;
         }

         .subpackage-list {
            list-style: none;
            padding: 0;
         }

         .subpackage-list li {
            margin-bottom: 0.4rem;
         }

         .subpackage-list a {
            display: block;
            padding: 0.5rem 0.8rem;
            color: #ccc;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.85rem;
         }

         .subpackage-list a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            transform: translateX(4px);
         }

         .empty-state {
            color: rgba(177, 175, 175, 0.6);
            font-style: italic;
            font-size: 0.8rem;
         }

         .badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            color: #ddd;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
            margin-left: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .method-badge {
            background: rgba(100, 200, 255, 0.2);
            color: #87ceeb;
         }

         .const-badge {
            background: rgba(255, 200, 100, 0.2);
            color: #ffd700;
         }

         .var-badge {
            background: rgba(200, 255, 100, 0.2);
            color: #90ee90;
         }

         .type-badge {
            background: rgba(255, 100, 200, 0.2);
            color: #699eff;
         }

         .interface-badge {
            background: rgba(150, 100, 255, 0.2);
            color: #dda0dd;
         }

         .toc {
            position: sticky;
            top: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
         }

         .toc h4 {
            margin: 0 0 0.8rem;
            font-size: 0.9rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
         }

         .toc li {
            margin-bottom: 0.3rem;
         }

         .toc a {
            color: #bbb;
            text-decoration: none;
            font-size: 0.8rem;
            transition: color 0.2s ease;
         }

         .toc a:hover {
            color: #fff;
         }

         @media (max-width: 768px) {
            body {
               flex-direction: column;
            }

            .sidebar {
               width: 90%;
               height: auto;
               position: relative;
            }

            main {
               max-width: 100%;
               padding: 1rem;
            }
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <div class="nav-links">
            <a href="index.html" title="Home">⌂</a>
            <span>|</span>
            <a href="#" onclick="history.back()" title="Back">←</a>
         </div>

         <div class="filter-section">
            <h3>Search</h3>
            <input
               type="search"
               id="searchInput"
               placeholder="Search symbols..."
            />
         </div>

         <div class="filter-section">
            <h3>Filters</h3>
            <div class="filter-toggle">
               <label>
                  <input type="checkbox" id="showImports" />
                  Show imports
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFunctions" />
                  Show private functions
               </label>
               <label>
                  <input type="checkbox" id="showPrivateStructs" />
                  Show private structs
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFields" />
                  Show private fields
               </label>
               <label>
                  <input type="checkbox" id="showPrivateGlobals" />
                  Show private globals
               </label>
               <label>
                  <input type="checkbox" id="showPrivateTypes" />
                  Show private types
               </label>
               <label>
                  <input type="checkbox" id="showPrivateInterfaces" />
                  Show private interfaces
               </label>
            </div>
         </div>

         <div class="section-divider"></div>

         <div class="filter-section">
            <h3>Subpackages</h3>
            
            <div class="empty-state">No subpackages</div>
            
         </div>

         
         <div class="section-divider"></div>

         <div class="toc">
            <h4>Quick Navigation</h4>
            <ul>
               
               <li><a href="#globals">Constants & Variables</a></li>
                
               <li><a href="#types">Type Aliases</a></li>
                 
               <li><a href="#structs">Structs</a></li>
                
               <li><a href="#functions">Functions</a></li>
               
            </ul>
         </div>
         
      </aside>

      <main>
         <h1>fsys</h1>
         <div class="section-divider"></div>

         
         <section id="imports">
            <h2>Imports</h2>
            <article class="imports" data-name="imports">
               <pre><code>"cmd/go/internal/str"
"encoding/json"
"errors"
"fmt"
"internal/godebug"
"io"
"io/fs"
"iter"
"log"
"maps"
"os"
pathpkg "path"
"path/filepath"
"runtime/debug"
"slices"
"strings"
"sync"
"time"
"os"
"path/filepath"
"runtime"
"sort"
"strings"
"io/fs"
"path/filepath"
</code></pre>
            </article>
         </section>
          
         <section id="globals">
            <h2>Constants & Variables</h2>
            
            <article class="global" data-name="OverlayFile">
               <h3>
                  OverlayFile 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <p>OverlayFile is the -overlay flag value.
It names a file containing the JSON for an overlayJSON struct.</p>
               
               <pre><code>var OverlayFile string</code></pre>
            </article>
            
            <article class="global" data-name="binds">
               <h3>
                  binds 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var binds []replace</code></pre>
            </article>
            
            <article class="global" data-name="cwd">
               <h3>
                  cwd 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <p>cwd returns the current directory, caching it on first use.</p>
               
               <pre><code>var cwd = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="doTrace">
               <h3>
                  doTrace 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var doTrace bool</code></pre>
            </article>
            
            <article class="global" data-name="errNotDir">
               <h3>
                  errNotDir 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <p>errNotDir is used to communicate from ReadDir to IsGoDir
that the argument is not a directory, so that IsGoDir doesn't
return an error.</p>
               
               <pre><code>var errNotDir = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="gofsystrace">
               <h3>
                  gofsystrace 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var gofsystrace = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="gofsystracelog">
               <h3>
                  gofsystracelog 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var gofsystracelog = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="gofsystracestack">
               <h3>
                  gofsystracestack 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var gofsystracestack = *ast.CallExpr</code></pre>
            </article>
            
            <article class="global" data-name="overlay">
               <h3>
                  overlay 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <p>overlay is a list of replacements to be applied, sorted by cmp of the from field.
cmp sorts the filepath.Separator less than any other byte so that x is always
just before any children x/a, x/b, and so on, before x.go. (This would not
be the case with byte-wise sorting, which would produce x, x.go, x/a.)
The sorting lets us find the relevant overlay entry quickly even if it is for a
parent of the path being searched.</p>
               
               <pre><code>var overlay []replace</code></pre>
            </article>
            
            <article class="global" data-name="traceFile">
               <h3>
                  traceFile 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var traceFile *os.File</code></pre>
            </article>
            
            <article class="global" data-name="traceMu">
               <h3>
                  traceMu 
                  <span class="badge var-badge">var</span>
                  
               </h3>
               
               <pre><code>var traceMu sync.Mutex</code></pre>
            </article>
            
         </section>
          
         <section id="types">
            <h2>Type Aliases</h2>
            
            <article class="type" data-name="fakeDir">
               <h3>
                  fakeDir
                  <span class="badge type-badge">type</span>
               </h3>
               
               <p>fakeDir provides an fs.FileInfo implementation for directories that are
implicitly created by overlaid files. Each directory in the
path of an overlaid file is considered to exist in the overlay filesystem.</p>
               
               <pre><code>type fakeDir string</code></pre>
            </article>
            
            <article class="type" data-name="missingFile">
               <h3>
                  missingFile
                  <span class="badge type-badge">type</span>
               </h3>
               
               <p>missingFile provides an fs.FileInfo for an overlaid file where the
destination file in the overlay doesn't exist. It returns zero values
for the fileInfo methods other than Name, set to the file's name, and Mode
set to ModeIrregular.</p>
               
               <pre><code>type missingFile string</code></pre>
            </article>
            
         </section>
           
         <section id="structs">
            <h2>Structs</h2>
            
            <article class="struct" data-name="fakeFile">
               <h3>
                  fakeFile
                  <span class="badge">struct</span>
               </h3>
               
               <p>fakeFile provides an fs.FileInfo implementation for an overlaid file,
so that the file has the name of the overlaid file, but takes all
other characteristics of the replacement file.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type fakeFile struct {
name string
real fs.FileInfo
}</code></pre>
            </article>
            
            <article class="struct" data-name="info">
               <h3>
                  info
                  <span class="badge">struct</span>
               </h3>
               
               <p>info is a summary of the known information about a path
being looked up in the virtual file system.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type info struct {
abs string
deleted bool
replaced bool
dir bool
file bool
actual string
}</code></pre>
            </article>
            
            <article class="struct" data-name="overlayJSON">
               <h3>
                  overlayJSON
                  <span class="badge">struct</span>
               </h3>
               
               <p>overlayJSON is the format for the -overlay file.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type overlayJSON struct {
Replace map[string]string
}</code></pre>
            </article>
            
            <article class="struct" data-name="replace">
               <h3>
                  replace
                  <span class="badge">struct</span>
               </h3>
               
               <p>A replace represents a single replaced path.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code">type replace struct {
from string
to string
}</code></pre>
            </article>
            
         </section>
          
         <section id="functions">
            <h2>Functions</h2>
            
            <article class="function" data-name="Actual">
               <h3>
                  Actual 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>Actual returns the actual file system path for the named file.
It returns the empty string if name has been deleted in the virtual file system.</p>
               
               <pre><code>func Actual(name string) string</code></pre>
            </article>
            
            <article class="function" data-name="Bind">
               <h3>
                  Bind 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>Bind makes the virtual file system use dir as if it were mounted at mtpt,
like Plan 9's “bind” or Linux's “mount --bind”, or like os.Symlink
but without the symbolic link.
For now, the behavior of using Bind on multiple overlapping
mountpoints (for example Bind("x", "/a") and Bind("y", "/a/b"))
is undefined.</p>
               
               <pre><code>func Bind(dir string, mtpt string)</code></pre>
            </article>
            
            <article class="function" data-name="Glob">
               <h3>
                  Glob 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>Glob is like filepath.Glob but uses the overlay file system.</p>
               
               <pre><code>func Glob(pattern string) (matches []string, err error)</code></pre>
            </article>
            
            <article class="function" data-name="Init">
               <h3>
                  Init 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>Init initializes the overlay, if one is being used.</p>
               
               <pre><code>func Init() error</code></pre>
            </article>
            
            <article class="function" data-name="IsDir">
               <h3>
                  IsDir 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>IsDir returns true if path is a directory on disk or in the
overlay.</p>
               
               <pre><code>func IsDir(path string) (bool, error)</code></pre>
            </article>
            
            <article class="function" data-name="IsDir">
               <h3>
                  IsDir 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeDir) IsDir() bool</code></pre>
            </article>
            
            <article class="function" data-name="IsDir">
               <h3>
                  IsDir 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f missingFile) IsDir() bool</code></pre>
            </article>
            
            <article class="function" data-name="IsDir">
               <h3>
                  IsDir 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeFile) IsDir() bool</code></pre>
            </article>
            
            <article class="function" data-name="IsGoDir">
               <h3>
                  IsGoDir 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>IsGoDir reports whether the named directory in the virtual file system
is a directory containing one or more Go source files.</p>
               
               <pre><code>func IsGoDir(name string) (bool, error)</code></pre>
            </article>
            
            <article class="function" data-name="Lstat">
               <h3>
                  Lstat 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>Lstat returns a FileInfo describing the named file in the virtual file system.
It does not follow symbolic links</p>
               
               <pre><code>func Lstat(name string) (fs.FileInfo, error)</code></pre>
            </article>
            
            <article class="function" data-name="ModTime">
               <h3>
                  ModTime 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeDir) ModTime() time.Time</code></pre>
            </article>
            
            <article class="function" data-name="ModTime">
               <h3>
                  ModTime 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeFile) ModTime() time.Time</code></pre>
            </article>
            
            <article class="function" data-name="ModTime">
               <h3>
                  ModTime 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f missingFile) ModTime() time.Time</code></pre>
            </article>
            
            <article class="function" data-name="Mode">
               <h3>
                  Mode 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f missingFile) Mode() fs.FileMode</code></pre>
            </article>
            
            <article class="function" data-name="Mode">
               <h3>
                  Mode 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeFile) Mode() fs.FileMode</code></pre>
            </article>
            
            <article class="function" data-name="Mode">
               <h3>
                  Mode 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeDir) Mode() fs.FileMode</code></pre>
            </article>
            
            <article class="function" data-name="Name">
               <h3>
                  Name 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeDir) Name() string</code></pre>
            </article>
            
            <article class="function" data-name="Name">
               <h3>
                  Name 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f missingFile) Name() string</code></pre>
            </article>
            
            <article class="function" data-name="Name">
               <h3>
                  Name 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeFile) Name() string</code></pre>
            </article>
            
            <article class="function" data-name="Open">
               <h3>
                  Open 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>Open opens the named file in the virtual file system.
It must be an ordinary file, not a directory.</p>
               
               <pre><code>func Open(name string) (*os.File, error)</code></pre>
            </article>
            
            <article class="function" data-name="ReadDir">
               <h3>
                  ReadDir 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>ReadDir reads the named directory in the virtual file system.</p>
               
               <pre><code>func ReadDir(name string) ([]fs.DirEntry, error)</code></pre>
            </article>
            
            <article class="function" data-name="ReadFile">
               <h3>
                  ReadFile 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>ReadFile reads the named file from the virtual file system
and returns the contents.</p>
               
               <pre><code>func ReadFile(name string) ([]byte, error)</code></pre>
            </article>
            
            <article class="function" data-name="Replaced">
               <h3>
                  Replaced 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>Replaced reports whether the named file has been modified
in the virtual file system compared to the OS file system.</p>
               
               <pre><code>func Replaced(name string) bool</code></pre>
            </article>
            
            <article class="function" data-name="Size">
               <h3>
                  Size 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeFile) Size() int64</code></pre>
            </article>
            
            <article class="function" data-name="Size">
               <h3>
                  Size 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeDir) Size() int64</code></pre>
            </article>
            
            <article class="function" data-name="Size">
               <h3>
                  Size 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f missingFile) Size() int64</code></pre>
            </article>
            
            <article class="function" data-name="Stat">
               <h3>
                  Stat 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>Stat returns a FileInfo describing the named file in the virtual file system.
It follows symbolic links.</p>
               
               <pre><code>func Stat(name string) (fs.FileInfo, error)</code></pre>
            </article>
            
            <article class="function" data-name="String">
               <h3>
                  String 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeDir) String() string</code></pre>
            </article>
            
            <article class="function" data-name="String">
               <h3>
                  String 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeFile) String() string</code></pre>
            </article>
            
            <article class="function" data-name="String">
               <h3>
                  String 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f missingFile) String() string</code></pre>
            </article>
            
            <article class="function" data-name="Sys">
               <h3>
                  Sys 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f missingFile) Sys() any</code></pre>
            </article>
            
            <article class="function" data-name="Sys">
               <h3>
                  Sys 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeDir) Sys() any</code></pre>
            </article>
            
            <article class="function" data-name="Sys">
               <h3>
                  Sys 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <pre><code>func (f fakeFile) Sys() any</code></pre>
            </article>
            
            <article class="function" data-name="Trace">
               <h3>
                  Trace 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>Trace emits a trace event for the operation and file path to the trace log,
but only when $GODEBUG contains gofsystrace=1.
The traces are appended to the file named by the $GODEBUG setting gofsystracelog, or else standard error.
For debugging, if the $GODEBUG setting gofsystracestack is non-empty, then trace events for paths
matching that glob pattern (using path.Match) will be followed by a full stack trace.</p>
               
               <pre><code>func Trace(op string, path string)</code></pre>
            </article>
            
            <article class="function" data-name="WalkDir">
               <h3>
                  WalkDir 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>WalkDir is like filepath.WalkDir but over the virtual file system.</p>
               
               <pre><code>func WalkDir(root string, fn fs.WalkDirFunc) error</code></pre>
            </article>
            
            <article class="function" data-name="abs">
               <h3>
                  abs 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>abs returns the absolute form of path, for looking up in the overlay map.
For the most part, this is filepath.Abs and filepath.Clean,
except that Windows requires special handling, as always.</p>
               
               <pre><code>func abs(path string) string</code></pre>
            </article>
            
            <article class="function" data-name="children">
               <h3>
                  children 
                  <span class="badge method-badge">method</span>
                  
               </h3>
               
               <p>children returns a sequence of (name, info)
for all the children of the directory i
implied by the overlay.</p>
               
               <pre><code>func (i *info) children() *ast.IndexListExpr</code></pre>
            </article>
            
            <article class="function" data-name="cleanGlobPath">
               <h3>
                  cleanGlobPath 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>cleanGlobPath prepares path for glob matching.</p>
               
               <pre><code>func cleanGlobPath(path string) string</code></pre>
            </article>
            
            <article class="function" data-name="cleanGlobPathWindows">
               <h3>
                  cleanGlobPathWindows 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>cleanGlobPathWindows is windows version of cleanGlobPath.</p>
               
               <pre><code>func cleanGlobPathWindows(path string) (prefixLen int, cleaned string)</code></pre>
            </article>
            
            <article class="function" data-name="cmp">
               <h3>
                  cmp 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func cmp(x string, y string) int</code></pre>
            </article>
            
            <article class="function" data-name="cwdOnce">
               <h3>
                  cwdOnce 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func cwdOnce() string</code></pre>
            </article>
            
            <article class="function" data-name="glob">
               <h3>
                  glob 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>glob searches for files matching pattern in the directory dir
and appends them to matches. If the directory cannot be
opened, it returns the existing matches. New matches are
added in lexicographical order.</p>
               
               <pre><code>func glob(dir string, pattern string, matches []string) (m []string, e error)</code></pre>
            </article>
            
            <article class="function" data-name="hasMeta">
               <h3>
                  hasMeta 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>hasMeta reports whether path contains any of the magic characters
recognized by filepath.Match.</p>
               
               <pre><code>func hasMeta(path string) bool</code></pre>
            </article>
            
            <article class="function" data-name="init">
               <h3>
                  init 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func init()</code></pre>
            </article>
            
            <article class="function" data-name="initFromJSON">
               <h3>
                  initFromJSON 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func initFromJSON(js []byte) error</code></pre>
            </article>
            
            <article class="function" data-name="osReadDir">
               <h3>
                  osReadDir 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>osReadDir is like os.ReadDir corrects the error to be errNotDir
if the problem is that name exists but is not a directory.</p>
               
               <pre><code>func osReadDir(name string) ([]fs.DirEntry, error)</code></pre>
            </article>
            
            <article class="function" data-name="overlayStat">
               <h3>
                  overlayStat 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>overlayStat implements lstat or Stat (depending on whether os.Lstat or os.Stat is passed in).</p>
               
               <pre><code>func overlayStat(op string, path string, osStat func(string) (fs.FileInfo, error)) (fs.FileInfo, error)</code></pre>
            </article>
            
            <article class="function" data-name="searchcmp">
               <h3>
                  searchcmp 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func searchcmp(r replace, t string) int</code></pre>
            </article>
            
            <article class="function" data-name="stat">
               <h3>
                  stat 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>stat returns info about the path in the virtual file system.</p>
               
               <pre><code>func stat(path string) info</code></pre>
            </article>
            
            <article class="function" data-name="volumeNameLen">
               <h3>
                  volumeNameLen 
                  <span class="badge">function</span>
                  
               </h3>
               
               <pre><code>func volumeNameLen(path string) int</code></pre>
            </article>
            
            <article class="function" data-name="walkDir">
               <h3>
                  walkDir 
                  <span class="badge">function</span>
                  
               </h3>
               
               <p>walkDir recursively descends path, calling walkDirFn.</p>
               
               <pre><code>func walkDir(path string, d fs.DirEntry, walkDirFn fs.WalkDirFunc) error</code></pre>
            </article>
            
         </section>
         
      </main>

      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }

         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               imports: document.getElementById("showImports"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
               types: document.getElementById("showPrivateTypes"),
               interfaces: document.getElementById(
                  "showPrivateInterfaces"
               ),
            };

            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });

               if (toggle) {
                  toggle.addEventListener("change", () => {
                     const show = toggle.checked;
                     document
                        .querySelectorAll(`${selector}.private`)
                        .forEach((el) => {
                           el.classList.toggle("hidden", !show);
                        });
                  });
               }
            };

            hideInitial("article.imports", toggles.imports);
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            hideInitial("article.type", toggles.types);
            hideInitial("article.interface", toggles.interfaces);

            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;

                  const lines = codeBlock.innerHTML.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch && trimmed != "}") {
                           return `<span class="field-line">${line}</span>`;
                        }
                        if (nameMatch == null) return;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class="field-line${
                           isPriv ? " hidden private" : ""
                        }" data-name="${name}">${line}</span>`;
                     })
                     .join("");

                  codeBlock.innerHTML = newContent;

                  if (toggles.fields) {
                     toggles.fields.addEventListener("change", () => {
                        const show = toggles.fields.checked;
                        article
                           .querySelectorAll(".field-line.private")
                           .forEach((el) =>
                              el.classList.toggle("hidden", !show)
                           );
                     });
                  }
               });

            // Handle private methods in interfaces
            document
               .querySelectorAll("article.interface")
               .forEach((article) => {
                  const codeBlock = article.querySelector(
                     "code.methods-code"
                  );
                  if (!codeBlock) return;

                  const lines = codeBlock.innerHTML.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch) {
                           return `<span class="method-line">${line}</span>`;
                        }

                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class="method-line${
                           isPriv ? " hidden private" : ""
                        }" data-name="${name}">${line}</span>`;
                     })
                     .join("");

                  codeBlock.innerHTML = newContent;

                  if (toggles.fields) {
                     // Reuse fields toggle for interface methods
                     toggles.fields.addEventListener("change", () => {
                        const show = toggles.fields.checked;
                        article
                           .querySelectorAll(".method-line.private")
                           .forEach((el) =>
                              el.classList.toggle("hidden", !show)
                           );
                     });
                  }
               });

            const searchInput = document.getElementById("searchInput");
            if (searchInput) {
               searchInput.addEventListener("input", () => {
                  const query = searchInput.value.trim().toLowerCase();

                  document.querySelectorAll("article").forEach((el) => {
                     const name = el.dataset.name;
                     if (!name) return;

                     const matches =
                        query === "" ||
                        name.toLowerCase().includes(query) ||
                        (el.textContent &&
                           el.textContent.toLowerCase().includes(query));

                     if (matches) {
                        // Only show if not hidden by privacy filters
                        const isPrivateEl =
                           el.classList.contains("private");
                        const shouldShowPrivate =
                           getPrivateToggleState(el);

                        if (!isPrivateEl || shouldShowPrivate) {
                           el.classList.remove("hidden");
                        }
                     } else {
                        el.classList.add("hidden");
                     }
                  });
               });
            }

            // Helper function to check if private elements should be shown
            function getPrivateToggleState(element) {
               if (element.classList.contains("function")) {
                  return toggles.functions?.checked || false;
               } else if (element.classList.contains("struct")) {
                  return toggles.structs?.checked || false;
               } else if (element.classList.contains("global")) {
                  return toggles.globals?.checked || false;
               } else if (element.classList.contains("type")) {
                  return toggles.types?.checked || false;
               } else if (element.classList.contains("interface")) {
                  return toggles.interfaces?.checked || false;
               } else if (element.classList.contains("imports")) {
                  return toggles.imports?.checked || false;
               }
               return false;
            }

            document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
               anchor.addEventListener("click", function (e) {
                  e.preventDefault();
                  const target = document.querySelector(
                     this.getAttribute("href")
                  );
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               });
            });
         });
      </script>
   </body>
</html>
