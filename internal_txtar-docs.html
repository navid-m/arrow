<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - txtar</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>txtar</code>
         </h1>
         <hr />
         
         <article class="global" data-name="newlineMarker">
            <h2>newlineMarker</h2>
            <hr />
            
            <pre><code>newlineMarker</code></pre>
         </article>
         
         <article class="global" data-name="marker">
            <h2>marker</h2>
            <hr />
            
            <pre><code>marker</code></pre>
         </article>
         
         <article class="global" data-name="markerEnd">
            <h2>markerEnd</h2>
            <hr />
            
            <pre><code>markerEnd</code></pre>
         </article>
          
         <article class="struct" data-name="Archive">
            <h2>type Archive struct</h2>
            <hr />
            
            <p>An Archive is a collection of files.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">Comment []byte
Files []File</code></pre>
         </article>
         
         <article class="struct" data-name="File">
            <h2>type File struct</h2>
            <hr />
            
            <p>A File is a single file in an archive.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">Name string
Data []byte</code></pre>
         </article>
          
         <article class="function" data-name="Format">
            <h2>Format</h2>
            <hr />
            
            <p>Format returns the serialized form of an Archive.
It is assumed that the Archive data structure is well-formed:
a.Comment and all a.File[i].Data contain no file marker lines,
and all a.File[i].Name is non-empty.</p>
            
            <pre><code>func Format(a *Archive) []byte</code></pre>
         </article>
         
         <article class="function" data-name="ParseFile">
            <h2>ParseFile</h2>
            <hr />
            
            <p>ParseFile parses the named file as an archive.</p>
            
            <pre><code>func ParseFile(file string) (*Archive, error)</code></pre>
         </article>
         
         <article class="function" data-name="Parse">
            <h2>Parse</h2>
            <hr />
            
            <p>Parse parses the serialized form of an Archive.
The returned Archive holds slices of data.</p>
            
            <pre><code>func Parse(data []byte) *Archive</code></pre>
         </article>
         
         <article class="function" data-name="findFileMarker">
            <h2>findFileMarker</h2>
            <hr />
            
            <p>findFileMarker finds the next file marker in data,
extracts the file name, and returns the data before the marker,
the file name, and the data after the marker.
If there is no next marker, findFileMarker returns before = fixNL(data), name = "", after = nil.</p>
            
            <pre><code>func findFileMarker(data []byte) (before []byte, name string, after []byte)</code></pre>
         </article>
         
         <article class="function" data-name="isMarker">
            <h2>isMarker</h2>
            <hr />
            
            <p>isMarker checks whether data begins with a file marker line.
If so, it returns the name from the line and the data after the line.
Otherwise it returns name == "" with an unspecified after.</p>
            
            <pre><code>func isMarker(data []byte) (name string, after []byte)</code></pre>
         </article>
         
         <article class="function" data-name="fixNL">
            <h2>fixNL</h2>
            <hr />
            
            <p>If data is empty or ends in \n, fixNL returns data.
Otherwise fixNL returns a new slice consisting of data with a final \n added.</p>
            
            <pre><code>func fixNL(data []byte) []byte</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
