<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - decodecounter</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>decodecounter</code>
         </h1>
         <hr />
         
         <article class="global" data-name="supportDeadFunctionsInCounterData">
            <h2>supportDeadFunctionsInCounterData</h2>
            <hr />
            
            <pre><code>supportDeadFunctionsInCounterData</code></pre>
         </article>
          
         <article class="struct" data-name="CounterDataReader">
            <h2>type CounterDataReader struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">stab *stringtab.Reader
args *ast.MapType
osargs []string
goarch string
goos string
mr io.ReadSeeker
hdr coverage.CounterFileHeader
ftr coverage.CounterFileFooter
shdr coverage.CounterSegmentHeader
u32b []byte
u8b []byte
fcnCount uint32
segCount uint32
debug bool</code></pre>
         </article>
         
         <article class="struct" data-name="FuncPayload">
            <h2>type FuncPayload struct</h2>
            <hr />
            
            <p>FuncPayload encapsulates the counter data payload for a single
function as read from a counter data file.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">PkgIdx uint32
FuncIdx uint32
Counters []uint32</code></pre>
         </article>
          
         <article class="function" data-name="NewCounterDataReader">
            <h2>NewCounterDataReader</h2>
            <hr />
            
            <pre><code>func NewCounterDataReader(fn string, rs io.ReadSeeker) (*CounterDataReader, error)</code></pre>
         </article>
         
         <article class="function" data-name="checkMagic">
            <h2>checkMagic</h2>
            <hr />
            
            <pre><code>func checkMagic(v []byte) bool</code></pre>
         </article>
         
         <article class="function" data-name="readFooter">
            <h2>readFooter</h2>
            <hr />
            
            <pre><code>func readFooter() error</code></pre>
         </article>
         
         <article class="function" data-name="readSegmentPreamble">
            <h2>readSegmentPreamble</h2>
            <hr />
            
            <p>readSegmentPreamble reads and consumes the segment header, segment string
table, and segment args table.</p>
            
            <pre><code>func readSegmentPreamble() error</code></pre>
         </article>
         
         <article class="function" data-name="readStringTable">
            <h2>readStringTable</h2>
            <hr />
            
            <pre><code>func readStringTable() error</code></pre>
         </article>
         
         <article class="function" data-name="readArgs">
            <h2>readArgs</h2>
            <hr />
            
            <pre><code>func readArgs() error</code></pre>
         </article>
         
         <article class="function" data-name="OsArgs">
            <h2>OsArgs</h2>
            <hr />
            
            <p>OsArgs returns the program arguments (saved from os.Args during
the run of the instrumented binary) read from the counter
data file. Not all coverage data files will have os.Args values;
for example, if a data file is produced by merging coverage
data from two distinct runs, no os args will be available (an
empty list is returned).</p>
            
            <pre><code>func OsArgs() []string</code></pre>
         </article>
         
         <article class="function" data-name="Goos">
            <h2>Goos</h2>
            <hr />
            
            <p>Goos returns the GOOS setting in effect for the "-cover" binary
that produced this counter data file. The GOOS value may be
empty in the case where the counter data file was produced
from a merge in which more than one GOOS value was present.</p>
            
            <pre><code>func Goos() string</code></pre>
         </article>
         
         <article class="function" data-name="Goarch">
            <h2>Goarch</h2>
            <hr />
            
            <p>Goarch returns the GOARCH setting in effect for the "-cover" binary
that produced this counter data file. The GOARCH value may be
empty in the case where the counter data file was produced
from a merge in which more than one GOARCH value was present.</p>
            
            <pre><code>func Goarch() string</code></pre>
         </article>
         
         <article class="function" data-name="NumSegments">
            <h2>NumSegments</h2>
            <hr />
            
            <p>NumSegments returns the number of execution segments in the file.</p>
            
            <pre><code>func NumSegments() uint32</code></pre>
         </article>
         
         <article class="function" data-name="BeginNextSegment">
            <h2>BeginNextSegment</h2>
            <hr />
            
            <p>BeginNextSegment sets up the reader to read the next segment,
returning TRUE if we do have another segment to read, or FALSE
if we're done with all the segments (also an error if
something went wrong).</p>
            
            <pre><code>func BeginNextSegment() (bool, error)</code></pre>
         </article>
         
         <article class="function" data-name="NumFunctionsInSegment">
            <h2>NumFunctionsInSegment</h2>
            <hr />
            
            <p>NumFunctionsInSegment returns the number of live functions
in the currently selected segment.</p>
            
            <pre><code>func NumFunctionsInSegment() uint32</code></pre>
         </article>
         
         <article class="function" data-name="NextFunc">
            <h2>NextFunc</h2>
            <hr />
            
            <p>NextFunc reads data for the next function in this current segment
into "p", returning TRUE if the read was successful or FALSE
if we've read all the functions already (also an error if
something went wrong with the read or we hit a premature
EOF).</p>
            
            <pre><code>func NextFunc(p *FuncPayload) (bool, error)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
