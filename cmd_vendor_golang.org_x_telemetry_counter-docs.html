<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - counter</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
          
         <a href="cmd_vendor_golang.org_x_telemetry_counter_countertest-docs.html">countertest</a>
         <br />
          
      </aside>
      <main>
         <h1>
            Package
            <code>counter</code>
         </h1>
         <hr />
           
         <article class="function" data-name="Inc">
            <h2>Inc</h2>
            <hr />
            
            <p>Inc increments the counter with the given name.</p>
            
            <pre><code>func Inc(name string)</code></pre>
         </article>
         
         <article class="function" data-name="Add">
            <h2>Add</h2>
            <hr />
            
            <p>Add adds n to the counter with the given name.</p>
            
            <pre><code>func Add(name string, n int64)</code></pre>
         </article>
         
         <article class="function" data-name="New">
            <h2>New</h2>
            <hr />
            
            <p>New returns a counter with the given name.
New can be called in global initializers and will be compiled down to
linker-initialized data. That is, calling New to initialize a global
has no cost at program startup.

See "Counter Naming" in the package doc for a description of counter naming
conventions.</p>
            
            <pre><code>func New(name string) *Counter</code></pre>
         </article>
         
         <article class="function" data-name="NewStack">
            <h2>NewStack</h2>
            <hr />
            
            <p>NewStack returns a new stack counter with the given name and depth.

See "Counter Naming" in the package doc for a description of counter naming
conventions.</p>
            
            <pre><code>func NewStack(name string, depth int) *StackCounter</code></pre>
         </article>
         
         <article class="function" data-name="Open">
            <h2>Open</h2>
            <hr />
            
            <p>Open prepares telemetry counters for recording to the file system.

If the telemetry mode is "off", Open is a no-op. Otherwise, it opens the
counter file on disk and starts to mmap telemetry counters to the file.
Open also persists any counters already created in the current process.

Open should only be called from short-lived processes such as command line
tools. If your process is long-running, use [OpenAndRotate].</p>
            
            <pre><code>func Open()</code></pre>
         </article>
         
         <article class="function" data-name="OpenAndRotate">
            <h2>OpenAndRotate</h2>
            <hr />
            
            <p>OpenAndRotate is like [Open], but also schedules a rotation of the counter
file when it expires.

See golang/go#68497 for background on why [OpenAndRotate] is a separate API.

TODO(rfindley): refactor Open and OpenAndRotate for Go 1.24.</p>
            
            <pre><code>func OpenAndRotate()</code></pre>
         </article>
         
         <article class="function" data-name="OpenDir">
            <h2>OpenDir</h2>
            <hr />
            
            <p>OpenDir prepares telemetry counters for recording to the file system, using
the specified telemetry directory, if it is not the empty string.

If the telemetry mode is "off", Open is a no-op. Otherwise, it opens the
counter file on disk and starts to mmap telemetry counters to the file.
Open also persists any counters already created in the current process.</p>
            
            <pre><code>func OpenDir(telemetryDir string)</code></pre>
         </article>
         
         <article class="function" data-name="CountFlags">
            <h2>CountFlags</h2>
            <hr />
            
            <p>CountFlags creates a counter for every flag that is set
and increments the counter. The name of the counter is
the concatenation of prefix and the flag name.

	For instance, CountFlags("gopls/flag:", *flag.CommandLine)</p>
            
            <pre><code>func CountFlags(prefix string, fs flag.FlagSet)</code></pre>
         </article>
         
         <article class="function" data-name="CountCommandLineFlags">
            <h2>CountCommandLineFlags</h2>
            <hr />
            
            <p>CountCommandLineFlags creates a counter for every flag
that is set in the default flag.CommandLine FlagSet using
the counter name binaryName+"/flag:"+flagName where
binaryName is the base name of the Path embedded in the
binary's build info. If the binary does not have embedded build
info, the "flag:"+flagName counter will be incremented.

CountCommandLineFlags must be called after flags are parsed
with flag.Parse.

For instance, if the -S flag is passed to cmd/compile and
CountCommandLineFlags is called after flags are parsed,
the "compile/flag:S" counter will be incremented.</p>
            
            <pre><code>func CountCommandLineFlags()</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
