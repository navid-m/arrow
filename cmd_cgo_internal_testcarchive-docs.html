<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - carchive_test</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>carchive_test</code>
         </h1>
         <hr />
         
         <article class="global" data-name="globalSkip">
            <h2>globalSkip</h2>
            <hr />
            
            <pre><code>globalSkip</code></pre>
         </article>
         
         <article class="global" data-name="bin">
            <h2>bin</h2>
            <hr />
            
            <p>Program to run.</p>
            
            <pre><code>bin []string</code></pre>
         </article>
         
         <article class="global" data-name="cc">
            <h2>cc</h2>
            <hr />
            
            <p>C compiler with args (from $(go env CC) $(go env GOGCCFLAGS)).</p>
            
            <pre><code>cc []string</code></pre>
         </article>
         
         <article class="global" data-name="exeSuffix">
            <h2>exeSuffix</h2>
            <hr />
            
            <p>".exe" on Windows.</p>
            
            <pre><code>exeSuffix string</code></pre>
         </article>
         
         <article class="global" data-name="GOOS">
            <h2>GOOS</h2>
            <hr />
            
            <pre><code>GOOS string</code></pre>
         </article>
         
         <article class="global" data-name="GOARCH">
            <h2>GOARCH</h2>
            <hr />
            
            <pre><code>GOARCH string</code></pre>
         </article>
         
         <article class="global" data-name="GOPATH">
            <h2>GOPATH</h2>
            <hr />
            
            <pre><code>GOPATH string</code></pre>
         </article>
         
         <article class="global" data-name="libgodir">
            <h2>libgodir</h2>
            <hr />
            
            <pre><code>libgodir string</code></pre>
         </article>
         
         <article class="global" data-name="testWork">
            <h2>testWork</h2>
            <hr />
            
            <pre><code>testWork bool</code></pre>
         </article>
         
         <article class="global" data-name="badLineRegexp">
            <h2>badLineRegexp</h2>
            <hr />
            
            <pre><code>badLineRegexp</code></pre>
         </article>
         
         <article class="global" data-name="testar">
            <h2>testar</h2>
            <hr />
            
            <pre><code>testar</code></pre>
         </article>
           
         <article class="function" data-name="TestMain">
            <h2>TestMain</h2>
            <hr />
            
            <pre><code>func TestMain(m *testing.M)</code></pre>
         </article>
         
         <article class="function" data-name="testMain">
            <h2>testMain</h2>
            <hr />
            
            <pre><code>func testMain(m *testing.M) int</code></pre>
         </article>
         
         <article class="function" data-name="goEnv">
            <h2>goEnv</h2>
            <hr />
            
            <pre><code>func goEnv(key string) string</code></pre>
         </article>
         
         <article class="function" data-name="cmdToRun">
            <h2>cmdToRun</h2>
            <hr />
            
            <pre><code>func cmdToRun(name string) []string</code></pre>
         </article>
         
         <article class="function" data-name="genHeader">
            <h2>genHeader</h2>
            <hr />
            
            <p>genHeader writes a C header file for the C-exported declarations found in .go
source files in dir.

TODO(golang.org/issue/35715): This should be simpler.</p>
            
            <pre><code>func genHeader(t *testing.T, header string, dir string)</code></pre>
         </article>
         
         <article class="function" data-name="testInstall">
            <h2>testInstall</h2>
            <hr />
            
            <pre><code>func testInstall(t *testing.T, exe string, libgoa string, libgoh string, buildcmd ...string)</code></pre>
         </article>
         
         <article class="function" data-name="checkLineComments">
            <h2>checkLineComments</h2>
            <hr />
            
            <p>checkLineComments checks that the export header generated by
-buildmode=c-archive doesn't have any absolute paths in the #line
comments. We don't want those paths because they are unhelpful for
the user and make the files change based on details of the location
of GOPATH.</p>
            
            <pre><code>func checkLineComments(t *testing.T, hdrname string)</code></pre>
         </article>
         
         <article class="function" data-name="checkArchive">
            <h2>checkArchive</h2>
            <hr />
            
            <p>checkArchive verifies that the created library looks OK.
We just check a couple of things now, we can add more checks as needed.</p>
            
            <pre><code>func checkArchive(t *testing.T, arname string)</code></pre>
         </article>
         
         <article class="function" data-name="checkELFArchive">
            <h2>checkELFArchive</h2>
            <hr />
            
            <p>checkELFArchive checks an ELF archive.</p>
            
            <pre><code>func checkELFArchive(t *testing.T, arname string)</code></pre>
         </article>
         
         <article class="function" data-name="checkELFArchiveObject">
            <h2>checkELFArchiveObject</h2>
            <hr />
            
            <p>checkELFArchiveObject checks an object in an ELF archive.</p>
            
            <pre><code>func checkELFArchiveObject(t *testing.T, arname string, off int64, obj io.ReaderAt)</code></pre>
         </article>
         
         <article class="function" data-name="TestInstall">
            <h2>TestInstall</h2>
            <hr />
            
            <pre><code>func TestInstall(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestEarlySignalHandler">
            <h2>TestEarlySignalHandler</h2>
            <hr />
            
            <pre><code>func TestEarlySignalHandler(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestSignalForwarding">
            <h2>TestSignalForwarding</h2>
            <hr />
            
            <pre><code>func TestSignalForwarding(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestSignalForwardingExternal">
            <h2>TestSignalForwardingExternal</h2>
            <hr />
            
            <pre><code>func TestSignalForwardingExternal(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestSignalForwardingGo">
            <h2>TestSignalForwardingGo</h2>
            <hr />
            
            <pre><code>func TestSignalForwardingGo(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="checkSignalForwardingTest">
            <h2>checkSignalForwardingTest</h2>
            <hr />
            
            <p>checkSignalForwardingTest calls t.Skip if the SignalForwarding test
doesn't work on this platform.</p>
            
            <pre><code>func checkSignalForwardingTest(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="buildSignalForwardingTest">
            <h2>buildSignalForwardingTest</h2>
            <hr />
            
            <p>buildSignalForwardingTest builds the executable used by the various
signal forwarding tests.</p>
            
            <pre><code>func buildSignalForwardingTest(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="runSignalForwardingTest">
            <h2>runSignalForwardingTest</h2>
            <hr />
            
            <pre><code>func runSignalForwardingTest(t *testing.T, arg string) error</code></pre>
         </article>
         
         <article class="function" data-name="expectSignal">
            <h2>expectSignal</h2>
            <hr />
            
            <p>expectSignal checks that err, the exit status of a test program,
shows a failure due to a specific signal or two. Returns whether we
found an expected signal.</p>
            
            <pre><code>func expectSignal(t *testing.T, err error, sig1 syscall.Signal, sig2 syscall.Signal) bool</code></pre>
         </article>
         
         <article class="function" data-name="TestOsSignal">
            <h2>TestOsSignal</h2>
            <hr />
            
            <pre><code>func TestOsSignal(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestSigaltstack">
            <h2>TestSigaltstack</h2>
            <hr />
            
            <pre><code>func TestSigaltstack(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestExtar">
            <h2>TestExtar</h2>
            <hr />
            
            <pre><code>func TestExtar(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestPIE">
            <h2>TestPIE</h2>
            <hr />
            
            <pre><code>func TestPIE(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="hasDynTag">
            <h2>hasDynTag</h2>
            <hr />
            
            <pre><code>func hasDynTag(t *testing.T, f *elf.File, tag elf.DynTag) bool</code></pre>
         </article>
         
         <article class="function" data-name="TestSIGPROF">
            <h2>TestSIGPROF</h2>
            <hr />
            
            <pre><code>func TestSIGPROF(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestCompileWithoutShared">
            <h2>TestCompileWithoutShared</h2>
            <hr />
            
            <p>TestCompileWithoutShared tests that if we compile code without the
-shared option, we can put it into an archive. When we use the go
tool with -buildmode=c-archive, it passes -shared to the compiler,
so we override that. The go tool doesn't work this way, but Bazel
will likely do it in the future. And it ought to work. This test
was added because at one time it did not work on PPC Linux.</p>
            
            <pre><code>func TestCompileWithoutShared(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestCachedInstall">
            <h2>TestCachedInstall</h2>
            <hr />
            
            <p>Test that installing a second time recreates the header file.</p>
            
            <pre><code>func TestCachedInstall(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestManyCalls">
            <h2>TestManyCalls</h2>
            <hr />
            
            <p>Issue 35294.</p>
            
            <pre><code>func TestManyCalls(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestPreemption">
            <h2>TestPreemption</h2>
            <hr />
            
            <p>Issue 49288.</p>
            
            <pre><code>func TestPreemption(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestDeepStack">
            <h2>TestDeepStack</h2>
            <hr />
            
            <p>Issue 59294 and 68285. Test calling Go function from C after with
various stack space.</p>
            
            <pre><code>func TestDeepStack(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="BenchmarkCgoCallbackMainThread">
            <h2>BenchmarkCgoCallbackMainThread</h2>
            <hr />
            
            <pre><code>func BenchmarkCgoCallbackMainThread(b *testing.B)</code></pre>
         </article>
         
         <article class="function" data-name="TestSharedObject">
            <h2>TestSharedObject</h2>
            <hr />
            
            <pre><code>func TestSharedObject(t *testing.T)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
