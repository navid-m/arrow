<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - robustio</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>robustio</code>
         </h1>
         <hr />
         
         <article class="global" data-name="errFileNotFound">
            <h2>errFileNotFound</h2>
            <hr />
            
            <pre><code>errFileNotFound</code></pre>
         </article>
         
         <article class="global" data-name="arbitraryTimeout">
            <h2>arbitraryTimeout</h2>
            <hr />
            
            <pre><code>arbitraryTimeout</code></pre>
         </article>
         
         <article class="global" data-name="errFileNotFound">
            <h2>errFileNotFound</h2>
            <hr />
            
            <pre><code>errFileNotFound</code></pre>
         </article>
           
         <article class="function" data-name="Rename">
            <h2>Rename</h2>
            <hr />
            
            <p>Rename is like os.Rename, but on Windows retries errors that may occur if the
file is concurrently read or overwritten.

(See golang.org/issue/31247 and golang.org/issue/32188.)</p>
            
            <pre><code>func Rename(oldpath string, newpath string) error</code></pre>
         </article>
         
         <article class="function" data-name="ReadFile">
            <h2>ReadFile</h2>
            <hr />
            
            <p>ReadFile is like os.ReadFile, but on Windows retries errors that may
occur if the file is concurrently replaced.

(See golang.org/issue/31247 and golang.org/issue/32188.)</p>
            
            <pre><code>func ReadFile(filename string) ([]byte, error)</code></pre>
         </article>
         
         <article class="function" data-name="RemoveAll">
            <h2>RemoveAll</h2>
            <hr />
            
            <p>RemoveAll is like os.RemoveAll, but on Windows retries errors that may occur
if an executable file in the directory has recently been executed.

(See golang.org/issue/19491.)</p>
            
            <pre><code>func RemoveAll(path string) error</code></pre>
         </article>
         
         <article class="function" data-name="IsEphemeralError">
            <h2>IsEphemeralError</h2>
            <hr />
            
            <p>IsEphemeralError reports whether err is one of the errors that the functions
in this package attempt to mitigate.

Errors considered ephemeral include:
  - syscall.ERROR_ACCESS_DENIED
  - syscall.ERROR_FILE_NOT_FOUND
  - internal/syscall/windows.ERROR_SHARING_VIOLATION

This set may be expanded in the future; programs must not rely on the
non-ephemerality of any given error.</p>
            
            <pre><code>func IsEphemeralError(err error) bool</code></pre>
         </article>
         
         <article class="function" data-name="isEphemeralError">
            <h2>isEphemeralError</h2>
            <hr />
            
            <p>isEphemeralError returns true if err may be resolved by waiting.</p>
            
            <pre><code>func isEphemeralError(err error) bool</code></pre>
         </article>
         
         <article class="function" data-name="retry">
            <h2>retry</h2>
            <hr />
            
            <p>retry retries ephemeral errors from f up to an arbitrary timeout
to work around filesystem flakiness on Windows and Darwin.</p>
            
            <pre><code>func retry(f func) error</code></pre>
         </article>
         
         <article class="function" data-name="rename">
            <h2>rename</h2>
            <hr />
            
            <p>rename is like os.Rename, but retries ephemeral errors.

On Windows it wraps os.Rename, which (as of 2019-06-04) uses MoveFileEx with
MOVEFILE_REPLACE_EXISTING.

Windows also provides a different system call, ReplaceFile,
that provides similar semantics, but perhaps preserves more metadata. (The
documentation on the differences between the two is very sparse.)

Empirical error rates with MoveFileEx are lower under modest concurrency, so
for now we're sticking with what the os package already provides.</p>
            
            <pre><code>func rename(oldpath string, newpath string) err error</code></pre>
         </article>
         
         <article class="function" data-name="readFile">
            <h2>readFile</h2>
            <hr />
            
            <p>readFile is like os.ReadFile, but retries ephemeral errors.</p>
            
            <pre><code>func readFile(filename string) ([]byte, error)</code></pre>
         </article>
         
         <article class="function" data-name="removeAll">
            <h2>removeAll</h2>
            <hr />
            
            <pre><code>func removeAll(path string) error</code></pre>
         </article>
         
         <article class="function" data-name="rename">
            <h2>rename</h2>
            <hr />
            
            <pre><code>func rename(oldpath string, newpath string) error</code></pre>
         </article>
         
         <article class="function" data-name="readFile">
            <h2>readFile</h2>
            <hr />
            
            <pre><code>func readFile(filename string) ([]byte, error)</code></pre>
         </article>
         
         <article class="function" data-name="removeAll">
            <h2>removeAll</h2>
            <hr />
            
            <pre><code>func removeAll(path string) error</code></pre>
         </article>
         
         <article class="function" data-name="isEphemeralError">
            <h2>isEphemeralError</h2>
            <hr />
            
            <pre><code>func isEphemeralError(err error) bool</code></pre>
         </article>
         
         <article class="function" data-name="isEphemeralError">
            <h2>isEphemeralError</h2>
            <hr />
            
            <p>isEphemeralError returns true if err may be resolved by waiting.</p>
            
            <pre><code>func isEphemeralError(err error) bool</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
