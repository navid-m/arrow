<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - lex</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <link
         href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 14px;
            scroll-behavior: smooth;
         }

         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
            line-height: 1.6;
         }

         .sidebar {
            width: 12%;
            background: rgba(59, 56, 56, 0.15);
            padding: 1.5rem;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.4);
            overflow-y: auto;
            position: sticky;
            top: 0;
            height: 100vh;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
         }

         .sidebar::-webkit-scrollbar {
            width: 6px;
         }

         .sidebar::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
         }

         .sidebar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
         }

         main {
            flex: 1;
            padding: 2rem;
            margin: 0;
            max-width: calc(100% - 280px);
            background: linear-gradient(
               135deg,
               rgba(59, 56, 56, 0.05) 0%,
               rgba(0, 0, 0, 0.1) 100%
            );
         }

         .nav-links {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
         }

         .nav-links a {
            color: #ddd;
            text-decoration: none;
            padding: 0.5rem;
            border-radius: 4px;
            transition: all 0.2s ease;
         }

         .nav-links a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
         }

         h1 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #fff 0%, #ddd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
         }

         h2 {
            font-size: 1.4rem;
            margin: 1rem 0 0.5rem;
            color: #f0f0f0;
         }

         h3 {
            font-size: 1.2rem;
            margin: 0.8rem 0 0.3rem;
            color: #e0e0e0;
            position: relative;
         }

         .sidebar h2,
         .sidebar h3 {
            font-size: 1rem;
            margin: 0.5rem 0 0.3rem;
            color: #ccc;
         }

         .anchor {
            color: rgba(255, 255, 255, 0.3);
            text-decoration: none;
            font-weight: normal;
            margin-left: 0.5rem;
            opacity: 0;
            transition: opacity 0.2s ease;
            font-size: 0.8em;
         }

         h3:hover .anchor,
         .anchor:focus {
            opacity: 1;
         }

         .anchor:hover {
            color: rgba(255, 255, 255, 0.6);
         }

         .symbol-anchor {
            scroll-margin-top: 2rem;
         }

         pre, code {
            white-space: pre;
         }  

         pre[class*="language-"] {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3) !important;
            border-radius: 8px !important;
            margin: 1rem 0 !important;
            padding: 1rem 1.2rem !important;
            font-size: 0.9rem !important;
            overflow-x: auto !important;
         }

         code[class*="language-"] {
            color: #e6e6e6 !important;
            font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace !important;
            white-space: pre-wrap !important;
         }

         pre:not([class*="language-"]) {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e6e6e6;
            padding: 1rem 1.2rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.9rem;
            overflow-x: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
         }

         pre:not([class*="language-"]) code {
            color: #f5f5f5;
            font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
            white-space: pre-wrap;
         }

         .token.comment,
         .token.prolog,
         .token.doctype,
         .token.cdata {
            color: #7c7c7c !important;
         }

         .token.punctuation {
            color: #c9c9c9 !important;
         }

         .token.property,
         .token.tag,
         .token.boolean,
         .token.number,
         .token.constant,
         .token.symbol,
         .token.deleted {
            color: #f2777a !important;
         }

         .token.selector,
         .token.attr-name,
         .token.string,
         .token.char,
         .token.builtin,
         .token.inserted {
            color: #639fc2 !important;
         }

         .token.operator,
         .token.entity,
         .token.url,
         .language-css .token.string,
         .style .token.string {
            color: #66cccc !important;
         }

         .token.atrule,
         .token.attr-value,
         .token.keyword {
            color: #d34343 !important;
         }

         .token.function,
         .token.class-name {
            color: #f99157 !important;
         }

         .token.regex,
         .token.important,
         .token.variable {
            color: #ffcc66 !important;
         }

         p {
            font-size: 15px;
            margin: 1rem 0;
            color: #ddd;
         }

         article {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(59, 56, 56, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
         }

         article:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
         }

         article:target {
            border-color: rgba(100, 200, 255, 0.5);
            box-shadow: 0 0 0 2px rgba(100, 200, 255, 0.2);
         }

         .hidden {
            display: none !important;
         }

         .filter-section {
            margin-bottom: 1.5rem;
         }

         .filter-section h3 {
            margin-bottom: 0.8rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #aaa;
         }

         .filter-toggle label {
            display: flex;
            align-items: center;
            margin-bottom: 0.6rem;
            font-size: 0.85rem;
            color: #bbb;
            cursor: pointer;
            padding: 0.3rem;
            border-radius: 4px;
            transition: background 0.2s ease;
         }

         .filter-toggle label:hover {
            background: rgba(255, 255, 255, 0.05);
         }

         .filter-toggle input {
            margin-right: 0.6rem;
         }

         #searchInput {
            width: 100%;
            margin-bottom: 1.5rem;
            border-radius: 8px !important;
            height: 2.8rem;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 0 1rem;
         }

         #searchInput::placeholder {
            color: rgba(255, 255, 255, 0.5);
         }

         #searchInput:focus {
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
         }

         .section-divider {
            height: 1px;
            background: linear-gradient(
               90deg,
               transparent 0%,
               rgba(255, 255, 255, 0.3) 50%,
               transparent 100%
            );
            margin: 1.5rem 0;
         }

         .subpackage-list {
            list-style: none;
            padding: 0;
         }

         .subpackage-list li {
            margin-bottom: 0.4rem;
         }

         .subpackage-list a {
            display: block;
            padding: 0.5rem 0.8rem;
            color: #ccc;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.85rem;
         }

         .subpackage-list a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            transform: translateX(4px);
         }

         .empty-state {
            color: rgba(177, 175, 175, 0.6);
            font-style: italic;
            font-size: 0.8rem;
         }

         .badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            color: #ddd;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 500;
            margin-left: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .method-badge {
            background: rgba(100, 200, 255, 0.2);
            color: #87ceeb;
         }

         .const-badge {
            background: rgba(255, 200, 100, 0.2);
            color: #ffd700;
         }

         .var-badge {
            background: rgba(200, 255, 100, 0.2);
            color: #90ee90;
         }

         .type-badge {
            background: rgba(255, 100, 200, 0.2);
            color: #699eff;
         }

         .interface-badge {
            background: rgba(150, 100, 255, 0.2);
            color: #dda0dd;
         }

         .toc {
            position: sticky;
            top: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
         }

         .toc h4 {
            margin: 0 0 0.8rem;
            font-size: 0.9rem;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 0.5px;
         }

         .toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
         }

         .toc li {
            margin-bottom: 0.3rem;
         }

         .toc a {
            color: #bbb;
            text-decoration: none;
            font-size: 0.8rem;
            transition: color 0.2s ease;
         }

         .toc a:hover {
            color: #fff;
         }

         .symbol-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.2);
         }

         .symbol-list::-webkit-scrollbar {
            width: 4px;
         }

         .symbol-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
         }

         .symbol-list ul {
            list-style: none;
            padding: 0.5rem;
            margin: 0;
         }

         .symbol-list li {
            margin-bottom: 0.2rem;
         }

         .symbol-list a {
            display: block;
            padding: 0.3rem 0.5rem;
            color: #bbb;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-size: 0.75rem;
         }

         .symbol-list a:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
         }

         @media (max-width: 768px) {
            body {
               flex-direction: column;
            }

            .sidebar {
               width: 90%;
               height: auto;
               position: relative;
            }

            main {
               max-width: 100%;
               padding: 1rem;
            }
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <div class="nav-links">
            <a href="index.html" title="Home">⌂</a>
            <span>|</span>
            <a href="#" onclick="history.back()" title="Back">←</a>
         </div>

         <div class="filter-section">
            <h3>Search</h3>
            <input
               type="search"
               id="searchInput"
               placeholder="Search symbols..."
            />
         </div>

         <div class="filter-section">
            <h3>Filters</h3>
            <div class="filter-toggle">
               <label>
                  <input type="checkbox" id="showImports" />
                  Show imports
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFunctions" />
                  Show private functions
               </label>
               <label>
                  <input type="checkbox" id="showPrivateStructs" />
                  Show private structs
               </label>
               <label>
                  <input type="checkbox" id="showPrivateFields" />
                  Show private fields
               </label>
               <label>
                  <input type="checkbox" id="showPrivateGlobals" />
                  Show private globals
               </label>
               <label>
                  <input type="checkbox" id="showPrivateTypes" />
                  Show private types
               </label>
               <label>
                  <input type="checkbox" id="showPrivateInterfaces" />
                  Show private interfaces
               </label>
            </div>
         </div>

         <div class="section-divider"></div>

         <div class="filter-section">
            <h3>Subpackages</h3>
            
            <div class="empty-state">No subpackages</div>
            
         </div>

         
         <div class="section-divider"></div>

         <div class="toc">
            <h4>Quick Navigation</h4>
            <ul>
               
               <li><a href="#globals">Constants & Variables</a></li>
                
               <li><a href="#types">Type Aliases</a></li>
                
               <li><a href="#interfaces">Interfaces</a></li>
                
               <li><a href="#structs">Structs</a></li>
                
               <li><a href="#functions">Functions</a></li>
               
            </ul>
         </div>

         <div class="filter-section">
            <h3>All Symbols</h3>
            <div class="symbol-list">
               <ul id="symbolIndex">
               </ul>
            </div>
         </div>
         
      </aside>

      <main>
         <h1>lex</h1>
         <div class="section-divider"></div>

         
         <section id="imports">
            <h2>Imports</h2>
            <article class="imports symbol-anchor" id="imports-section" data-name="imports">
               <h3>
                  Imports
                  <a href="#imports-section" class="anchor" title="Link to imports">#</a>
               </h3>
               <pre><code class="language-go">"fmt"
"log"
"os"
"strings"
"text/scanner"
"cmd/internal/src"
"text/scanner"
"cmd/internal/src"
"text/scanner"
"cmd/internal/src"
"go/build/constraint"
"io"
"os"
"strings"
"text/scanner"
"unicode"
"cmd/asm/internal/flags"
"cmd/internal/objabi"
"cmd/internal/src"
"fmt"
"os"
"path/filepath"
"slices"
"strconv"
"strings"
"text/scanner"
"cmd/asm/internal/flags"
"cmd/internal/objabi"
"cmd/internal/src"
</code></pre>
            </article>
         </section>
          
         <section id="globals">
            <h2>Constants & Variables</h2>
            
            <article class="global symbol-anchor" id="ARR" data-name="ARR">
               <h3>
                  ARR 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#ARR" class="anchor" title="Link to ARR">#</a>
               </h3>
               
               <pre><code class="language-go">const ARR</code></pre>
            </article>
            
            <article class="global symbol-anchor" id="BuildComment" data-name="BuildComment">
               <h3>
                  BuildComment 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#BuildComment" class="anchor" title="Link to BuildComment">#</a>
               </h3>
               
               <pre><code class="language-go">const BuildComment</code></pre>
            </article>
            
            <article class="global symbol-anchor" id="Include" data-name="Include">
               <h3>
                  Include 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#Include" class="anchor" title="Link to Include">#</a>
               </h3>
               
               <pre><code class="language-go">const Include</code></pre>
            </article>
            
            <article class="global symbol-anchor" id="LSH" data-name="LSH">
               <h3>
                  LSH 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#LSH" class="anchor" title="Link to LSH">#</a>
               </h3>
               
               <p>Asm defines some two-character lexemes. We make up
a rune/ScanToken value for them - ugly but simple.</p>
               
               <pre><code class="language-go">const LSH ScanToken = *ast.BinaryExpr</code></pre>
            </article>
            
            <article class="global symbol-anchor" id="ROT" data-name="ROT">
               <h3>
                  ROT 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#ROT" class="anchor" title="Link to ROT">#</a>
               </h3>
               
               <pre><code class="language-go">const ROT</code></pre>
            </article>
            
            <article class="global symbol-anchor" id="RSH" data-name="RSH">
               <h3>
                  RSH 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#RSH" class="anchor" title="Link to RSH">#</a>
               </h3>
               
               <pre><code class="language-go">const RSH</code></pre>
            </article>
            
            <article class="global symbol-anchor" id="macroName" data-name="macroName">
               <h3>
                  macroName 
                  <span class="badge const-badge">const</span>
                  
                  <a href="#macroName" class="anchor" title="Link to macroName">#</a>
               </h3>
               
               <pre><code class="language-go">const macroName</code></pre>
            </article>
            
            <article class="global symbol-anchor" id="panicOnError" data-name="panicOnError">
               <h3>
                  panicOnError 
                  <span class="badge var-badge">var</span>
                  
                  <a href="#panicOnError" class="anchor" title="Link to panicOnError">#</a>
               </h3>
               
               <pre><code class="language-go">var panicOnError bool</code></pre>
            </article>
            
         </section>
          
         <section id="types">
            <h2>Type Aliases</h2>
            
            <article class="type symbol-anchor" id="ScanToken" data-name="ScanToken">
               <h3>
                  ScanToken
                  <span class="badge type-badge">type</span>
                  <a href="#ScanToken" class="anchor" title="Link to ScanToken">#</a>
               </h3>
               
               <p>A ScanToken represents an input item. It is a simple wrapping of rune, as
returned by text/scanner.Scanner, plus a couple of extra values.</p>
               
               <pre><code class="language-go">type ScanToken rune</code></pre>
            </article>
            
         </section>
          
         <section id="interfaces">
            <h2>Interfaces</h2>
            
            <article class="interface symbol-anchor" id="TokenReader" data-name="TokenReader">
               <h3>
                  TokenReader
                  <span class="badge interface-badge">interface</span>
                  <a href="#TokenReader" class="anchor" title="Link to TokenReader">#</a>
               </h3>
               
               <p>A TokenReader is like a reader, but returns lex tokens of type Token. It also can tell you what
the text of the most recently returned token is, and where it was found.
The underlying scanner elides all spaces except newline, so the input looks like a stream of
Tokens; original spacing is lost but we don't need it.</p>
               
               <pre
                  class="methods-block"
               ><code class="methods-code language-go">type TokenReader interface {
Next() ScanToken
Text() string
File() string
Base() *src.PosBase
SetBase(*src.PosBase)
Line() int
Col() int
Close()
}</code></pre>
            </article>
            
         </section>
          
         <section id="structs">
            <h2>Structs</h2>
            
            <article class="struct symbol-anchor" id="Input" data-name="Input">
               <h3>
                  Input
                  <span class="badge">struct</span>
                  <a href="#Input" class="anchor" title="Link to Input">#</a>
               </h3>
               
               <p>Input is the main input: a stack of readers and some macro definitions.
It also handles #include processing (by pushing onto the input stack)
and parses and instantiates macro definitions.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code language-go">type Input struct {
Stack
includes []string
beginningOfLine bool
ifdefStack []bool
macros map[string]*Macro
text string
peek bool
peekToken ScanToken
peekText string
}</code></pre>
            </article>
            
            <article class="struct symbol-anchor" id="Macro" data-name="Macro">
               <h3>
                  Macro
                  <span class="badge">struct</span>
                  <a href="#Macro" class="anchor" title="Link to Macro">#</a>
               </h3>
               
               <p>A Macro represents the definition of a #defined macro.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code language-go">type Macro struct {
name string
args []string
tokens []Token
}</code></pre>
            </article>
            
            <article class="struct symbol-anchor" id="Slice" data-name="Slice">
               <h3>
                  Slice
                  <span class="badge">struct</span>
                  <a href="#Slice" class="anchor" title="Link to Slice">#</a>
               </h3>
               
               <p>A Slice reads from a slice of Tokens.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code language-go">type Slice struct {
tokens []Token
base *src.PosBase
line int
pos int
}</code></pre>
            </article>
            
            <article class="struct symbol-anchor" id="Stack" data-name="Stack">
               <h3>
                  Stack
                  <span class="badge">struct</span>
                  <a href="#Stack" class="anchor" title="Link to Stack">#</a>
               </h3>
               
               <p>A Stack is a stack of TokenReaders. As the top TokenReader hits EOF,
it resumes reading the next one down.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code language-go">type Stack struct {
tr []TokenReader
}</code></pre>
            </article>
            
            <article class="struct symbol-anchor" id="Token" data-name="Token">
               <h3>
                  Token
                  <span class="badge">struct</span>
                  <a href="#Token" class="anchor" title="Link to Token">#</a>
               </h3>
               
               <p>A Token is a scan token plus its string value.
A macro is stored as a sequence of Tokens with spaces stripped.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code language-go">type Token struct {
ScanToken
text string
}</code></pre>
            </article>
            
            <article class="struct symbol-anchor" id="Tokenizer" data-name="Tokenizer">
               <h3>
                  Tokenizer
                  <span class="badge">struct</span>
                  <a href="#Tokenizer" class="anchor" title="Link to Tokenizer">#</a>
               </h3>
               
               <p>A Tokenizer is a simple wrapping of text/scanner.Scanner, configured
for our purposes and made a TokenReader. It forms the lowest level,
turning text from readers into tokens.</p>
               
               <pre
                  class="fields-block"
               ><code class="fields-code language-go">type Tokenizer struct {
tok ScanToken
s *scanner.Scanner
base *src.PosBase
line int
file *os.File
}</code></pre>
            </article>
            
         </section>
          
         <section id="functions">
            <h2>Functions</h2>
            
            <article class="function symbol-anchor" id="Base" data-name="Base">
               <h3>
                  Base 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Base" class="anchor" title="Link to Base">#</a>
               </h3>
               
               <pre><code class="language-go">func (t *Tokenizer) Base() *src.PosBase</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Base" data-name="Base">
               <h3>
                  Base 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Base" class="anchor" title="Link to Base">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Stack) Base() *src.PosBase</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Base" data-name="Base">
               <h3>
                  Base 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Base" class="anchor" title="Link to Base">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Slice) Base() *src.PosBase</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Close" data-name="Close">
               <h3>
                  Close 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Close" class="anchor" title="Link to Close">#</a>
               </h3>
               
               <pre><code class="language-go">func (in *Input) Close()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Close" data-name="Close">
               <h3>
                  Close 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Close" class="anchor" title="Link to Close">#</a>
               </h3>
               
               <pre><code class="language-go">func (t *Tokenizer) Close()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Close" data-name="Close">
               <h3>
                  Close 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Close" class="anchor" title="Link to Close">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Stack) Close()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Close" data-name="Close">
               <h3>
                  Close 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Close" class="anchor" title="Link to Close">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Slice) Close()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Col" data-name="Col">
               <h3>
                  Col 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Col" class="anchor" title="Link to Col">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Slice) Col() int</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Col" data-name="Col">
               <h3>
                  Col 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Col" class="anchor" title="Link to Col">#</a>
               </h3>
               
               <pre><code class="language-go">func (t *Tokenizer) Col() int</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Col" data-name="Col">
               <h3>
                  Col 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Col" class="anchor" title="Link to Col">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Stack) Col() int</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Error" data-name="Error">
               <h3>
                  Error 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Error" class="anchor" title="Link to Error">#</a>
               </h3>
               
               <pre><code class="language-go">func (in *Input) Error(args ...interface{})</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="File" data-name="File">
               <h3>
                  File 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#File" class="anchor" title="Link to File">#</a>
               </h3>
               
               <pre><code class="language-go">func (t *Tokenizer) File() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="File" data-name="File">
               <h3>
                  File 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#File" class="anchor" title="Link to File">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Slice) File() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="File" data-name="File">
               <h3>
                  File 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#File" class="anchor" title="Link to File">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Stack) File() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="IsRegisterShift" data-name="IsRegisterShift">
               <h3>
                  IsRegisterShift 
                  <span class="badge">function</span>
                  
                  <a href="#IsRegisterShift" class="anchor" title="Link to IsRegisterShift">#</a>
               </h3>
               
               <p>IsRegisterShift reports whether the token is one of the ARM register shift operators.</p>
               
               <pre><code class="language-go">func IsRegisterShift(r ScanToken) bool</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Line" data-name="Line">
               <h3>
                  Line 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Line" class="anchor" title="Link to Line">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Stack) Line() int</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Line" data-name="Line">
               <h3>
                  Line 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Line" class="anchor" title="Link to Line">#</a>
               </h3>
               
               <pre><code class="language-go">func (t *Tokenizer) Line() int</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Line" data-name="Line">
               <h3>
                  Line 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Line" class="anchor" title="Link to Line">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Slice) Line() int</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Make" data-name="Make">
               <h3>
                  Make 
                  <span class="badge">function</span>
                  
                  <a href="#Make" class="anchor" title="Link to Make">#</a>
               </h3>
               
               <p>Make returns a Token with the given rune (ScanToken) and text representation.</p>
               
               <pre><code class="language-go">func Make(token ScanToken, text string) Token</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="NewInput" data-name="NewInput">
               <h3>
                  NewInput 
                  <span class="badge">function</span>
                  
                  <a href="#NewInput" class="anchor" title="Link to NewInput">#</a>
               </h3>
               
               <p>NewInput returns an Input from the given path.</p>
               
               <pre><code class="language-go">func NewInput(name string) *Input</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="NewLexer" data-name="NewLexer">
               <h3>
                  NewLexer 
                  <span class="badge">function</span>
                  
                  <a href="#NewLexer" class="anchor" title="Link to NewLexer">#</a>
               </h3>
               
               <p>NewLexer returns a lexer for the named file and the given link context.</p>
               
               <pre><code class="language-go">func NewLexer(name string) TokenReader</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="NewSlice" data-name="NewSlice">
               <h3>
                  NewSlice 
                  <span class="badge">function</span>
                  
                  <a href="#NewSlice" class="anchor" title="Link to NewSlice">#</a>
               </h3>
               
               <pre><code class="language-go">func NewSlice(base *src.PosBase, line int, tokens []Token) *Slice</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="NewTokenizer" data-name="NewTokenizer">
               <h3>
                  NewTokenizer 
                  <span class="badge">function</span>
                  
                  <a href="#NewTokenizer" class="anchor" title="Link to NewTokenizer">#</a>
               </h3>
               
               <pre><code class="language-go">func NewTokenizer(name string, r io.Reader, file *os.File) *Tokenizer</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Next" data-name="Next">
               <h3>
                  Next 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Next" class="anchor" title="Link to Next">#</a>
               </h3>
               
               <pre><code class="language-go">func (t *Tokenizer) Next() ScanToken</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Next" data-name="Next">
               <h3>
                  Next 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Next" class="anchor" title="Link to Next">#</a>
               </h3>
               
               <pre><code class="language-go">func (in *Input) Next() ScanToken</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Next" data-name="Next">
               <h3>
                  Next 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Next" class="anchor" title="Link to Next">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Stack) Next() ScanToken</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Next" data-name="Next">
               <h3>
                  Next 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Next" class="anchor" title="Link to Next">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Slice) Next() ScanToken</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Push" data-name="Push">
               <h3>
                  Push 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Push" class="anchor" title="Link to Push">#</a>
               </h3>
               
               <pre><code class="language-go">func (in *Input) Push(r TokenReader)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Push" data-name="Push">
               <h3>
                  Push 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Push" class="anchor" title="Link to Push">#</a>
               </h3>
               
               <p>Push adds tr to the top (end) of the input stack. (Popping happens automatically.)</p>
               
               <pre><code class="language-go">func (s *Stack) Push(tr TokenReader)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="SetBase" data-name="SetBase">
               <h3>
                  SetBase 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#SetBase" class="anchor" title="Link to SetBase">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Stack) SetBase(base *src.PosBase)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="SetBase" data-name="SetBase">
               <h3>
                  SetBase 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#SetBase" class="anchor" title="Link to SetBase">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Slice) SetBase(base *src.PosBase)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="SetBase" data-name="SetBase">
               <h3>
                  SetBase 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#SetBase" class="anchor" title="Link to SetBase">#</a>
               </h3>
               
               <pre><code class="language-go">func (t *Tokenizer) SetBase(base *src.PosBase)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="String" data-name="String">
               <h3>
                  String 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#String" class="anchor" title="Link to String">#</a>
               </h3>
               
               <pre><code class="language-go">func (l Token) String() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="String" data-name="String">
               <h3>
                  String 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#String" class="anchor" title="Link to String">#</a>
               </h3>
               
               <pre><code class="language-go">func (t ScanToken) String() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Text" data-name="Text">
               <h3>
                  Text 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Text" class="anchor" title="Link to Text">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Slice) Text() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Text" data-name="Text">
               <h3>
                  Text 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Text" class="anchor" title="Link to Text">#</a>
               </h3>
               
               <pre><code class="language-go">func (s *Stack) Text() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Text" data-name="Text">
               <h3>
                  Text 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Text" class="anchor" title="Link to Text">#</a>
               </h3>
               
               <pre><code class="language-go">func (t *Tokenizer) Text() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Text" data-name="Text">
               <h3>
                  Text 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#Text" class="anchor" title="Link to Text">#</a>
               </h3>
               
               <pre><code class="language-go">func (in *Input) Text() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="Tokenize" data-name="Tokenize">
               <h3>
                  Tokenize 
                  <span class="badge">function</span>
                  
                  <a href="#Tokenize" class="anchor" title="Link to Tokenize">#</a>
               </h3>
               
               <p>Tokenize turns a string into a list of Tokens; used to parse the -D flag and in tests.</p>
               
               <pre><code class="language-go">func Tokenize(str string) []Token</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="argsFor" data-name="argsFor">
               <h3>
                  argsFor 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#argsFor" class="anchor" title="Link to argsFor">#</a>
               </h3>
               
               <p>argsFor returns a map from formal name to actual value for this argumented macro invocation.
The opening parenthesis has been absorbed.</p>
               
               <pre><code class="language-go">func (in *Input) argsFor(macro *Macro) map[string][]Token</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="collectArgument" data-name="collectArgument">
               <h3>
                  collectArgument 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#collectArgument" class="anchor" title="Link to collectArgument">#</a>
               </h3>
               
               <p>collectArgument returns the actual tokens for a single argument of a macro.
It also returns the token that terminated the argument, which will always
be either ',' or ')'. The starting '(' has been scanned.</p>
               
               <pre><code class="language-go">func (in *Input) collectArgument(macro *Macro) ([]Token, ScanToken)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="define" data-name="define">
               <h3>
                  define 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#define" class="anchor" title="Link to define">#</a>
               </h3>
               
               <p>#define processing.</p>
               
               <pre><code class="language-go">func (in *Input) define()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="defineMacro" data-name="defineMacro">
               <h3>
                  defineMacro 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#defineMacro" class="anchor" title="Link to defineMacro">#</a>
               </h3>
               
               <p>defineMacro stores the macro definition in the Input.</p>
               
               <pre><code class="language-go">func (in *Input) defineMacro(name string, args []string, tokens []Token)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="else_" data-name="else_">
               <h3>
                  else_ 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#else_" class="anchor" title="Link to else_">#</a>
               </h3>
               
               <p>#else processing</p>
               
               <pre><code class="language-go">func (in *Input) else_()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="enabled" data-name="enabled">
               <h3>
                  enabled 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#enabled" class="anchor" title="Link to enabled">#</a>
               </h3>
               
               <p>enabled reports whether the input is enabled by an ifdef, or is at the top level.</p>
               
               <pre><code class="language-go">func (in *Input) enabled() bool</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="endif" data-name="endif">
               <h3>
                  endif 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#endif" class="anchor" title="Link to endif">#</a>
               </h3>
               
               <p>#endif processing.</p>
               
               <pre><code class="language-go">func (in *Input) endif()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="expectNewline" data-name="expectNewline">
               <h3>
                  expectNewline 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#expectNewline" class="anchor" title="Link to expectNewline">#</a>
               </h3>
               
               <pre><code class="language-go">func (in *Input) expectNewline(directive string)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="expectText" data-name="expectText">
               <h3>
                  expectText 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#expectText" class="anchor" title="Link to expectText">#</a>
               </h3>
               
               <p>expectText is like Error but adds "got XXX" where XXX is a quoted representation of the most recent token.</p>
               
               <pre><code class="language-go">func (in *Input) expectText(args ...interface{})</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="hash" data-name="hash">
               <h3>
                  hash 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#hash" class="anchor" title="Link to hash">#</a>
               </h3>
               
               <p>hash processes a # preprocessor directive. It reports whether it completes.</p>
               
               <pre><code class="language-go">func (in *Input) hash() bool</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="ifdef" data-name="ifdef">
               <h3>
                  ifdef 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#ifdef" class="anchor" title="Link to ifdef">#</a>
               </h3>
               
               <p>#ifdef and #ifndef processing.</p>
               
               <pre><code class="language-go">func (in *Input) ifdef(truth bool)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="include" data-name="include">
               <h3>
                  include 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#include" class="anchor" title="Link to include">#</a>
               </h3>
               
               <p>#include processing.</p>
               
               <pre><code class="language-go">func (in *Input) include()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="invokeMacro" data-name="invokeMacro">
               <h3>
                  invokeMacro 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#invokeMacro" class="anchor" title="Link to invokeMacro">#</a>
               </h3>
               
               <p>invokeMacro pushes onto the input Stack a Slice that holds the macro definition with the actual
parameters substituted for the formals.
Invoking a macro does not touch the PC/line history.</p>
               
               <pre><code class="language-go">func (in *Input) invokeMacro(macro *Macro)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="isIdentRune" data-name="isIdentRune">
               <h3>
                  isIdentRune 
                  <span class="badge">function</span>
                  
                  <a href="#isIdentRune" class="anchor" title="Link to isIdentRune">#</a>
               </h3>
               
               <p>We want center dot (·) and division slash (∕) to work as identifier characters.</p>
               
               <pre><code class="language-go">func isIdentRune(ch rune, i int) bool</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="line" data-name="line">
               <h3>
                  line 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#line" class="anchor" title="Link to line">#</a>
               </h3>
               
               <p>#line processing.</p>
               
               <pre><code class="language-go">func (in *Input) line()</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="macroDefinition" data-name="macroDefinition">
               <h3>
                  macroDefinition 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#macroDefinition" class="anchor" title="Link to macroDefinition">#</a>
               </h3>
               
               <p>macroDefinition returns the list of formals and the tokens of the definition.
The argument list is nil for no parens on the definition; otherwise a list of
formal argument names.</p>
               
               <pre><code class="language-go">func (in *Input) macroDefinition(name string) ([]string, []Token)</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="macroName" data-name="macroName">
               <h3>
                  macroName 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#macroName" class="anchor" title="Link to macroName">#</a>
               </h3>
               
               <p>macroName returns the name for the macro being referenced.</p>
               
               <pre><code class="language-go">func (in *Input) macroName() string</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="predefine" data-name="predefine">
               <h3>
                  predefine 
                  <span class="badge">function</span>
                  
                  <a href="#predefine" class="anchor" title="Link to predefine">#</a>
               </h3>
               
               <p>predefine installs the macros set by the -D flag on the command line.</p>
               
               <pre><code class="language-go">func predefine(defines flags.MultiFlag) map[string]*Macro</code></pre>
            </article>
            
            <article class="function symbol-anchor" id="undef" data-name="undef">
               <h3>
                  undef 
                  <span class="badge method-badge">method</span>
                  
                  <a href="#undef" class="anchor" title="Link to undef">#</a>
               </h3>
               
               <p>#undef processing</p>
               
               <pre><code class="language-go">func (in *Input) undef()</code></pre>
            </article>
            
         </section>
         
      </main>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }

         function buildSymbolIndex() {
            const symbolIndex = document.getElementById('symbolIndex');
            if (!symbolIndex) return;

            const symbols = [];
            
            document.querySelectorAll('article[data-name]').forEach(article => {
               const name = article.dataset.name;
               const type = article.className.split(' ')[0]; 
               const isPrivateSymbol = isPrivate(name);
               
               if (name && name !== 'imports') {
                  symbols.push({
                     name,
                     type,
                     element: article,
                     isPrivate: isPrivateSymbol
                  });
               }
            });

            symbols.sort((a, b) => a.name.localeCompare(b.name));
            symbolIndex.innerHTML = '';
            symbols.forEach(symbol => {
               const li = document.createElement('li');
               const a = document.createElement('a');
               a.href = `#${symbol.name}`;
               a.textContent = symbol.name;
               a.title = `${symbol.type}: ${symbol.name}`;
               
               if (symbol.isPrivate) {
                  li.classList.add('private', 'hidden');
               }
               
               li.appendChild(a);
               symbolIndex.appendChild(li);
            });
         }

         document.addEventListener("DOMContentLoaded", () => {
            if (window.Prism) {
               Prism.highlightAll();
            }

            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               imports: document.getElementById("showImports"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
               types: document.getElementById("showPrivateTypes"),
               interfaces: document.getElementById(
                  "showPrivateInterfaces"
               ),
            };

            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });

               if (toggle) {
                  toggle.addEventListener("change", () => {
                     const show = toggle.checked;
                     document
                        .querySelectorAll(`${selector}.private`)
                        .forEach((el) => {
                           el.classList.toggle("hidden", !show);
                        });
                     
                     const symbolIndexItems = document.querySelectorAll('#symbolIndex li.private');
                     symbolIndexItems.forEach(li => {
                        const link = li.querySelector('a');
                        if (link) {
                           const targetId = link.getAttribute('href').substring(1);
                           const targetEl = document.getElementById(targetId);
                           if (targetEl && targetEl.matches(selector)) {
                              li.classList.toggle("hidden", !show);
                           }
                        }
                     });
                  });
               }
            };

            hideInitial("article.imports", toggles.imports);
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            hideInitial("article.type", toggles.types);
            hideInitial("article.interface", toggles.interfaces);

            document.querySelectorAll("article.struct").forEach((article) => {
               const codeBlock = article.querySelector("code.fields-code");
               if (!codeBlock) return;

               const raw = codeBlock.textContent.trim();

               const match = raw.match(/^type\s+\w+\s+struct\s*{(.*)}$/s);
               if (!match) return;

               const fieldsRaw = match[1].trim();
               const fields = fieldsRaw.split("\n").map(line => line.trim()).filter(Boolean);

               const formatted = fields.map(line => `\t${line}`).join("\n");
               const structName = article.dataset.name;

               const finalCode = `type ${structName} struct {\n${formatted}\n}`;

               codeBlock.textContent = finalCode;

               // Apply Prism highlighting again
               if (window.Prism) Prism.highlightElement(codeBlock);

   
               if (toggles.fields) {
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               }
            });

            document
               .querySelectorAll("article.interface")
               .forEach((article) => {
                  const codeBlock = article.querySelector(
                     "code.methods-code"
                  );
                  if (!codeBlock) return;

                  const lines = codeBlock.innerHTML.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch && !trimmed.endsWith("{") && trimmed != "}") {
                           return `<span class="method-line">${line}</span>`;
                        } else {
                           return ``;
                        }

                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class="method-line${
                           isPriv ? " hidden private" : ""
                        }" data-name="${name}">${line}</span><br />`;
                     })
                     .join("");

                  codeBlock.innerHTML = newContent;

                  if (window.Prism) {
                     Prism.highlightElement(codeBlock);
                  }

                  if (toggles.fields) {
                     toggles.fields.addEventListener("change", () => {
                        const show = toggles.fields.checked;
                        article
                           .querySelectorAll(".method-line.private")
                           .forEach((el) =>
                              el.classList.toggle("hidden", !show)
                           );
                     });
                  }
               });

            const searchInput = document.getElementById("searchInput");
            if (searchInput) {
               searchInput.addEventListener("input", () => {
                  const query = searchInput.value.trim().toLowerCase();

                  document.querySelectorAll("article").forEach((el) => {
                     const name = el.dataset.name;
                     if (!name) return;

                     const matches =
                        query === "" ||
                        name.toLowerCase().includes(query) ||
                        (el.textContent &&
                           el.textContent.toLowerCase().includes(query));

                     if (matches) {
                        const isPrivateEl =
                           el.classList.contains("private");
                        const shouldShowPrivate =
                           getPrivateToggleState(el);

                        if (!isPrivateEl || shouldShowPrivate) {
                           el.classList.remove("hidden");
                        }
                     } else {
                        el.classList.add("hidden");
                     }
                  });

                  document.querySelectorAll('#symbolIndex li').forEach(li => {
                     const link = li.querySelector('a');
                     if (link) {
                        const symbolName = link.textContent.toLowerCase();
                        const matches = query === "" || symbolName.includes(query);
                        
                        if (matches) {
                           const isPrivateSymbol = li.classList.contains('private');
                           const targetId = link.getAttribute('href').substring(1);
                           const targetEl = document.getElementById(targetId);
                           const shouldShowPrivate = targetEl ? getPrivateToggleState(targetEl) : false;
                           
                           if (!isPrivateSymbol || shouldShowPrivate) {
                              li.style.display = '';
                           }
                        } else {
                           li.style.display = 'none';
                        }
                     }
                  });
               });
            }

            function getPrivateToggleState(element) {
               if (element.classList.contains("function")) {
                  return toggles.functions?.checked || false;
               } else if (element.classList.contains("struct")) {
                  return toggles.structs?.checked || false;
               } else if (element.classList.contains("global")) {
                  return toggles.globals?.checked || false;
               } else if (element.classList.contains("type")) {
                  return toggles.types?.checked || false;
               } else if (element.classList.contains("interface")) {
                  return toggles.interfaces?.checked || false;
               } else if (element.classList.contains("imports")) {
                  return toggles.imports?.checked || false;
               }
               return false;
            }

            buildSymbolIndex();

            document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
               anchor.addEventListener("click", function (e) {
                  const target = document.querySelector(
                     this.getAttribute("href")
                  );
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               });
            });

            window.addEventListener('hashchange', () => {
               const hash = window.location.hash;
               if (hash) {
                  const target = document.querySelector(hash);
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               }
            });

            if (window.location.hash) {
               setTimeout(() => {
                  const target = document.querySelector(window.location.hash);
                  if (target) {
                     target.scrollIntoView({
                        behavior: "smooth",
                        block: "start",
                     });
                  }
               }, 100);
            }
         });
      </script>
   </body>
</html>