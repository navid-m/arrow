<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - fstest</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>fstest</code>
         </h1>
         <hr />
         
         <article class="global" data-name="_">
            <h2>_</h2>
            <hr />
            
            <pre><code>_ fs.FS</code></pre>
         </article>
         
         <article class="global" data-name="_">
            <h2>_</h2>
            <hr />
            
            <pre><code>_ fs.File</code></pre>
         </article>
          
         <article class="struct" data-name="shuffledFile">
            <h2>type shuffledFile struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">fs.File</code></pre>
         </article>
         
         <article class="struct" data-name="failPermFS">
            <h2>type failPermFS struct</h2>
            <hr />
            
            <p>failPermFS is a filesystem that always fails with fs.ErrPermission.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code"></code></pre>
         </article>
         
         <article class="struct" data-name="MapFile">
            <h2>type MapFile struct</h2>
            <hr />
            
            <p>A MapFile describes a single file in a [MapFS].</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">Data []byte
Mode fs.FileMode
ModTime time.Time
Sys any</code></pre>
         </article>
         
         <article class="struct" data-name="fsOnly">
            <h2>type fsOnly struct</h2>
            <hr />
            
            <p>fsOnly is a wrapper that hides all but the fs.FS methods,
to avoid an infinite recursion when implementing special
methods in terms of helpers that would use them.
(In general, implementing these methods using the package fs helpers
is redundant and unnecessary, but having the methods may make
MapFS exercise more code paths when used in tests.)</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">fs.FS</code></pre>
         </article>
         
         <article class="struct" data-name="noSub">
            <h2>type noSub struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">MapFS</code></pre>
         </article>
         
         <article class="struct" data-name="mapFileInfo">
            <h2>type mapFileInfo struct</h2>
            <hr />
            
            <p>A mapFileInfo implements fs.FileInfo and fs.DirEntry for a given map file.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">name string
f *MapFile</code></pre>
         </article>
         
         <article class="struct" data-name="openMapFile">
            <h2>type openMapFile struct</h2>
            <hr />
            
            <p>An openMapFile is a regular (non-directory) fs.File open for reading.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">path string
mapFileInfo
offset int64</code></pre>
         </article>
         
         <article class="struct" data-name="mapDir">
            <h2>type mapDir struct</h2>
            <hr />
            
            <p>A mapDir is a directory fs.File (so also an fs.ReadDirFile) open for reading.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">path string
mapFileInfo
entry []mapFileInfo
offset int</code></pre>
         </article>
         
         <article class="struct" data-name="fsTester">
            <h2>type fsTester struct</h2>
            <hr />
            
            <p>An fsTester holds state for running the test.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">fsys fs.FS
errors []error
dirs []string
files []string</code></pre>
         </article>
          
         <article class="function" data-name="TestSymlink">
            <h2>TestSymlink</h2>
            <hr />
            
            <pre><code>func TestSymlink(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestDash">
            <h2>TestDash</h2>
            <hr />
            
            <pre><code>func TestDash(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="Open">
            <h2>Open</h2>
            <hr />
            
            <pre><code>func Open(name string) (fs.File, error)</code></pre>
         </article>
         
         <article class="function" data-name="ReadDir">
            <h2>ReadDir</h2>
            <hr />
            
            <pre><code>func ReadDir(n int) ([]fs.DirEntry, error)</code></pre>
         </article>
         
         <article class="function" data-name="TestShuffledFS">
            <h2>TestShuffledFS</h2>
            <hr />
            
            <pre><code>func TestShuffledFS(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="Open">
            <h2>Open</h2>
            <hr />
            
            <pre><code>func Open(name string) (fs.File, error)</code></pre>
         </article>
         
         <article class="function" data-name="TestTestFSWrappedErrors">
            <h2>TestTestFSWrappedErrors</h2>
            <hr />
            
            <pre><code>func TestTestFSWrappedErrors(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="Open">
            <h2>Open</h2>
            <hr />
            
            <p>Open opens the named file.</p>
            
            <pre><code>func Open(name string) (fs.File, error)</code></pre>
         </article>
         
         <article class="function" data-name="ReadFile">
            <h2>ReadFile</h2>
            <hr />
            
            <pre><code>func ReadFile(name string) ([]byte, error)</code></pre>
         </article>
         
         <article class="function" data-name="Stat">
            <h2>Stat</h2>
            <hr />
            
            <pre><code>func Stat(name string) (fs.FileInfo, error)</code></pre>
         </article>
         
         <article class="function" data-name="ReadDir">
            <h2>ReadDir</h2>
            <hr />
            
            <pre><code>func ReadDir(name string) ([]fs.DirEntry, error)</code></pre>
         </article>
         
         <article class="function" data-name="Glob">
            <h2>Glob</h2>
            <hr />
            
            <pre><code>func Glob(pattern string) ([]string, error)</code></pre>
         </article>
         
         <article class="function" data-name="Sub">
            <h2>Sub</h2>
            <hr />
            
            <pre><code>func Sub()</code></pre>
         </article>
         
         <article class="function" data-name="Sub">
            <h2>Sub</h2>
            <hr />
            
            <pre><code>func Sub(dir string) (fs.FS, error)</code></pre>
         </article>
         
         <article class="function" data-name="Name">
            <h2>Name</h2>
            <hr />
            
            <pre><code>func Name() string</code></pre>
         </article>
         
         <article class="function" data-name="Size">
            <h2>Size</h2>
            <hr />
            
            <pre><code>func Size() int64</code></pre>
         </article>
         
         <article class="function" data-name="Mode">
            <h2>Mode</h2>
            <hr />
            
            <pre><code>func Mode() fs.FileMode</code></pre>
         </article>
         
         <article class="function" data-name="Type">
            <h2>Type</h2>
            <hr />
            
            <pre><code>func Type() fs.FileMode</code></pre>
         </article>
         
         <article class="function" data-name="ModTime">
            <h2>ModTime</h2>
            <hr />
            
            <pre><code>func ModTime() time.Time</code></pre>
         </article>
         
         <article class="function" data-name="IsDir">
            <h2>IsDir</h2>
            <hr />
            
            <pre><code>func IsDir() bool</code></pre>
         </article>
         
         <article class="function" data-name="Sys">
            <h2>Sys</h2>
            <hr />
            
            <pre><code>func Sys() any</code></pre>
         </article>
         
         <article class="function" data-name="Info">
            <h2>Info</h2>
            <hr />
            
            <pre><code>func Info() (fs.FileInfo, error)</code></pre>
         </article>
         
         <article class="function" data-name="String">
            <h2>String</h2>
            <hr />
            
            <pre><code>func String() string</code></pre>
         </article>
         
         <article class="function" data-name="Stat">
            <h2>Stat</h2>
            <hr />
            
            <pre><code>func Stat() (fs.FileInfo, error)</code></pre>
         </article>
         
         <article class="function" data-name="Close">
            <h2>Close</h2>
            <hr />
            
            <pre><code>func Close() error</code></pre>
         </article>
         
         <article class="function" data-name="Read">
            <h2>Read</h2>
            <hr />
            
            <pre><code>func Read(b []byte) (int, error)</code></pre>
         </article>
         
         <article class="function" data-name="Seek">
            <h2>Seek</h2>
            <hr />
            
            <pre><code>func Seek(offset int64, whence int) (int64, error)</code></pre>
         </article>
         
         <article class="function" data-name="ReadAt">
            <h2>ReadAt</h2>
            <hr />
            
            <pre><code>func ReadAt(b []byte, offset int64) (int, error)</code></pre>
         </article>
         
         <article class="function" data-name="Stat">
            <h2>Stat</h2>
            <hr />
            
            <pre><code>func Stat() (fs.FileInfo, error)</code></pre>
         </article>
         
         <article class="function" data-name="Close">
            <h2>Close</h2>
            <hr />
            
            <pre><code>func Close() error</code></pre>
         </article>
         
         <article class="function" data-name="Read">
            <h2>Read</h2>
            <hr />
            
            <pre><code>func Read(b []byte) (int, error)</code></pre>
         </article>
         
         <article class="function" data-name="ReadDir">
            <h2>ReadDir</h2>
            <hr />
            
            <pre><code>func ReadDir(count int) ([]fs.DirEntry, error)</code></pre>
         </article>
         
         <article class="function" data-name="TestMapFS">
            <h2>TestMapFS</h2>
            <hr />
            
            <pre><code>func TestMapFS(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestMapFSChmodDot">
            <h2>TestMapFSChmodDot</h2>
            <hr />
            
            <pre><code>func TestMapFSChmodDot(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestMapFSFileInfoName">
            <h2>TestMapFSFileInfoName</h2>
            <hr />
            
            <pre><code>func TestMapFSFileInfoName(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestFS">
            <h2>TestFS</h2>
            <hr />
            
            <p>TestFS tests a file system implementation.
It walks the entire tree of files in fsys,
opening and checking that each file behaves correctly.
It also checks that the file system contains at least the expected files.
As a special case, if no expected files are listed, fsys must be empty.
Otherwise, fsys must contain at least the listed files; it can also contain others.
The contents of fsys must not change concurrently with TestFS.

If TestFS finds any misbehaviors, it returns either the first error or a
list of errors. Use [errors.Is] or [errors.As] to inspect.

Typical usage inside a test is:

	if err := fstest.TestFS(myFS, "file/that/should/be/present"); err != nil {
		t.Fatal(err)
	}</p>
            
            <pre><code>func TestFS(fsys fs.FS, expected ...string) error</code></pre>
         </article>
         
         <article class="function" data-name="testFS">
            <h2>testFS</h2>
            <hr />
            
            <pre><code>func testFS(fsys fs.FS, expected ...string) error</code></pre>
         </article>
         
         <article class="function" data-name="errorf">
            <h2>errorf</h2>
            <hr />
            
            <p>errorf adds an error to the list of errors.</p>
            
            <pre><code>func errorf(format string, args ...any)</code></pre>
         </article>
         
         <article class="function" data-name="openDir">
            <h2>openDir</h2>
            <hr />
            
            <pre><code>func openDir(dir string) fs.ReadDirFile</code></pre>
         </article>
         
         <article class="function" data-name="checkDir">
            <h2>checkDir</h2>
            <hr />
            
            <p>checkDir checks the directory dir, which is expected to exist
(it is either the root or was found in a directory listing with IsDir true).</p>
            
            <pre><code>func checkDir(dir string)</code></pre>
         </article>
         
         <article class="function" data-name="formatEntry">
            <h2>formatEntry</h2>
            <hr />
            
            <p>formatEntry formats an fs.DirEntry into a string for error messages and comparison.</p>
            
            <pre><code>func formatEntry(entry fs.DirEntry) string</code></pre>
         </article>
         
         <article class="function" data-name="formatInfoEntry">
            <h2>formatInfoEntry</h2>
            <hr />
            
            <p>formatInfoEntry formats an fs.FileInfo into a string like the result of formatEntry, for error messages and comparison.</p>
            
            <pre><code>func formatInfoEntry(info fs.FileInfo) string</code></pre>
         </article>
         
         <article class="function" data-name="formatInfo">
            <h2>formatInfo</h2>
            <hr />
            
            <p>formatInfo formats an fs.FileInfo into a string for error messages and comparison.</p>
            
            <pre><code>func formatInfo(info fs.FileInfo) string</code></pre>
         </article>
         
         <article class="function" data-name="checkGlob">
            <h2>checkGlob</h2>
            <hr />
            
            <p>checkGlob checks that various glob patterns work if the file system implements GlobFS.</p>
            
            <pre><code>func checkGlob(dir string, list []fs.DirEntry)</code></pre>
         </article>
         
         <article class="function" data-name="checkStat">
            <h2>checkStat</h2>
            <hr />
            
            <p>checkStat checks that a direct stat of path matches entry,
which was found in the parent's directory listing.</p>
            
            <pre><code>func checkStat(path string, entry fs.DirEntry)</code></pre>
         </article>
         
         <article class="function" data-name="checkDirList">
            <h2>checkDirList</h2>
            <hr />
            
            <p>checkDirList checks that two directory lists contain the same files and file info.
The order of the lists need not match.</p>
            
            <pre><code>func checkDirList(dir string, desc string, list1 []fs.DirEntry, list2 []fs.DirEntry)</code></pre>
         </article>
         
         <article class="function" data-name="checkFile">
            <h2>checkFile</h2>
            <hr />
            
            <p>checkFile checks that basic file reading works correctly.</p>
            
            <pre><code>func checkFile(file string)</code></pre>
         </article>
         
         <article class="function" data-name="checkFileRead">
            <h2>checkFileRead</h2>
            <hr />
            
            <pre><code>func checkFileRead(file string, desc string, data1 []byte, data2 []byte)</code></pre>
         </article>
         
         <article class="function" data-name="checkOpen">
            <h2>checkOpen</h2>
            <hr />
            
            <p>checkOpen validates file opening behavior by attempting to open and then close the given file path.</p>
            
            <pre><code>func checkOpen(file string)</code></pre>
         </article>
         
         <article class="function" data-name="checkBadPath">
            <h2>checkBadPath</h2>
            <hr />
            
            <p>checkBadPath checks that various invalid forms of file's name cannot be opened using open.</p>
            
            <pre><code>func checkBadPath(file string, desc string, open func)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
