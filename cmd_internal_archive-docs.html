<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - archive</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
          
         <a href="cmd_internal_archive_testdata-docs.html">testdata</a>
         <br />
          
      </aside>
      <main>
         <h1>
            Package
            <code>archive</code>
         </h1>
         <hr />
         
         <article class="global" data-name="EntryPkgDef">
            <h2>EntryPkgDef</h2>
            <hr />
            
            <pre><code>EntryPkgDef EntryType</code></pre>
         </article>
         
         <article class="global" data-name="EntryGoObj">
            <h2>EntryGoObj</h2>
            <hr />
            
            <pre><code>EntryGoObj</code></pre>
         </article>
         
         <article class="global" data-name="EntryNativeObj">
            <h2>EntryNativeObj</h2>
            <hr />
            
            <pre><code>EntryNativeObj</code></pre>
         </article>
         
         <article class="global" data-name="EntrySentinelNonObj">
            <h2>EntrySentinelNonObj</h2>
            <hr />
            
            <pre><code>EntrySentinelNonObj</code></pre>
         </article>
         
         <article class="global" data-name="entryHeader">
            <h2>entryHeader</h2>
            <hr />
            
            <pre><code>entryHeader</code></pre>
         </article>
         
         <article class="global" data-name="entryLen">
            <h2>entryLen</h2>
            <hr />
            
            <p>In entryHeader the first entry, the name, is always printed as 16 bytes right-padded.</p>
            
            <pre><code>entryLen</code></pre>
         </article>
         
         <article class="global" data-name="timeFormat">
            <h2>timeFormat</h2>
            <hr />
            
            <pre><code>timeFormat</code></pre>
         </article>
         
         <article class="global" data-name="archiveHeader">
            <h2>archiveHeader</h2>
            <hr />
            
            <pre><code>archiveHeader</code></pre>
         </article>
         
         <article class="global" data-name="archiveMagic">
            <h2>archiveMagic</h2>
            <hr />
            
            <pre><code>archiveMagic</code></pre>
         </article>
         
         <article class="global" data-name="goobjHeader">
            <h2>goobjHeader</h2>
            <hr />
            
            <pre><code>goobjHeader</code></pre>
         </article>
         
         <article class="global" data-name="errCorruptArchive">
            <h2>errCorruptArchive</h2>
            <hr />
            
            <pre><code>errCorruptArchive</code></pre>
         </article>
         
         <article class="global" data-name="errTruncatedArchive">
            <h2>errTruncatedArchive</h2>
            <hr />
            
            <pre><code>errTruncatedArchive</code></pre>
         </article>
         
         <article class="global" data-name="errCorruptObject">
            <h2>errCorruptObject</h2>
            <hr />
            
            <pre><code>errCorruptObject</code></pre>
         </article>
         
         <article class="global" data-name="errNotObject">
            <h2>errNotObject</h2>
            <hr />
            
            <pre><code>errNotObject</code></pre>
         </article>
         
         <article class="global" data-name="HeaderSize">
            <h2>HeaderSize</h2>
            <hr />
            
            <p>architecture-independent object file output</p>
            
            <pre><code>HeaderSize</code></pre>
         </article>
         
         <article class="global" data-name="buildDir">
            <h2>buildDir</h2>
            <hr />
            
            <pre><code>buildDir string</code></pre>
         </article>
         
         <article class="global" data-name="buildOnce">
            <h2>buildOnce</h2>
            <hr />
            
            <pre><code>buildOnce sync.Once</code></pre>
         </article>
         
         <article class="global" data-name="builtGoobjs">
            <h2>builtGoobjs</h2>
            <hr />
            
            <pre><code>builtGoobjs goobjPaths</code></pre>
         </article>
         
         <article class="global" data-name="buildErr">
            <h2>buildErr</h2>
            <hr />
            
            <pre><code>buildErr error</code></pre>
         </article>
          
         <article class="struct" data-name="Data">
            <h2>type Data struct</h2>
            <hr />
            
            <p>A Data is a reference to data stored in an object file.
It records the offset and size of the data, so that a client can
read the data only if necessary.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">Offset int64
Size int64</code></pre>
         </article>
         
         <article class="struct" data-name="Archive">
            <h2>type Archive struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">f *os.File
Entries []Entry</code></pre>
         </article>
         
         <article class="struct" data-name="Entry">
            <h2>type Entry struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">Name string
Type EntryType
Mtime int64
Uid int
Gid int
Mode os.FileMode
Data
Obj *GoObj</code></pre>
         </article>
         
         <article class="struct" data-name="GoObj">
            <h2>type GoObj struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">TextHeader []byte
Arch string
Data</code></pre>
         </article>
         
         <article class="struct" data-name="ErrGoObjOtherVersion">
            <h2>type ErrGoObjOtherVersion struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">magic []byte</code></pre>
         </article>
         
         <article class="struct" data-name="objReader">
            <h2>type objReader struct</h2>
            <hr />
            
            <p>An objReader is an object file reader.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">a *Archive
b *bio.Reader
err error
offset int64
limit int64
tmp []byte</code></pre>
         </article>
         
         <article class="struct" data-name="goobjPaths">
            <h2>type goobjPaths struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">go1obj string
go2obj string
goarchive string
cgoarchive string</code></pre>
         </article>
          
         <article class="function" data-name="File">
            <h2>File</h2>
            <hr />
            
            <pre><code>func File() *os.File</code></pre>
         </article>
         
         <article class="function" data-name="String">
            <h2>String</h2>
            <hr />
            
            <pre><code>func String() string</code></pre>
         </article>
         
         <article class="function" data-name="Error">
            <h2>Error</h2>
            <hr />
            
            <pre><code>func Error() string</code></pre>
         </article>
         
         <article class="function" data-name="init">
            <h2>init</h2>
            <hr />
            
            <pre><code>func init(f *os.File)</code></pre>
         </article>
         
         <article class="function" data-name="error">
            <h2>error</h2>
            <hr />
            
            <p>error records that an error occurred.
It returns only the first error, so that an error
caused by an earlier error does not discard information
about the earlier error.</p>
            
            <pre><code>func error(err error) error</code></pre>
         </article>
         
         <article class="function" data-name="peek">
            <h2>peek</h2>
            <hr />
            
            <p>peek returns the next n bytes without advancing the reader.</p>
            
            <pre><code>func peek(n int) ([]byte, error)</code></pre>
         </article>
         
         <article class="function" data-name="readByte">
            <h2>readByte</h2>
            <hr />
            
            <p>readByte reads and returns a byte from the input file.
On I/O error or EOF, it records the error but returns byte 0.
A sequence of 0 bytes will eventually terminate any
parsing state in the object file. In particular, it ends the
reading of a varint.</p>
            
            <pre><code>func readByte() byte</code></pre>
         </article>
         
         <article class="function" data-name="readFull">
            <h2>readFull</h2>
            <hr />
            
            <p>readFull reads exactly len(b) bytes from the input file.
If an error occurs, read returns the error but also
records it, so it is safe for callers to ignore the result
as long as delaying the report is not a problem.</p>
            
            <pre><code>func readFull(b []byte) error</code></pre>
         </article>
         
         <article class="function" data-name="skip">
            <h2>skip</h2>
            <hr />
            
            <p>skip skips n bytes in the input.</p>
            
            <pre><code>func skip(n int64)</code></pre>
         </article>
         
         <article class="function" data-name="New">
            <h2>New</h2>
            <hr />
            
            <p>New writes to f to make a new archive.</p>
            
            <pre><code>func New(f *os.File) (*Archive, error)</code></pre>
         </article>
         
         <article class="function" data-name="Parse">
            <h2>Parse</h2>
            <hr />
            
            <p>Parse parses an object file or archive from f.</p>
            
            <pre><code>func Parse(f *os.File, verbose bool) (*Archive, error)</code></pre>
         </article>
         
         <article class="function" data-name="trimSpace">
            <h2>trimSpace</h2>
            <hr />
            
            <p>trimSpace removes trailing spaces from b and returns the corresponding string.
This effectively parses the form used in archive headers.</p>
            
            <pre><code>func trimSpace(b []byte) string</code></pre>
         </article>
         
         <article class="function" data-name="parseArchive">
            <h2>parseArchive</h2>
            <hr />
            
            <p>parseArchive parses a Unix archive of Go object files.</p>
            
            <pre><code>func parseArchive(verbose bool) error</code></pre>
         </article>
         
         <article class="function" data-name="parseObject">
            <h2>parseObject</h2>
            <hr />
            
            <p>parseObject parses a single Go object file.
The object file consists of a textual header ending in "\n!\n"
and then the part we want to parse begins.
The format of that part is defined in a comment at the top
of cmd/internal/goobj/objfile.go.</p>
            
            <pre><code>func parseObject(o *GoObj, size int64) error</code></pre>
         </article>
         
         <article class="function" data-name="AddEntry">
            <h2>AddEntry</h2>
            <hr />
            
            <p>AddEntry adds an entry to the end of a, with the content from r.</p>
            
            <pre><code>func AddEntry(typ EntryType, name string, mtime int64, uid int, gid int, mode os.FileMode, size int64, r io.Reader)</code></pre>
         </article>
         
         <article class="function" data-name="exactly16Bytes">
            <h2>exactly16Bytes</h2>
            <hr />
            
            <p>exactly16Bytes truncates the string if necessary so it is at most 16 bytes long,
then pads the result with spaces to be exactly 16 bytes.
Fmt uses runes for its width calculation, but we need bytes in the entry header.</p>
            
            <pre><code>func exactly16Bytes(s string) string</code></pre>
         </article>
         
         <article class="function" data-name="ReadHeader">
            <h2>ReadHeader</h2>
            <hr />
            
            <pre><code>func ReadHeader(b *bufio.Reader, name string) int</code></pre>
         </article>
         
         <article class="function" data-name="FormatHeader">
            <h2>FormatHeader</h2>
            <hr />
            
            <pre><code>func FormatHeader(arhdr []byte, name string, size int64)</code></pre>
         </article>
         
         <article class="function" data-name="TestMain">
            <h2>TestMain</h2>
            <hr />
            
            <pre><code>func TestMain(m *testing.M)</code></pre>
         </article>
         
         <article class="function" data-name="copyDir">
            <h2>copyDir</h2>
            <hr />
            
            <pre><code>func copyDir(dst string, src string) error</code></pre>
         </article>
         
         <article class="function" data-name="copyFile">
            <h2>copyFile</h2>
            <hr />
            
            <pre><code>func copyFile(dst string, src string) err error</code></pre>
         </article>
         
         <article class="function" data-name="buildGoobj">
            <h2>buildGoobj</h2>
            <hr />
            
            <pre><code>func buildGoobj(t *testing.T) goobjPaths</code></pre>
         </article>
         
         <article class="function" data-name="TestParseGoobj">
            <h2>TestParseGoobj</h2>
            <hr />
            
            <pre><code>func TestParseGoobj(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestParseArchive">
            <h2>TestParseArchive</h2>
            <hr />
            
            <pre><code>func TestParseArchive(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestParseCGOArchive">
            <h2>TestParseCGOArchive</h2>
            <hr />
            
            <pre><code>func TestParseCGOArchive(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestExactly16Bytes">
            <h2>TestExactly16Bytes</h2>
            <hr />
            
            <pre><code>func TestExactly16Bytes(t *testing.T)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
