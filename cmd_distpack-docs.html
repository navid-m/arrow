<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - main</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>main</code>
         </h1>
         <hr />
         
         <article class="global" data-name="srcRules">
            <h2>srcRules</h2>
            <hr />
            
            <pre><code>srcRules</code></pre>
         </article>
         
         <article class="global" data-name="zipRules">
            <h2>zipRules</h2>
            <hr />
            
            <pre><code>zipRules</code></pre>
         </article>
         
         <article class="global" data-name="modRules">
            <h2>modRules</h2>
            <hr />
            
            <pre><code>modRules</code></pre>
         </article>
         
         <article class="global" data-name="amatchTests">
            <h2>amatchTests</h2>
            <hr />
            
            <pre><code>amatchTests</code></pre>
         </article>
         
         <article class="global" data-name="modPath">
            <h2>modPath</h2>
            <hr />
            
            <pre><code>modPath</code></pre>
         </article>
         
         <article class="global" data-name="modVersionPrefix">
            <h2>modVersionPrefix</h2>
            <hr />
            
            <pre><code>modVersionPrefix</code></pre>
         </article>
         
         <article class="global" data-name="goroot">
            <h2>goroot</h2>
            <hr />
            
            <pre><code>goroot string</code></pre>
         </article>
         
         <article class="global" data-name="gohostos">
            <h2>gohostos</h2>
            <hr />
            
            <pre><code>gohostos string</code></pre>
         </article>
         
         <article class="global" data-name="gohostarch">
            <h2>gohostarch</h2>
            <hr />
            
            <pre><code>gohostarch string</code></pre>
         </article>
         
         <article class="global" data-name="goos">
            <h2>goos</h2>
            <hr />
            
            <pre><code>goos string</code></pre>
         </article>
         
         <article class="global" data-name="goarch">
            <h2>goarch</h2>
            <hr />
            
            <pre><code>goarch string</code></pre>
         </article>
          
         <article class="struct" data-name="testRule">
            <h2>type testRule struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">name string
goos string
exclude bool</code></pre>
         </article>
         
         <article class="struct" data-name="Archive">
            <h2>type Archive struct</h2>
            <hr />
            
            <p>An Archive describes an archive to write: a collection of files.
Directories are implied by the files and not explicitly listed.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">Files []File</code></pre>
         </article>
         
         <article class="struct" data-name="File">
            <h2>type File struct</h2>
            <hr />
            
            <p>A File describes a single file to write to an archive.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">Name string
Time time.Time
Mode fs.FileMode
Size int64
Src string</code></pre>
         </article>
         
         <article class="struct" data-name="fileInfo">
            <h2>type fileInfo struct</h2>
            <hr />
            
            <p>A fileInfo is an implementation of fs.FileInfo describing a File.</p>
            
            <pre
               class="fields-block"
            ><code class="fields-code">f *File</code></pre>
         </article>
          
         <article class="function" data-name="testSrc">
            <h2>testSrc</h2>
            <hr />
            
            <pre><code>func testSrc(a *Archive)</code></pre>
         </article>
         
         <article class="function" data-name="testZip">
            <h2>testZip</h2>
            <hr />
            
            <pre><code>func testZip(a *Archive)</code></pre>
         </article>
         
         <article class="function" data-name="testMod">
            <h2>testMod</h2>
            <hr />
            
            <pre><code>func testMod(a *Archive)</code></pre>
         </article>
         
         <article class="function" data-name="test">
            <h2>test</h2>
            <hr />
            
            <pre><code>func test(kind string, a *Archive, rules []testRule)</code></pre>
         </article>
         
         <article class="function" data-name="Info">
            <h2>Info</h2>
            <hr />
            
            <p>Info returns a FileInfo about the file, for use with tar.FileInfoHeader
and zip.FileInfoHeader.</p>
            
            <pre><code>func Info() fs.FileInfo</code></pre>
         </article>
         
         <article class="function" data-name="Name">
            <h2>Name</h2>
            <hr />
            
            <pre><code>func Name() string</code></pre>
         </article>
         
         <article class="function" data-name="ModTime">
            <h2>ModTime</h2>
            <hr />
            
            <pre><code>func ModTime() time.Time</code></pre>
         </article>
         
         <article class="function" data-name="Mode">
            <h2>Mode</h2>
            <hr />
            
            <pre><code>func Mode() fs.FileMode</code></pre>
         </article>
         
         <article class="function" data-name="IsDir">
            <h2>IsDir</h2>
            <hr />
            
            <pre><code>func IsDir() bool</code></pre>
         </article>
         
         <article class="function" data-name="Size">
            <h2>Size</h2>
            <hr />
            
            <pre><code>func Size() int64</code></pre>
         </article>
         
         <article class="function" data-name="Sys">
            <h2>Sys</h2>
            <hr />
            
            <pre><code>func Sys() any</code></pre>
         </article>
         
         <article class="function" data-name="String">
            <h2>String</h2>
            <hr />
            
            <pre><code>func String() string</code></pre>
         </article>
         
         <article class="function" data-name="NewArchive">
            <h2>NewArchive</h2>
            <hr />
            
            <p>NewArchive returns a new Archive containing all the files in the directory dir.
The archive can be amended afterward using methods like Add and Filter.</p>
            
            <pre><code>func NewArchive(dir string) (*Archive, error)</code></pre>
         </article>
         
         <article class="function" data-name="Add">
            <h2>Add</h2>
            <hr />
            
            <p>Add adds a file with the given name and info to the archive.
The content of the file comes from the operating system file src.
After a sequence of one or more calls to Add,
the caller should invoke Sort to re-sort the archive's files.</p>
            
            <pre><code>func Add(name string, src string, info fs.FileInfo)</code></pre>
         </article>
         
         <article class="function" data-name="nameLess">
            <h2>nameLess</h2>
            <hr />
            
            <pre><code>func nameLess(x string, y string) bool</code></pre>
         </article>
         
         <article class="function" data-name="Sort">
            <h2>Sort</h2>
            <hr />
            
            <p>Sort sorts the files in the archive.
It is only necessary to call Sort after calling Add or RenameGoMod.
NewArchive returns a sorted archive, and the other methods
preserve the sorting of the archive.</p>
            
            <pre><code>func Sort()</code></pre>
         </article>
         
         <article class="function" data-name="Clone">
            <h2>Clone</h2>
            <hr />
            
            <p>Clone returns a copy of the Archive.
Method calls like Add and Filter invoked on the copy do not affect the original,
nor do calls on the original affect the copy.</p>
            
            <pre><code>func Clone() *Archive</code></pre>
         </article>
         
         <article class="function" data-name="AddPrefix">
            <h2>AddPrefix</h2>
            <hr />
            
            <p>AddPrefix adds a prefix to all file names in the archive.</p>
            
            <pre><code>func AddPrefix(prefix string)</code></pre>
         </article>
         
         <article class="function" data-name="Filter">
            <h2>Filter</h2>
            <hr />
            
            <p>Filter removes files from the archive for which keep(name) returns false.</p>
            
            <pre><code>func Filter(keep func)</code></pre>
         </article>
         
         <article class="function" data-name="SetMode">
            <h2>SetMode</h2>
            <hr />
            
            <p>SetMode changes the mode of every file in the archive
to be mode(name, m), where m is the file's current mode.</p>
            
            <pre><code>func SetMode(mode func)</code></pre>
         </article>
         
         <article class="function" data-name="Remove">
            <h2>Remove</h2>
            <hr />
            
            <p>Remove removes files matching any of the patterns from the archive.
The patterns use the syntax of path.Match, with an extension of allowing
a leading **/ or trailing /**, which match any number of path elements
(including no path elements) before or after the main match.</p>
            
            <pre><code>func Remove(patterns ...string)</code></pre>
         </article>
         
         <article class="function" data-name="SetTime">
            <h2>SetTime</h2>
            <hr />
            
            <p>SetTime sets the modification time of all files in the archive to t.</p>
            
            <pre><code>func SetTime(t time.Time)</code></pre>
         </article>
         
         <article class="function" data-name="RenameGoMod">
            <h2>RenameGoMod</h2>
            <hr />
            
            <p>RenameGoMod renames the go.mod files in the archive to _go.mod,
for use with the module form, which cannot contain other go.mod files.</p>
            
            <pre><code>func RenameGoMod()</code></pre>
         </article>
         
         <article class="function" data-name="amatch">
            <h2>amatch</h2>
            <hr />
            
            <pre><code>func amatch(pattern string, name string) (bool, error)</code></pre>
         </article>
         
         <article class="function" data-name="TestAmatch">
            <h2>TestAmatch</h2>
            <hr />
            
            <pre><code>func TestAmatch(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="usage">
            <h2>usage</h2>
            <hr />
            
            <pre><code>func usage()</code></pre>
         </article>
         
         <article class="function" data-name="main">
            <h2>main</h2>
            <hr />
            
            <pre><code>func main()</code></pre>
         </article>
         
         <article class="function" data-name="mode">
            <h2>mode</h2>
            <hr />
            
            <p>mode computes the mode for the given file name.</p>
            
            <pre><code>func mode(name string, _ fs.FileMode) fs.FileMode</code></pre>
         </article>
         
         <article class="function" data-name="readVERSION">
            <h2>readVERSION</h2>
            <hr />
            
            <p>readVERSION reads the VERSION file.
The first line of the file is the Go version.
Additional lines are 'key value' pairs setting other data.
The only valid key at the moment is 'time', which sets the modification time for file archives.</p>
            
            <pre><code>func readVERSION(goroot string) (version string, t time.Time)</code></pre>
         </article>
         
         <article class="function" data-name="writeFile">
            <h2>writeFile</h2>
            <hr />
            
            <p>writeFile writes a file with the given name and data or fatals.</p>
            
            <pre><code>func writeFile(name string, data []byte)</code></pre>
         </article>
         
         <article class="function" data-name="check">
            <h2>check</h2>
            <hr />
            
            <p>check panics if err is not nil. Otherwise it returns x.
It is only meant to be used in a function that has deferred
a function to recover appropriately from the panic.</p>
            
            <pre><code>func check(x T, err error) T</code></pre>
         </article>
         
         <article class="function" data-name="check1">
            <h2>check1</h2>
            <hr />
            
            <p>check1 panics if err is not nil.
It is only meant to be used in a function that has deferred
a function to recover appropriately from the panic.</p>
            
            <pre><code>func check1(err error)</code></pre>
         </article>
         
         <article class="function" data-name="writeTgz">
            <h2>writeTgz</h2>
            <hr />
            
            <p>writeTgz writes the archive in tgz form to the file named name.</p>
            
            <pre><code>func writeTgz(name string, a *Archive)</code></pre>
         </article>
         
         <article class="function" data-name="writeZip">
            <h2>writeZip</h2>
            <hr />
            
            <p>writeZip writes the archive in zip form to the file named name.</p>
            
            <pre><code>func writeZip(name string, a *Archive)</code></pre>
         </article>
         
         <article class="function" data-name="reportHash">
            <h2>reportHash</h2>
            <hr />
            
            <pre><code>func reportHash(name string)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
