<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - httpguts</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
         
         <span style="color: rgba(177, 175, 175, 0.5)">
            No subpackages
         </span>
         
      </aside>
      <main>
         <h1>
            Package
            <code>httpguts</code>
         </h1>
         <hr />
         
         <article class="global" data-name="badTrailer">
            <h2>badTrailer</h2>
            <hr />
            
            <pre><code>badTrailer</code></pre>
         </article>
         
         <article class="global" data-name="isTokenTable">
            <h2>isTokenTable</h2>
            <hr />
            
            <pre><code>isTokenTable</code></pre>
         </article>
         
         <article class="global" data-name="validHostByte">
            <h2>validHostByte</h2>
            <hr />
            
            <p>See the validHostHeader comment.</p>
            
            <pre><code>validHostByte</code></pre>
         </article>
           
         <article class="function" data-name="ValidTrailerHeader">
            <h2>ValidTrailerHeader</h2>
            <hr />
            
            <p>ValidTrailerHeader reports whether name is a valid header field name to appear
in trailers.
See RFC 7230, Section 4.1.2</p>
            
            <pre><code>func ValidTrailerHeader(name string) bool</code></pre>
         </article>
         
         <article class="function" data-name="IsTokenRune">
            <h2>IsTokenRune</h2>
            <hr />
            
            <pre><code>func IsTokenRune(r rune) bool</code></pre>
         </article>
         
         <article class="function" data-name="HeaderValuesContainsToken">
            <h2>HeaderValuesContainsToken</h2>
            <hr />
            
            <p>HeaderValuesContainsToken reports whether any string in values
contains the provided token, ASCII case-insensitively.</p>
            
            <pre><code>func HeaderValuesContainsToken(values []string, token string) bool</code></pre>
         </article>
         
         <article class="function" data-name="isOWS">
            <h2>isOWS</h2>
            <hr />
            
            <p>isOWS reports whether b is an optional whitespace byte, as defined
by RFC 7230 section 3.2.3.</p>
            
            <pre><code>func isOWS(b byte) bool</code></pre>
         </article>
         
         <article class="function" data-name="trimOWS">
            <h2>trimOWS</h2>
            <hr />
            
            <p>trimOWS returns x with all optional whitespace removes from the
beginning and end.</p>
            
            <pre><code>func trimOWS(x string) string</code></pre>
         </article>
         
         <article class="function" data-name="headerValueContainsToken">
            <h2>headerValueContainsToken</h2>
            <hr />
            
            <p>headerValueContainsToken reports whether v (assumed to be a
0#element, in the ABNF extension described in RFC 7230 section 7)
contains token amongst its comma-separated tokens, ASCII
case-insensitively.</p>
            
            <pre><code>func headerValueContainsToken(v string, token string) bool</code></pre>
         </article>
         
         <article class="function" data-name="lowerASCII">
            <h2>lowerASCII</h2>
            <hr />
            
            <p>lowerASCII returns the ASCII lowercase version of b.</p>
            
            <pre><code>func lowerASCII(b byte) byte</code></pre>
         </article>
         
         <article class="function" data-name="tokenEqual">
            <h2>tokenEqual</h2>
            <hr />
            
            <p>tokenEqual reports whether t1 and t2 are equal, ASCII case-insensitively.</p>
            
            <pre><code>func tokenEqual(t1 string, t2 string) bool</code></pre>
         </article>
         
         <article class="function" data-name="isLWS">
            <h2>isLWS</h2>
            <hr />
            
            <p>isLWS reports whether b is linear white space, according
to http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2

	LWS            = [CRLF] 1*( SP | HT )</p>
            
            <pre><code>func isLWS(b byte) bool</code></pre>
         </article>
         
         <article class="function" data-name="isCTL">
            <h2>isCTL</h2>
            <hr />
            
            <p>isCTL reports whether b is a control byte, according
to http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2

	CTL            = <any US-ASCII control character
	                 (octets 0 - 31) and DEL (127)></p>
            
            <pre><code>func isCTL(b byte) bool</code></pre>
         </article>
         
         <article class="function" data-name="ValidHeaderFieldName">
            <h2>ValidHeaderFieldName</h2>
            <hr />
            
            <p>ValidHeaderFieldName reports whether v is a valid HTTP/1.x header name.
HTTP/2 imposes the additional restriction that uppercase ASCII
letters are not allowed.

RFC 7230 says:

	header-field   = field-name ":" OWS field-value OWS
	field-name     = token
	token          = 1*tchar
	tchar = "!" / "#" / "$" / "%" / "&" / "'" / "*" / "+" / "-" / "." /
	        "^" / "_" / "`" / "|" / "~" / DIGIT / ALPHA</p>
            
            <pre><code>func ValidHeaderFieldName(v string) bool</code></pre>
         </article>
         
         <article class="function" data-name="ValidHostHeader">
            <h2>ValidHostHeader</h2>
            <hr />
            
            <p>ValidHostHeader reports whether h is a valid host header.</p>
            
            <pre><code>func ValidHostHeader(h string) bool</code></pre>
         </article>
         
         <article class="function" data-name="ValidHeaderFieldValue">
            <h2>ValidHeaderFieldValue</h2>
            <hr />
            
            <p>ValidHeaderFieldValue reports whether v is a valid "field-value" according to
http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2 :

	message-header = field-name ":" [ field-value ]
	field-value    = *( field-content | LWS )
	field-content  = <the OCTETs making up the field-value
	                 and consisting of either *TEXT or combinations
	                 of token, separators, and quoted-string>

http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html#sec2.2 :

	TEXT           = <any OCTET except CTLs,
	                  but including LWS>
	LWS            = [CRLF] 1*( SP | HT )
	CTL            = <any US-ASCII control character
	                 (octets 0 - 31) and DEL (127)>

RFC 7230 says:

	field-value    = *( field-content / obs-fold )
	obj-fold       =  N/A to http2, and deprecated
	field-content  = field-vchar [ 1*( SP / HTAB ) field-vchar ]
	field-vchar    = VCHAR / obs-text
	obs-text       = %x80-FF
	VCHAR          = "any visible [USASCII] character"

http2 further says: "Similarly, HTTP/2 allows header field values
that are not valid. While most of the values that can be encoded
will not alter header field parsing, carriage return (CR, ASCII
0xd), line feed (LF, ASCII 0xa), and the zero character (NUL, ASCII
0x0) might be exploited by an attacker if they are translated
verbatim. Any request or response that contains a character not
permitted in a header field value MUST be treated as malformed
(Section 8.1.2.6). Valid characters are defined by the
field-content ABNF rule in Section 3.2 of [RFC7230]."

This function does not (yet?) properly handle the rejection of
strings that begin or end with SP or HTAB.</p>
            
            <pre><code>func ValidHeaderFieldValue(v string) bool</code></pre>
         </article>
         
         <article class="function" data-name="isASCII">
            <h2>isASCII</h2>
            <hr />
            
            <pre><code>func isASCII(s string) bool</code></pre>
         </article>
         
         <article class="function" data-name="PunycodeHostPort">
            <h2>PunycodeHostPort</h2>
            <hr />
            
            <p>PunycodeHostPort returns the IDNA Punycode version
of the provided "host" or "host:port" string.</p>
            
            <pre><code>func PunycodeHostPort(v string) (string, error)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
