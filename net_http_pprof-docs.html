<!DOCTYPE html>
<html lang="en" data-theme="dark">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
      />
      <title>Docs - pprof</title>
      <link
         href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"
         rel="stylesheet"
      />
      <style>
         html {
            font-size: 13px;
         }
         body {
            display: flex;
            min-height: 100vh;
            margin: 0;
         }
         .sidebar {
            width: 200px;
            background: rgba(59, 56, 56, 0.1);
            padding: 1.2rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.3);
            overflow-y: auto;
            margin-right: 7px;
         }
         main {
            flex: 0.9;
            padding: 1rem;
            margin: 0;
            max-width: calc(100% - 220px);
         }
         h1 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
         }
         h2 {
            font-size: 1.2rem;
            margin: 0.3rem 0 0.2rem;
         }
         pre {
            background: #1e1e1e;
            color: #dcdcdc;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            margin: 0 0 1rem;
            font-size: 0.85rem;
            overflow-x: auto;
         }
         code {
            color: #f0dbdb;
            white-space: pre-wrap;
         }
         p {
            font-size: 15px;
            padding-top: 10px;
         }
         article {
            margin-bottom: 0.5rem;
            padding: 0.4rem 0.9rem;
            background: rgba(59, 56, 56, 0.5);
            border-radius: 10px;
            max-width: 99%;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
         }
         .hidden {
            display: none;
         }
         .filter-toggle label {
            display: block;
            margin-bottom: 0.5rem;
         }
         .field-line {
            display: block;
         }
      </style>
   </head>
   <body>
      <aside class="sidebar">
         <a href="index.html">⌂</a>
         |
         <a href="#" onclick="history.back()">←</a>
         <hr style="opacity: 0" />
         <h2>Filters</h2>
         <hr />
         <input
            type="search"
            id="searchInput"
            placeholder="Search symbols..."
            style="
               width: 100%;
               margin-bottom: 1rem;
               margin-top: 0.8rem;
               border-radius: 10px !important;
               height: 50px;
               height: 2.5rem;
            "
         />
         <div class="filter-toggle">
            <label>
               <input type="checkbox" id="showPrivateFunctions" />
               Show private functions
            </label>
            <label>
               <input type="checkbox" id="showPrivateStructs" />
               Show private structs
            </label>
            <label>
               <input type="checkbox" id="showPrivateFields" />
               Show private struct fields
            </label>
            <label>
               <input type="checkbox" id="showPrivateGlobals" />
               Show private globals
            </label>
         </div>
         <hr style="opacity: 0" />
         <h2 style="padding-top: 5px">Subpackages</h2>
         <hr />
          
         <a href="net_http_pprof_testdata-docs.html">testdata</a>
         <br />
          
      </aside>
      <main>
         <h1>
            Package
            <code>pprof</code>
         </h1>
         <hr />
         
         <article class="global" data-name="profileSupportsDelta">
            <h2>profileSupportsDelta</h2>
            <hr />
            
            <pre><code>profileSupportsDelta</code></pre>
         </article>
         
         <article class="global" data-name="profileDescriptions">
            <h2>profileDescriptions</h2>
            <hr />
            
            <pre><code>profileDescriptions</code></pre>
         </article>
         
         <article class="global" data-name="Sink">
            <h2>Sink</h2>
            <hr />
            
            <pre><code>Sink uint32</code></pre>
         </article>
         
         <article class="global" data-name="srv">
            <h2>srv</h2>
            <hr />
            
            <pre><code>srv</code></pre>
         </article>
          
         <article class="struct" data-name="profileEntry">
            <h2>type profileEntry struct</h2>
            <hr />
            
            <pre
               class="fields-block"
            ><code class="fields-code">Name string
Href string
Desc string
Count int</code></pre>
         </article>
          
         <article class="function" data-name="init">
            <h2>init</h2>
            <hr />
            
            <pre><code>func init()</code></pre>
         </article>
         
         <article class="function" data-name="Cmdline">
            <h2>Cmdline</h2>
            <hr />
            
            <p>Cmdline responds with the running program's
command line, with arguments separated by NUL bytes.
The package initialization registers it as /debug/pprof/cmdline.</p>
            
            <pre><code>func Cmdline(w http.ResponseWriter, r *http.Request)</code></pre>
         </article>
         
         <article class="function" data-name="sleep">
            <h2>sleep</h2>
            <hr />
            
            <pre><code>func sleep(r *http.Request, d time.Duration)</code></pre>
         </article>
         
         <article class="function" data-name="configureWriteDeadline">
            <h2>configureWriteDeadline</h2>
            <hr />
            
            <pre><code>func configureWriteDeadline(w http.ResponseWriter, r *http.Request, seconds float64)</code></pre>
         </article>
         
         <article class="function" data-name="serveError">
            <h2>serveError</h2>
            <hr />
            
            <pre><code>func serveError(w http.ResponseWriter, status int, txt string)</code></pre>
         </article>
         
         <article class="function" data-name="Profile">
            <h2>Profile</h2>
            <hr />
            
            <p>Profile responds with the pprof-formatted cpu profile.
Profiling lasts for duration specified in seconds GET parameter, or for 30 seconds if not specified.
The package initialization registers it as /debug/pprof/profile.</p>
            
            <pre><code>func Profile(w http.ResponseWriter, r *http.Request)</code></pre>
         </article>
         
         <article class="function" data-name="Trace">
            <h2>Trace</h2>
            <hr />
            
            <p>Trace responds with the execution trace in binary form.
Tracing lasts for duration specified in seconds GET parameter, or for 1 second if not specified.
The package initialization registers it as /debug/pprof/trace.</p>
            
            <pre><code>func Trace(w http.ResponseWriter, r *http.Request)</code></pre>
         </article>
         
         <article class="function" data-name="Symbol">
            <h2>Symbol</h2>
            <hr />
            
            <p>Symbol looks up the program counters listed in the request,
responding with a table mapping program counters to function names.
The package initialization registers it as /debug/pprof/symbol.</p>
            
            <pre><code>func Symbol(w http.ResponseWriter, r *http.Request)</code></pre>
         </article>
         
         <article class="function" data-name="Handler">
            <h2>Handler</h2>
            <hr />
            
            <p>Handler returns an HTTP handler that serves the named profile.
Available profiles can be found in [runtime/pprof.Profile].</p>
            
            <pre><code>func Handler(name string) http.Handler</code></pre>
         </article>
         
         <article class="function" data-name="ServeHTTP">
            <h2>ServeHTTP</h2>
            <hr />
            
            <pre><code>func ServeHTTP(w http.ResponseWriter, r *http.Request)</code></pre>
         </article>
         
         <article class="function" data-name="serveDeltaProfile">
            <h2>serveDeltaProfile</h2>
            <hr />
            
            <pre><code>func serveDeltaProfile(w http.ResponseWriter, r *http.Request, p *pprof.Profile, secStr string)</code></pre>
         </article>
         
         <article class="function" data-name="collectProfile">
            <h2>collectProfile</h2>
            <hr />
            
            <pre><code>func collectProfile(p *pprof.Profile) (*profile.Profile, error)</code></pre>
         </article>
         
         <article class="function" data-name="Index">
            <h2>Index</h2>
            <hr />
            
            <p>Index responds with the pprof-formatted profile named by the request.
For example, "/debug/pprof/heap" serves the "heap" profile.
Index responds to a request for "/debug/pprof/" with an HTML page
listing the available profiles.</p>
            
            <pre><code>func Index(w http.ResponseWriter, r *http.Request)</code></pre>
         </article>
         
         <article class="function" data-name="indexTmplExecute">
            <h2>indexTmplExecute</h2>
            <hr />
            
            <pre><code>func indexTmplExecute(w io.Writer, profiles []profileEntry) error</code></pre>
         </article>
         
         <article class="function" data-name="TestDescriptions">
            <h2>TestDescriptions</h2>
            <hr />
            
            <p>TestDescriptions checks that the profile names under runtime/pprof package
have a key in the description map.</p>
            
            <pre><code>func TestDescriptions(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="TestHandlers">
            <h2>TestHandlers</h2>
            <hr />
            
            <pre><code>func TestHandlers(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="mutexHog1">
            <h2>mutexHog1</h2>
            <hr />
            
            <pre><code>func mutexHog1(mu1 *sync.Mutex, mu2 *sync.Mutex, start time.Time, dt time.Duration)</code></pre>
         </article>
         
         <article class="function" data-name="mutexHog2">
            <h2>mutexHog2</h2>
            <hr />
            
            <p>mutexHog2 is almost identical to mutexHog but we keep them separate
in order to distinguish them with function names in the stack trace.
We make them slightly different, using Sink, because otherwise
gccgo -c opt will merge them.</p>
            
            <pre><code>func mutexHog2(mu1 *sync.Mutex, mu2 *sync.Mutex, start time.Time, dt time.Duration)</code></pre>
         </article>
         
         <article class="function" data-name="mutexHog">
            <h2>mutexHog</h2>
            <hr />
            
            <p>mutexHog starts multiple goroutines that runs the given hogger function for the specified duration.
The hogger function will be given two mutexes to lock & unlock.</p>
            
            <pre><code>func mutexHog(duration time.Duration, hogger func)</code></pre>
         </article>
         
         <article class="function" data-name="TestDeltaProfile">
            <h2>TestDeltaProfile</h2>
            <hr />
            
            <pre><code>func TestDeltaProfile(t *testing.T)</code></pre>
         </article>
         
         <article class="function" data-name="query">
            <h2>query</h2>
            <hr />
            
            <pre><code>func query(endpoint string) (*profile.Profile, error)</code></pre>
         </article>
         
         <article class="function" data-name="seen">
            <h2>seen</h2>
            <hr />
            
            <p>seen returns true if the profile includes samples whose stacks include
the specified function name (fname).</p>
            
            <pre><code>func seen(p *profile.Profile, fname string) bool</code></pre>
         </article>
         
         <article class="function" data-name="TestDeltaProfileEmptyBase">
            <h2>TestDeltaProfileEmptyBase</h2>
            <hr />
            
            <p>TestDeltaProfileEmptyBase validates that we still receive a valid delta
profile even if the base contains no samples.

Regression test for https://go.dev/issue/64566.</p>
            
            <pre><code>func TestDeltaProfileEmptyBase(t *testing.T)</code></pre>
         </article>
         
      </main>
      <script>
         function isPrivate(name) {
            return /^[a-z]/.test(name);
         }
         document.addEventListener("DOMContentLoaded", () => {
            const toggles = {
               functions: document.getElementById("showPrivateFunctions"),
               structs: document.getElementById("showPrivateStructs"),
               fields: document.getElementById("showPrivateFields"),
               globals: document.getElementById("showPrivateGlobals"),
            };
            const hideInitial = (selector, toggle) => {
               document.querySelectorAll(selector).forEach((el) => {
                  const name = el.dataset.name;
                  if (isPrivate(name)) {
                     el.classList.add("private", "hidden");
                  }
               });
               toggle.addEventListener("change", () => {
                  const show = toggle.checked;
                  document
                     .querySelectorAll(`${selector}.private`)
                     .forEach((el) => {
                        el.classList.toggle("hidden", !show);
                     });
               });
            };
            hideInitial("article.function", toggles.functions);
            hideInitial("article.struct", toggles.structs);
            hideInitial("article.global", toggles.globals);
            document
               .querySelectorAll("article.struct")
               .forEach((article) => {
                  const codeBlock =
                     article.querySelector("code.fields-code");
                  if (!codeBlock) return;
                  const lines = codeBlock.innerText.split("\n");
                  const newContent = lines
                     .map((line) => {
                        const trimmed = line.trim();
                        const nameMatch = trimmed.match(
                           /^([A-Za-z_][A-Za-z0-9_]*)/
                        );
                        if (!nameMatch)
                           return `<span class=\"field-line\">${line}</span>`;
                        const name = nameMatch[1];
                        const isPriv = isPrivate(name);
                        return `<span class=\"field-line${
                           isPriv ? " hidden private" : ""
                        }\" data-name=\"${name}\">${line}</span>`;
                     })
                     .join("");
                  codeBlock.innerHTML = newContent;
                  toggles.fields.addEventListener("change", () => {
                     const show = toggles.fields.checked;
                     article
                        .querySelectorAll(".field-line.private")
                        .forEach((el) =>
                           el.classList.toggle("hidden", !show)
                        );
                  });
               });
            const searchInput = document.getElementById("searchInput");
            searchInput.addEventListener("input", () => {
               const query = searchInput.value.trim().toLowerCase();
               document.querySelectorAll("article").forEach((el) => {
                  const name = el.dataset.name.toLowerCase();
                  if (query === "" || name.includes(query)) {
                     el.classList.remove("hidden");
                  } else {
                     el.classList.add("hidden");
                  }
               });
            });
         });
      </script>
   </body>
</html>
